"use strict";import H from"../Core/Globals.js";import U from"../Core/Utilities.js";var pick=U.pick,deg2rad=H.deg2rad;function rotate3D(e,t,p,a){return{x:a.cosB*e-a.sinB*p,y:-a.sinA*a.sinB*e+a.cosA*t-a.cosB*a.sinA*p,z:a.cosA*a.sinB*e+a.sinA*t+a.cosA*a.cosB*p}}var perspective3D=H.perspective3D=function(e,t,p){var a=p>0&&p<Number.POSITIVE_INFINITY?p/(e.z+t.z+p):1;return{x:e.x*a,y:e.y*a}},perspective=H.perspective=function(e,t,p,a){var i=t.options.chart.options3d,r=pick(a,!!p&&t.inverted),s={x:t.plotWidth/2,y:t.plotHeight/2,z:i.depth/2,vd:pick(i.depth,1)*pick(i.viewDistance,0)},o=t.scale3d||1,n=deg2rad*i.beta*(r?-1:1),c=deg2rad*i.alpha*(r?-1:1),h={cosA:Math.cos(c),cosB:Math.cos(-n),sinA:Math.sin(c),sinB:Math.sin(-n)};return p||(s.x+=t.plotLeft,s.y+=t.plotTop),e.map(function(e){var t=rotate3D((r?e.y:e.x)-s.x,(r?e.x:e.y)-s.y,(e.z||0)-s.z,h),p=perspective3D(t,s,s.vd);return p.x=p.x*o+s.x,p.y=p.y*o+s.y,p.z=t.z*o+s.z,{x:r?p.y:p.x,y:r?p.x:p.y,z:p.z}})},pointCameraDistance=H.pointCameraDistance=function(e,t){var p=t.options.chart.options3d,a=t.plotWidth/2,i=t.plotHeight/2,r=pick(p.depth,1)*pick(p.viewDistance,0)+p.depth;return Math.sqrt(Math.pow(a-pick(e.plotX,e.x),2)+Math.pow(i-pick(e.plotY,e.y),2)+Math.pow(r-pick(e.plotZ,e.z),2))},shapeArea=H.shapeArea=function(e){var t,p,a=0;for(t=0;t<e.length;t++)p=(t+1)%e.length,a+=e[t].x*e[p].y-e[p].x*e[t].y;return a/2},shapeArea3D=H.shapeArea3d=function(e,t,p){return shapeArea(perspective(e,t,p))},mathModule={perspective:perspective,perspective3D:perspective3D,pointCameraDistance:pointCameraDistance,shapeArea:shapeArea,shapeArea3D:shapeArea3D};export default mathModule;