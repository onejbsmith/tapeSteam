"use strict";import Axis from"./Axis/Axis.js";import BaseSeries from"./Series/Series.js";var seriesTypes=BaseSeries.seriesTypes;import Chart from"./Chart/Chart.js";import Color from"./Color/Color.js";var color=Color.parse;import H from"./Globals.js";var hasTouch=H.hasTouch,isTouchDevice=H.isTouchDevice;import LineSeries from"../Series/LineSeries.js";import NavigatorAxis from"./Axis/NavigatorAxis.js";import O from"./Options.js";var defaultOptions=O.defaultOptions;import Scrollbar from"./Scrollbar.js";import U from"./Utilities.js";var defaultSeriesType,addEvent=U.addEvent,clamp=U.clamp,correctFloat=U.correctFloat,defined=U.defined,destroyObjectProperties=U.destroyObjectProperties,erase=U.erase,extend=U.extend,find=U.find,isArray=U.isArray,isNumber=U.isNumber,merge=U.merge,pick=U.pick,removeEvent=U.removeEvent,splat=U.splat,numExt=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=[].filter.call(e,isNumber);if(s.length)return Math[t].apply(0,s)};defaultSeriesType=void 0===seriesTypes.areaspline?"line":"areaspline",extend(defaultOptions,{navigator:{height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:color("#6685c2").setOpacity(.3).get(),outlineColor:"#cccccc",outlineWidth:1,series:{type:defaultSeriesType,fillOpacity:.05,lineWidth:1,compare:null,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{overscroll:0,className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#999999"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),H.Renderer.prototype.symbols["navigator-handle"]=function(t,e,i,s,a){var r=(a&&a.width||0)/2,o=Math.round(r/3)+.5,n=a&&a.height||0;return[["M",-r-1,.5],["L",r,.5],["L",r,n+.5],["L",-r-1,n+.5],["L",-r-1,.5],["M",-o,4],["L",-o,n-3],["M",o-1,4],["L",o-1,n-3]]};var Navigator=function(){function t(t){this.baseSeries=void 0,this.chart=void 0,this.handles=void 0,this.height=void 0,this.left=void 0,this.navigatorEnabled=void 0,this.navigatorGroup=void 0,this.navigatorOptions=void 0,this.navigatorSeries=void 0,this.navigatorSize=void 0,this.opposite=void 0,this.outline=void 0,this.outlineHeight=void 0,this.range=void 0,this.rendered=void 0,this.shades=void 0,this.size=void 0,this.top=void 0,this.xAxis=void 0,this.yAxis=void 0,this.zoomedMax=void 0,this.zoomedMin=void 0,this.init(t)}return t.prototype.drawHandle=function(t,e,i,s){var a=this.navigatorOptions.handles.height;this.handles[e][s](i?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(t,10)+.5-a)}:{translateX:Math.round(this.left+parseInt(t,10)),translateY:Math.round(this.top+this.height/2-a/2-1)})},t.prototype.drawOutline=function(t,e,i,s){var a,r,o=this.navigatorOptions.maskInside,n=this.outline.strokeWidth(),h=n/2,d=n%2/2,l=this.outlineHeight,g=this.scrollbarHeight||0,v=this.size,c=this.left-g,p=this.top;i?(r=[["M",(c-=h)+l,p-g-d],["L",c+l,a=p+e+d],["L",c,a],["L",c,e=p+t+d],["L",c+l,e],["L",c+l,p+v+g]],o&&r.push(["M",c+l,a-h],["L",c+l,e+h])):(r=[["M",c,p+=h],["L",t+=c+g-d,p],["L",t,p+l],["L",e+=c+g-d,p+l],["L",e,p],["L",c+v+2*g,p]],o&&r.push(["M",t-h,p],["L",e+h,p])),this.outline[s]({d:r})},t.prototype.drawMasks=function(t,e,i,s){var a,r,o,n,h=this.left,d=this.top,l=this.height;i?(o=[h,h,h],n=[d,d+t,d+e],r=[l,l,l],a=[t,e-t,this.size-e]):(o=[h,h+t,h+e],n=[d,d,d],r=[t,e-t,this.size-e],a=[l,l,l]),this.shades.forEach(function(t,e){t[s]({x:o[e],y:n[e],width:r[e],height:a[e]})})},t.prototype.renderElements=function(){var t,e=this,i=e.navigatorOptions,s=i.maskInside,a=e.chart,r=a.inverted,o=a.renderer,n={cursor:r?"ns-resize":"ew-resize"};e.navigatorGroup=t=o.g("navigator").attr({zIndex:8,visibility:"hidden"}).add(),[!s,s,!s].forEach(function(s,r){e.shades[r]=o.rect().addClass("highcharts-navigator-mask"+(1===r?"-inside":"-outside")).add(t),a.styledMode||e.shades[r].attr({fill:s?i.maskFill:"rgba(0,0,0,0)"}).css(1===r&&n)}),e.outline=o.path().addClass("highcharts-navigator-outline").add(t),a.styledMode||e.outline.attr({"stroke-width":i.outlineWidth,stroke:i.outlineColor}),i.handles.enabled&&[0,1].forEach(function(s){if(i.handles.inverted=a.inverted,e.handles[s]=o.symbol(i.handles.symbols[s],-i.handles.width/2-1,0,i.handles.width,i.handles.height,i.handles),e.handles[s].attr({zIndex:7-s}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][s]).add(t),!a.styledMode){var r=i.handles;e.handles[s].attr({fill:r.backgroundColor,stroke:r.borderColor,"stroke-width":r.lineWidth}).css(n)}})},t.prototype.update=function(t){(this.series||[]).forEach(function(t){t.baseSeries&&delete t.baseSeries.navigatorSeries}),this.destroy();var e=this.chart.options;merge(!0,e.navigator,this.options,t),this.init(this.chart)},t.prototype.render=function(t,e,i,s){var a,r,o,n,h,d,l,g,v,c,p=this.chart,x=this.scrollbarHeight,u=this.xAxis,m=u.pointRange||0,f=u.navigatorAxis.fake?p.xAxis[0]:u,b=this.navigatorEnabled,M=this.rendered,E=p.inverted,y=p.xAxis[0].minRange,A=p.xAxis[0].options.maxRange;if(!this.hasDragged||defined(i)){if(t=correctFloat(t-m/2),e=correctFloat(e+m/2),!isNumber(t)||!isNumber(e)){if(!M)return;i=0,s=pick(u.width,f.width)}this.left=pick(u.left,p.plotLeft+x+(E?p.plotWidth:0)),this.size=d=n=pick(u.len,(E?p.plotHeight:p.plotWidth)-2*x),a=E?x:n+2*x,i=pick(i,u.toPixels(t,!0)),s=pick(s,u.toPixels(e,!0)),isNumber(i)&&Math.abs(i)!==1/0||(i=0,s=a),g=u.toValue(i,!0),v=u.toValue(s,!0),(c=Math.abs(correctFloat(v-g)))<y?this.grabbedLeft?i=u.toPixels(v-y-m,!0):this.grabbedRight&&(s=u.toPixels(g+y+m,!0)):defined(A)&&correctFloat(c-m)>A&&(this.grabbedLeft?i=u.toPixels(v-A-m,!0):this.grabbedRight&&(s=u.toPixels(g+A+m,!0))),this.zoomedMax=clamp(Math.max(i,s),0,d),this.zoomedMin=clamp(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(i,s),0,d),this.range=this.zoomedMax-this.zoomedMin,d=Math.round(this.zoomedMax),h=Math.round(this.zoomedMin),b&&(this.navigatorGroup.attr({visibility:"visible"}),l=M&&!this.hasDragged?"animate":"attr",this.drawMasks(h,d,E,l),this.drawOutline(h,d,E,l),this.navigatorOptions.handles.enabled&&(this.drawHandle(h,0,E,l),this.drawHandle(d,1,E,l))),this.scrollbar&&(E?(o=this.top-x,r=this.left-x+(b||!f.opposite?0:(f.titleOffset||0)+f.axisTitleMargin),x=n+2*x):(o=this.top+(b?this.height:-x),r=this.left-x),this.scrollbar.position(r,o,a,x),this.scrollbar.setRange(this.zoomedMin/(n||1),this.zoomedMax/(n||1))),this.rendered=!0}},t.prototype.addMouseEvents=function(){var t,e,i=this,s=i.chart,a=s.container,r=[];i.mouseMoveHandler=t=function(t){i.onMouseMove(t)},i.mouseUpHandler=e=function(t){i.onMouseUp(t)},(r=i.getPartsEvents("mousedown")).push(addEvent(s.renderTo,"mousemove",t),addEvent(a.ownerDocument,"mouseup",e)),hasTouch&&(r.push(addEvent(s.renderTo,"touchmove",t),addEvent(a.ownerDocument,"touchend",e)),r.concat(i.getPartsEvents("touchstart"))),i.eventsToUnbind=r,i.series&&i.series[0]&&r.push(addEvent(i.series[0].xAxis,"foundExtremes",function(){s.navigator.modifyNavigatorAxisExtremes()}))},t.prototype.getPartsEvents=function(t){var e=this,i=[];return["shades","handles"].forEach(function(s){e[s].forEach(function(a,r){i.push(addEvent(a.element,t,function(t){e[s+"Mousedown"](t,r)}))})}),i},t.prototype.shadesMousedown=function(t,e){t=this.chart.pointer.normalize(t);var i,s,a,r,o=this.chart,n=this.xAxis,h=this.zoomedMin,d=this.left,l=this.size,g=this.range,v=t.chartX;o.inverted&&(v=t.chartY,d=this.top),1===e?(this.grabbedCenter=v,this.fixedWidth=g,this.dragOffset=v-h):(r=v-d-g/2,0===e?r=Math.max(0,r):2===e&&r+g>=l&&(r=l-g,this.reversedExtremes?(r-=g,s=this.getUnionExtremes().dataMin):i=this.getUnionExtremes().dataMax),r!==h&&(this.fixedWidth=g,a=n.navigatorAxis.toFixedRange(r,r+g,s,i),defined(a.min)&&o.xAxis[0].setExtremes(Math.min(a.min,a.max),Math.max(a.min,a.max),!0,null,{trigger:"navigator"})))},t.prototype.handlesMousedown=function(t,e){t=this.chart.pointer.normalize(t);var i=this.chart,s=i.xAxis[0],a=this.reversedExtremes;0===e?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=a?s.min:s.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=a?s.max:s.min),i.fixedRange=null},t.prototype.onMouseMove=function(t){var e,i=this,s=i.chart,a=i.left,r=i.navigatorSize,o=i.range,n=i.dragOffset,h=s.inverted;t.touches&&0===t.touches[0].pageX||(e=(t=s.pointer.normalize(t)).chartX,h&&(a=i.top,e=t.chartY),i.grabbedLeft?(i.hasDragged=!0,i.render(0,0,e-a,i.otherHandlePos)):i.grabbedRight?(i.hasDragged=!0,i.render(0,0,i.otherHandlePos,e-a)):i.grabbedCenter&&(i.hasDragged=!0,e<n?e=n:e>r+n-o&&(e=r+n-o),i.render(0,0,e-n,e-n+o)),i.hasDragged&&i.scrollbar&&pick(i.scrollbar.options.liveRedraw,H.svg&&!isTouchDevice&&!this.chart.isBoosting)&&(t.DOMType=t.type,setTimeout(function(){i.onMouseUp(t)},0)))},t.prototype.onMouseUp=function(t){var e,i,s,a,r,o,n=this.chart,h=this.xAxis,d=this.scrollbar,l=t.DOMEvent||t,g=n.inverted,v=this.rendered&&!this.hasDragged?"animate":"attr";(!this.hasDragged||d&&d.hasDragged)&&"scrollbar"!==t.trigger||(s=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?a=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(r=this.fixedExtreme),this.zoomedMax===this.size&&(r=this.reversedExtremes?s.dataMin:s.dataMax),0===this.zoomedMin&&(a=this.reversedExtremes?s.dataMax:s.dataMin),o=h.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,a,r),defined(o.min)&&n.xAxis[0].setExtremes(Math.min(o.min,o.max),Math.max(o.min,o.max),!0,!this.hasDragged&&null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:l})),"mousemove"!==t.DOMType&&"touchmove"!==t.DOMType&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&isNumber(this.zoomedMin)&&isNumber(this.zoomedMax)&&(i=Math.round(this.zoomedMin),e=Math.round(this.zoomedMax),this.shades&&this.drawMasks(i,e,g,v),this.outline&&this.drawOutline(i,e,g,v),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(i,0,g,v),this.drawHandle(e,1,g,v)))},t.prototype.removeEvents=function(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(t){t()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()},t.prototype.removeBaseSeriesEvents=function(){var t=this.baseSeries||[];this.navigatorEnabled&&t[0]&&(!1!==this.navigatorOptions.adaptToUpdatedData&&t.forEach(function(t){removeEvent(t,"updatedData",this.updatedDataHandler)},this),t[0].xAxis&&removeEvent(t[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))},t.prototype.init=function(t){var e=t.options,i=e.navigator,s=i.enabled,a=e.scrollbar,r=a.enabled,o=s?i.height:0,n=r?a.height:0;this.handles=[],this.shades=[],this.chart=t,this.setBaseSeries(),this.height=o,this.scrollbarHeight=n,this.scrollbarEnabled=r,this.navigatorEnabled=s,this.navigatorOptions=i,this.scrollbarOptions=a,this.outlineHeight=o+n,this.opposite=pick(i.opposite,Boolean(!s&&t.inverted));var h=this,d=h.baseSeries,l=t.xAxis.length,g=t.yAxis.length,v=d&&d[0]&&d[0].xAxis||t.xAxis[0]||{options:{}};t.isDirtyBox=!0,h.navigatorEnabled?(h.xAxis=new Axis(t,merge({breaks:v.options.breaks,ordinal:v.options.ordinal},i.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",isX:!0,type:"datetime",index:l,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},t.inverted?{offsets:[n,0,-n,0],width:o}:{offsets:[0,-n,0,n],height:o})),h.yAxis=new Axis(t,merge(i.yAxis,{id:"navigator-y-axis",alignTicks:!1,offset:0,index:g,isInternal:!0,reversed:pick(i.yAxis&&i.yAxis.reversed,t.yAxis[0]&&t.yAxis[0].reversed,!1),zoomEnabled:!1},t.inverted?{width:o}:{height:o})),d||i.series.data?h.updateNavigatorSeries(!1):0===t.series.length&&(h.unbindRedraw=addEvent(t,"beforeRedraw",function(){t.series.length>0&&!h.series&&(h.setBaseSeries(),h.unbindRedraw())})),h.reversedExtremes=t.inverted&&!h.xAxis.reversed||!t.inverted&&h.xAxis.reversed,h.renderElements(),h.addMouseEvents()):(h.xAxis={chart:t,navigatorAxis:{fake:!0},translate:function(e,i){var s=t.xAxis[0],a=s.getExtremes(),r=s.len-2*n,o=numExt("min",s.options.min,a.dataMin),h=numExt("max",s.options.max,a.dataMax)-o;return i?e*h/r+o:r*(e-o)/h},toPixels:function(t){return this.translate(t)},toValue:function(t){return this.translate(t,!0)}},h.xAxis.navigatorAxis.axis=h.xAxis,h.xAxis.navigatorAxis.toFixedRange=NavigatorAxis.AdditionsClass.prototype.toFixedRange.bind(h.xAxis.navigatorAxis)),t.options.scrollbar.enabled&&(t.scrollbar=h.scrollbar=new Scrollbar(t.renderer,merge(t.options.scrollbar,{margin:h.navigatorEnabled?0:10,vertical:t.inverted}),t),addEvent(h.scrollbar,"changed",function(e){var i=h.size,s=i*this.to,a=i*this.from;h.hasDragged=h.scrollbar.hasDragged,h.render(0,0,a,s),(t.options.scrollbar.liveRedraw||"mousemove"!==e.DOMType&&"touchmove"!==e.DOMType)&&setTimeout(function(){h.onMouseUp(e)})})),h.addBaseSeriesEvents(),h.addChartEvents()},t.prototype.getUnionExtremes=function(t){var e,i=this.chart.xAxis[0],s=this.xAxis,a=s.options,r=i.options;return t&&null===i.dataMin||(e={dataMin:pick(a&&a.min,numExt("min",r.min,i.dataMin,s.dataMin,s.min)),dataMax:pick(a&&a.max,numExt("max",r.max,i.dataMax,s.dataMax,s.max))}),e},t.prototype.setBaseSeries=function(t,e){var i=this.chart,s=this.baseSeries=[];t=t||i.options&&i.options.navigator.baseSeries||(i.series.length?find(i.series,function(t){return!t.options.isInternal}).index:0),(i.series||[]).forEach(function(e,i){e.options.isInternal||!e.options.showInNavigator&&(i!==t&&e.options.id!==t||!1===e.options.showInNavigator)||s.push(e)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,e)},t.prototype.updateNavigatorSeries=function(t,e){var i,s,a,r=this,o=r.chart,n=r.baseSeries,h=r.navigatorOptions.series,d={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},l=r.series=(r.series||[]).filter(function(t){var e=t.baseSeries;return!(n.indexOf(e)<0)||(e&&(removeEvent(e,"updatedData",r.updatedDataHandler),delete e.navigatorSeries),t.chart&&t.destroy(),!1)});n&&n.length&&n.forEach(function(t){var g=t.navigatorSeries,v=extend({color:t.color,visible:t.visible},isArray(h)?defaultOptions.navigator.series:h);if(!g||!1!==r.navigatorOptions.adaptToUpdatedData){d.name="Navigator "+n.length,i=t.options||{},a=i.navigatorOptions||{},(s=merge(i,d,v,a)).pointRange=pick(v.pointRange,a.pointRange,defaultOptions.plotOptions[s.type||"line"].pointRange);var c=a.data||v.data;r.hasNavigatorData=r.hasNavigatorData||!!c,s.data=c||i.data&&i.data.slice(0),g&&g.options?g.update(s,e):(t.navigatorSeries=o.initSeries(s),t.navigatorSeries.baseSeries=t,l.push(t.navigatorSeries))}}),(!h.data||n&&n.length)&&!isArray(h)||(r.hasNavigatorData=!1,(h=splat(h)).forEach(function(t,e){d.name="Navigator "+(l.length+1),(s=merge(defaultOptions.navigator.series,{color:o.series[e]&&!o.series[e].options.isInternal&&o.series[e].color||o.options.colors[e]||o.options.colors[0]},d,t)).data=t.data,s.data&&(r.hasNavigatorData=!0,l.push(o.initSeries(s)))})),t&&this.addBaseSeriesEvents()},t.prototype.addBaseSeriesEvents=function(){var t=this,e=t.baseSeries||[];e[0]&&e[0].xAxis&&addEvent(e[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes),e.forEach(function(e){addEvent(e,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)}),addEvent(e,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)}),!1!==this.navigatorOptions.adaptToUpdatedData&&e.xAxis&&addEvent(e,"updatedData",this.updatedDataHandler),addEvent(e,"remove",function(){this.navigatorSeries&&(erase(t.series,this.navigatorSeries),defined(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)})},this)},t.prototype.getBaseSeriesMin=function(t){return this.baseSeries.reduce(function(t,e){return Math.min(t,e.xData?e.xData[0]:t)},t)},t.prototype.modifyNavigatorAxisExtremes=function(){var t,e=this.xAxis;void 0!==e.getExtremes&&(!(t=this.getUnionExtremes(!0))||t.dataMin===e.min&&t.dataMax===e.max||(e.min=t.dataMin,e.max=t.dataMax))},t.prototype.modifyBaseAxisExtremes=function(){var t,e,i=this.chart.navigator,s=this.getExtremes(),a=s.min,r=s.max,o=s.dataMin,n=s.dataMax,h=r-a,d=i.stickToMin,l=i.stickToMax,g=pick(this.options.overscroll,0),v=i.series&&i.series[0],c=!!this.setExtremes;this.eventArgs&&"rangeSelectorButton"===this.eventArgs.trigger||(d&&(t=(e=o)+h),l&&(t=n+g,d||(e=Math.max(o,t-h,i.getBaseSeriesMin(v&&v.xData?v.xData[0]:-Number.MAX_VALUE)))),c&&(d||l)&&isNumber(e)&&(this.min=this.userMin=e,this.max=this.userMax=t)),i.stickToMin=i.stickToMax=null},t.prototype.updatedDataHandler=function(){var t=this.chart.navigator,e=this.navigatorSeries,i=t.getBaseSeriesMin(this.xData[0]);t.stickToMax=t.reversedExtremes?0===Math.round(t.zoomedMin):Math.round(t.zoomedMax)>=Math.round(t.size),t.stickToMin=isNumber(this.xAxis.min)&&this.xAxis.min<=i&&(!this.chart.fixedRange||!t.stickToMax),e&&!t.hasNavigatorData&&(e.options.pointStart=this.xData[0],e.setData(this.options.data,!1,null,!1))},t.prototype.addChartEvents=function(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(addEvent(this.chart,"redraw",function(){var t=this.navigator,e=t&&(t.baseSeries&&t.baseSeries[0]&&t.baseSeries[0].xAxis||this.xAxis[0]);e&&t.render(e.min,e.max)}),addEvent(this.chart,"getMargins",function(){var t=this.navigator,e=t.opposite?"plotTop":"marginBottom";this.inverted&&(e=t.opposite?"marginRight":"plotLeft"),this[e]=(this[e]||0)+(t.navigatorEnabled||!this.inverted?t.outlineHeight:0)+t.navigatorOptions.margin}))},t.prototype.destroy=function(){this.removeEvents(),this.xAxis&&(erase(this.chart.xAxis,this.xAxis),erase(this.chart.axes,this.xAxis)),this.yAxis&&(erase(this.chart.yAxis,this.yAxis),erase(this.chart.axes,this.yAxis)),(this.series||[]).forEach(function(t){t.destroy&&t.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(function(t){this[t]&&this[t].destroy&&this[t].destroy(),this[t]=null},this),[this.handles].forEach(function(t){destroyObjectProperties(t)},this)},t}();H.Navigator||(H.Navigator=Navigator,NavigatorAxis.compose(Axis),addEvent(Chart,"beforeShowResetZoom",function(){var t=this.options,e=t.navigator,i=t.rangeSelector;if((e&&e.enabled||i&&i.enabled)&&(!isTouchDevice&&"x"===t.chart.zoomType||isTouchDevice&&"x"===t.chart.pinchType))return!1}),addEvent(Chart,"beforeRender",function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=this.navigator=new Navigator(this))}),addEvent(Chart,"afterSetChartSize",function(){var t,e,i,s,a=this.legend,r=this.navigator;r&&(e=a&&a.options,i=r.xAxis,s=r.yAxis,t=r.scrollbarHeight,this.inverted?(r.left=r.opposite?this.chartWidth-t-r.height:this.spacing[3]+t,r.top=this.plotTop+t):(r.left=this.plotLeft+t,r.top=r.navigatorOptions.top||this.chartHeight-r.height-t-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(e&&"bottom"===e.verticalAlign&&"proximate"!==e.layout&&e.enabled&&!e.floating?a.legendHeight+pick(e.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),i&&s&&(this.inverted?i.options.left=s.options.left=r.left:i.options.top=s.options.top=r.top,i.setAxisSize(),s.setAxisSize()))}),addEvent(Chart,"update",function(t){var e=t.options.navigator||{},i=t.options.scrollbar||{};this.navigator||this.scroller||!e.enabled&&!i.enabled||(merge(!0,this.options.navigator,e),merge(!0,this.options.scrollbar,i),delete t.options.navigator,delete t.options.scrollbar)}),addEvent(Chart,"afterUpdate",function(t){this.navigator||this.scroller||!this.options.navigator.enabled&&!this.options.scrollbar.enabled||(this.scroller=this.navigator=new Navigator(this),pick(t.redraw,!0)&&this.redraw(t.animation))}),addEvent(Chart,"afterAddSeries",function(){this.navigator&&this.navigator.setBaseSeries(null,!1)}),addEvent(LineSeries,"afterUpdate",function(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}),Chart.prototype.callbacks.push(function(t){var e,i=t.navigator;i&&t.xAxis[0]&&(e=t.xAxis[0].getExtremes(),i.render(e.min,e.max))})),H.Navigator=Navigator;export default H.Navigator;