"use strict";import Axis from"./Axis.js";import U from"../Utilities.js";var addEvent=U.addEvent,pick=U.pick,MapAxisAdditions=function(){return function(i){this.axis=i}}(),MapAxis=function(){function i(){}return i.compose=function(i){i.keepProps.push("mapAxis"),addEvent(i,"init",function(){this.mapAxis||(this.mapAxis=new MapAxisAdditions(this))}),addEvent(i,"getSeriesExtremes",function(){if(this.mapAxis){var i=[];this.isXAxis&&(this.series.forEach(function(t,s){t.useMapGeometry&&(i[s]=t.xData,t.xData=[])}),this.mapAxis.seriesXData=i)}}),addEvent(i,"afterGetSeriesExtremes",function(){if(this.mapAxis){var i,t,s,a=this.mapAxis.seriesXData||[];this.isXAxis&&(i=pick(this.dataMin,Number.MAX_VALUE),t=pick(this.dataMax,-Number.MAX_VALUE),this.series.forEach(function(n,e){n.useMapGeometry&&(i=Math.min(i,pick(n.minX,i)),t=Math.max(t,pick(n.maxX,t)),n.xData=a[e],s=!0)}),s&&(this.dataMin=i,this.dataMax=t),this.mapAxis.seriesXData=void 0)}}),addEvent(i,"afterSetAxisTranslation",function(){if(this.mapAxis){var i,t,s,a,n,e=this.chart,x=e.plotWidth/e.plotHeight,r=e.xAxis[0];"yAxis"===this.coll&&void 0!==r.transA&&this.series.forEach(function(i){i.preserveAspectRatio&&(n=!0)}),n&&(this.transA=r.transA=Math.min(this.transA,r.transA),i=((t=x/((r.max-r.min)/(this.max-this.min))<1?this:r).max-t.min)*t.transA,t.mapAxis.pixelPadding=t.len-i,t.minPixelPadding=t.mapAxis.pixelPadding/2,(s=t.mapAxis.fixTo)&&(a=s[1]-t.toValue(s[0],!0),a*=t.transA,(Math.abs(a)>t.minPixelPadding||t.min===t.dataMin&&t.max===t.dataMax)&&(a=0),t.minPixelPadding-=a))}}),addEvent(i,"render",function(){this.mapAxis&&(this.mapAxis.fixTo=void 0)})},i}();MapAxis.compose(Axis);export default MapAxis;