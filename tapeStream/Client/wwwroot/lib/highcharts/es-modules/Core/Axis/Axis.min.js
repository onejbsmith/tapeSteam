"use strict";import A from"../Animation/AnimationUtilities.js";var animObject=A.animObject;import Color from"../Color/Color.js";import H from"../Globals.js";import Tick from"./Tick.js";import U from"../Utilities.js";var addEvent=U.addEvent,arrayMax=U.arrayMax,arrayMin=U.arrayMin,clamp=U.clamp,correctFloat=U.correctFloat,defined=U.defined,destroyObjectProperties=U.destroyObjectProperties,error=U.error,extend=U.extend,fireEvent=U.fireEvent,format=U.format,getMagnitude=U.getMagnitude,isArray=U.isArray,isFunction=U.isFunction,isNumber=U.isNumber,isString=U.isString,merge=U.merge,normalizeTickInterval=U.normalizeTickInterval,objectEach=U.objectEach,pick=U.pick,relativeLength=U.relativeLength,removeEvent=U.removeEvent,splat=U.splat,syncTimeout=U.syncTimeout;import O from"../Options.js";var defaultOptions=O.defaultOptions,deg2rad=H.deg2rad,Axis=function(){function t(t,i){this.alternateBands=void 0,this.bottom=void 0,this.categories=void 0,this.chart=void 0,this.closestPointRange=void 0,this.coll=void 0,this.hasNames=void 0,this.hasVisibleSeries=void 0,this.height=void 0,this.isLinked=void 0,this.labelEdge=void 0,this.labelFormatter=void 0,this.left=void 0,this.len=void 0,this.max=void 0,this.maxLabelLength=void 0,this.min=void 0,this.minorTickInterval=void 0,this.minorTicks=void 0,this.minPixelPadding=void 0,this.names=void 0,this.offset=void 0,this.oldMax=void 0,this.oldMin=void 0,this.options=void 0,this.overlap=void 0,this.paddedTicks=void 0,this.plotLinesAndBands=void 0,this.plotLinesAndBandsGroups=void 0,this.pointRange=void 0,this.pointRangePadding=void 0,this.pos=void 0,this.positiveValuesOnly=void 0,this.right=void 0,this.series=void 0,this.side=void 0,this.tickAmount=void 0,this.tickInterval=void 0,this.tickmarkOffset=void 0,this.tickPositions=void 0,this.tickRotCorr=void 0,this.ticks=void 0,this.top=void 0,this.transA=void 0,this.transB=void 0,this.translationSlope=void 0,this.userOptions=void 0,this.visible=void 0,this.width=void 0,this.zoomEnabled=void 0,this.init(t,i)}return t.prototype.init=function(t,i){var e=i.isX,s=this;s.chart=t,s.horiz=t.inverted&&!s.isZAxis?!e:e,s.isXAxis=e,s.coll=s.coll||(e?"xAxis":"yAxis"),fireEvent(this,"init",{userOptions:i}),s.opposite=i.opposite,s.side=i.side||(s.horiz?s.opposite?0:2:s.opposite?1:3),s.setOptions(i);var n=this.options,a=n.type;s.labelFormatter=n.labels.formatter||s.defaultLabelFormatter,s.userOptions=i,s.minPixelPadding=0,s.reversed=n.reversed,s.visible=!1!==n.visible,s.zoomEnabled=!1!==n.zoomEnabled,s.hasNames="category"===a||!0===n.categories,s.categories=n.categories||s.hasNames,s.names||(s.names=[],s.names.keys={}),s.plotLinesAndBandsGroups={},s.positiveValuesOnly=!!s.logarithmic,s.isLinked=defined(n.linkedTo),s.ticks={},s.labelEdge=[],s.minorTicks={},s.plotLinesAndBands=[],s.alternateBands={},s.len=0,s.minRange=s.userMinRange=n.minRange||n.maxZoom,s.range=n.range,s.offset=n.offset||0,s.max=null,s.min=null,s.crosshair=pick(n.crosshair,splat(t.options.tooltip.crosshairs)[e?0:1],!1);var o=s.options.events;-1===t.axes.indexOf(s)&&(e?t.axes.splice(t.xAxis.length,0,s):t.axes.push(s),t[s.coll].push(s)),s.series=s.series||[],t.inverted&&!s.isZAxis&&e&&void 0===s.reversed&&(s.reversed=!0),s.labelRotation=s.options.labels.rotation,objectEach(o,function(t,i){isFunction(t)&&addEvent(s,i,t)}),fireEvent(this,"afterInit")},t.prototype.setOptions=function(i){this.options=merge(t.defaultOptions,"yAxis"===this.coll&&t.defaultYAxisOptions,[t.defaultTopAxisOptions,t.defaultRightAxisOptions,t.defaultBottomAxisOptions,t.defaultLeftAxisOptions][this.side],merge(defaultOptions[this.coll],i)),fireEvent(this,"afterSetOptions",{userOptions:i})},t.prototype.defaultLabelFormatter=function(){var t,i,e=this.axis,s=isNumber(this.value)?this.value:NaN,n=e.chart.time,a=e.categories,o=this.dateTimeLabelFormat,r=defaultOptions.lang,h=r.numericSymbols,l=r.numericSymbolMagnitude||1e3,c=h&&h.length,d=e.options.labels.format,m=e.logarithmic?Math.abs(s):e.tickInterval,p=this.chart,f=p.numberFormatter;if(d)i=format(d,this,p);else if(a)i=""+this.value;else if(o)i=n.dateFormat(o,s);else if(c&&m>=1e3)for(;c--&&void 0===i;)m>=(t=Math.pow(l,c+1))&&10*s%t==0&&null!==h[c]&&0!==s&&(i=f(s/t,-1)+h[c]);return void 0===i&&(i=Math.abs(s)>=1e4?f(s,-1):f(s,-1,void 0,"")),i},t.prototype.getSeriesExtremes=function(){var t,i=this,e=i.chart;fireEvent(this,"getSeriesExtremes",null,function(){i.hasVisibleSeries=!1,i.dataMin=i.dataMax=i.threshold=null,i.softThreshold=!i.isXAxis,i.stacking&&i.stacking.buildStacks(),i.series.forEach(function(s){if(s.visible||!e.options.chart.ignoreHiddenSeries){var n,a,o,r=s.options,h=r.threshold;if(i.hasVisibleSeries=!0,i.positiveValuesOnly&&h<=0&&(h=null),i.isXAxis){if((n=s.xData).length){n=i.logarithmic?n.filter(i.validatePositiveValue):n,a=(t=s.getXExtremes(n)).min,o=t.max,isNumber(a)||a instanceof Date||(n=n.filter(isNumber),a=(t=s.getXExtremes(n)).min,o=t.max),n.length&&(i.dataMin=Math.min(pick(i.dataMin,a),a),i.dataMax=Math.max(pick(i.dataMax,o),o))}}else{var l=s.applyExtremes();isNumber(l.dataMin)&&(a=l.dataMin,i.dataMin=Math.min(pick(i.dataMin,a),a)),isNumber(l.dataMax)&&(o=l.dataMax,i.dataMax=Math.max(pick(i.dataMax,o),o)),defined(h)&&(i.threshold=h),r.softThreshold&&!i.positiveValuesOnly||(i.softThreshold=!1)}}})}),fireEvent(this,"afterGetSeriesExtremes")},t.prototype.translate=function(t,i,e,s,n,a){var o=this.linkedParent||this,r=1,h=0,l=s?o.oldTransA:o.transA,c=s?o.oldMin:o.min,d=0,m=o.minPixelPadding,p=(o.isOrdinal||o.brokenAxis&&o.brokenAxis.hasBreaks||o.logarithmic&&n)&&o.lin2val;return l||(l=o.transA),e&&(r*=-1,h=o.len),o.reversed&&(h-=(r*=-1)*(o.sector||o.len)),i?(t=t*r+h,d=(t-=m)/l+c,p&&(d=o.lin2val(d))):(p&&(t=o.val2lin(t)),d=isNumber(c)?r*(t-c)*l+h+r*m+(isNumber(a)?l*a:0):void 0),d},t.prototype.toPixels=function(t,i){return this.translate(t,!1,!this.horiz,null,!0)+(i?0:this.pos)},t.prototype.toValue=function(t,i){return this.translate(t-(i?0:this.pos),!0,!this.horiz,null,!0)},t.prototype.getPlotLinePath=function(t){var i,e,s,n,a,o,r=this,h=r.chart,l=r.left,c=r.top,d=t.old,m=t.value,p=t.translatedValue,f=t.lineWidth,g=t.force,u=d&&h.oldChartHeight||h.chartHeight,x=d&&h.oldChartWidth||h.chartWidth,v=r.transB;function k(t,i,e){return("pass"!==g&&t<i||t>e)&&(g?t=clamp(t,i,e):a=!0),t}return o={value:m,lineWidth:f,old:d,force:g,acrossPanes:t.acrossPanes,translatedValue:p},fireEvent(this,"getPlotLinePath",o,function(t){p=pick(p,r.translate(m,null,null,d)),p=clamp(p,-1e5,1e5),i=s=Math.round(p+v),e=n=Math.round(u-p-v),isNumber(p)?r.horiz?(e=c,n=u-r.bottom,i=s=k(i,l,l+r.width)):(i=l,s=x-r.right,e=n=k(e,c,c+r.height)):(a=!0,g=!1),t.path=a&&!g?null:h.renderer.crispLine([["M",i,e],["L",s,n]],f||1)}),o.path},t.prototype.getLinearTickPositions=function(t,i,e){var s,n,a,o=correctFloat(Math.floor(i/t)*t),r=correctFloat(Math.ceil(e/t)*t),h=[];if(correctFloat(o+t)===o&&(a=20),this.single)return[i];for(s=o;s<=r&&(h.push(s),(s=correctFloat(s+t,a))!==n);)n=s;return h},t.prototype.getMinorTickInterval=function(){var t=this.options;return!0===t.minorTicks?pick(t.minorTickInterval,"auto"):!1===t.minorTicks?null:t.minorTickInterval},t.prototype.getMinorTickPositions=function(){var t,i=this.options,e=this.tickPositions,s=this.minorTickInterval,n=[],a=this.pointRangePadding||0,o=this.min-a,r=this.max+a,h=r-o;if(h&&h/s<this.len/3){var l=this.logarithmic;if(l)this.paddedTicks.forEach(function(t,i,e){i&&n.push.apply(n,l.getLogTickPositions(s,e[i-1],e[i],!0))});else if(this.dateTime&&"auto"===this.getMinorTickInterval())n=n.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(s),o,r,i.startOfWeek));else for(t=o+(e[0]-o)%s;t<=r&&t!==n[0];t+=s)n.push(t)}return 0!==n.length&&this.trimTicks(n),n},t.prototype.adjustForMinRange=function(){var t,i,e,s,n,a,o,r,h,l,c=this.options,d=this.min,m=this.max,p=this.logarithmic;this.isXAxis&&void 0===this.minRange&&!p&&(defined(c.min)||defined(c.max)?this.minRange=null:(this.series.forEach(function(t){for(a=t.xData,o=t.xIncrement?1:a.length-1,s=o;s>0;s--)n=a[s]-a[s-1],(void 0===e||n<e)&&(e=n)}),this.minRange=Math.min(5*e,this.dataMax-this.dataMin))),m-d<this.minRange&&(i=this.dataMax-this.dataMin>=this.minRange,r=[d-(t=((l=this.minRange)-m+d)/2),pick(c.min,d-t)],i&&(r[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),h=[(d=arrayMax(r))+l,pick(c.max,d+l)],i&&(h[2]=p?p.log2lin(this.dataMax):this.dataMax),(m=arrayMin(h))-d<l&&(r[0]=m-l,r[1]=pick(c.min,m-l),d=arrayMax(r))),this.min=d,this.max=m},t.prototype.getClosest=function(){var t;return this.categories?t=1:this.series.forEach(function(i){var e=i.closestPointRange,s=i.visible||!i.chart.options.chart.ignoreHiddenSeries;!i.noSharedTooltip&&defined(e)&&s&&(t=defined(t)?Math.min(t,e):e)}),t},t.prototype.nameToX=function(t){var i,e=isArray(this.categories),s=e?this.categories:this.names,n=t.options.x;return t.series.requireSorting=!1,defined(n)||(n=!1===this.options.uniqueNames?t.series.autoIncrement():e?s.indexOf(t.name):pick(s.keys[t.name],-1)),-1===n?e||(i=s.length):i=n,void 0!==i&&(this.names[i]=t.name,this.names.keys[t.name]=i),i},t.prototype.updateNames=function(){var t=this,i=this.names;i.length>0&&(Object.keys(i.keys).forEach(function(t){delete i.keys[t]}),i.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(function(i){i.xIncrement=null,i.points&&!i.isDirtyData||(t.max=Math.max(t.max,i.xData.length-1),i.processData(),i.generatePoints()),i.data.forEach(function(e,s){var n;e&&e.options&&void 0!==e.name&&void 0!==(n=t.nameToX(e))&&n!==e.x&&(e.x=n,i.xData[s]=n)})}))},t.prototype.setAxisTranslation=function(t){var i,e,s=this,n=s.max-s.min,a=s.axisPointRange||0,o=0,r=0,h=s.linkedParent,l=!!s.categories,c=s.transA,d=s.isXAxis;(d||l||a)&&(i=s.getClosest(),h?(o=h.minPointOffset,r=h.pointRangePadding):s.series.forEach(function(t){var e=l?1:d?pick(t.options.pointRange,i,0):s.axisPointRange||0,n=t.options.pointPlacement;if(a=Math.max(a,e),!s.single||l){var h=t.is("xrange")?!d:d;o=Math.max(o,h&&isString(n)?0:e/2),r=Math.max(r,h&&"on"===n?0:e)}}),e=s.ordinal&&s.ordinal.slope&&i?s.ordinal.slope/i:1,s.minPointOffset=o*=e,s.pointRangePadding=r*=e,s.pointRange=Math.min(a,s.single&&l?1:n),d&&(s.closestPointRange=i)),t&&(s.oldTransA=c),s.translationSlope=s.transA=c=s.staticScale||s.len/(n+r||1),s.transB=s.horiz?s.left:s.bottom,s.minPixelPadding=c*o,fireEvent(this,"afterSetAxisTranslation")},t.prototype.minFromRange=function(){return this.max-this.range},t.prototype.setTickInterval=function(t){var i,e,s,n,a,o,r,h=this,l=h.chart,c=h.logarithmic,d=h.options,m=h.isXAxis,p=h.isLinked,f=d.maxPadding,g=d.minPadding,u=d.tickInterval,x=d.tickPixelInterval,v=h.categories,k=isNumber(h.threshold)?h.threshold:null,M=h.softThreshold;h.dateTime||v||p||this.getTickAmount(),o=pick(h.userMin,d.min),r=pick(h.userMax,d.max),p?(h.linkedParent=l[h.coll][d.linkedTo],e=h.linkedParent.getExtremes(),h.min=pick(e.min,e.dataMin),h.max=pick(e.max,e.dataMax),d.type!==h.linkedParent.options.type&&error(11,1,l)):(M&&defined(k)&&(h.dataMin>=k?(n=k,g=0):h.dataMax<=k&&(a=k,f=0)),h.min=pick(o,n,h.dataMin),h.max=pick(r,a,h.dataMax)),c&&(h.positiveValuesOnly&&!t&&Math.min(h.min,pick(h.dataMin,h.min))<=0&&error(10,1,l),h.min=correctFloat(c.log2lin(h.min),16),h.max=correctFloat(c.log2lin(h.max),16)),h.range&&defined(h.max)&&(h.userMin=h.min=o=Math.max(h.dataMin,h.minFromRange()),h.userMax=r=h.max,h.range=null),fireEvent(h,"foundExtremes"),h.beforePadding&&h.beforePadding(),h.adjustForMinRange(),v||h.axisPointRange||h.stacking&&h.stacking.usePercentage||p||!defined(h.min)||!defined(h.max)||(i=h.max-h.min)&&(!defined(o)&&g&&(h.min-=i*g),!defined(r)&&f&&(h.max+=i*f)),isNumber(h.userMin)||(isNumber(d.softMin)&&d.softMin<h.min&&(h.min=o=d.softMin),isNumber(d.floor)&&(h.min=Math.max(h.min,d.floor))),isNumber(h.userMax)||(isNumber(d.softMax)&&d.softMax>h.max&&(h.max=r=d.softMax),isNumber(d.ceiling)&&(h.max=Math.min(h.max,d.ceiling))),M&&defined(h.dataMin)&&(k=k||0,!defined(o)&&h.min<k&&h.dataMin>=k?h.min=h.options.minRange?Math.min(k,h.max-h.minRange):k:!defined(r)&&h.max>k&&h.dataMax<=k&&(h.max=h.options.minRange?Math.max(k,h.min+h.minRange):k)),h.min===h.max||void 0===h.min||void 0===h.max?h.tickInterval=1:p&&!u&&x===h.linkedParent.options.tickPixelInterval?h.tickInterval=u=h.linkedParent.tickInterval:h.tickInterval=pick(u,this.tickAmount?(h.max-h.min)/Math.max(this.tickAmount-1,1):void 0,v?1:(h.max-h.min)*x/Math.max(h.len,x)),m&&!t&&h.series.forEach(function(t){t.processData(h.min!==h.oldMin||h.max!==h.oldMax)}),h.setAxisTranslation(!0),fireEvent(this,"initialAxisTranslation"),h.pointRange&&!u&&(h.tickInterval=Math.max(h.pointRange,h.tickInterval)),s=pick(d.minTickInterval,h.dateTime&&!h.series.some(function(t){return t.noSharedTooltip})?h.closestPointRange:0),!u&&h.tickInterval<s&&(h.tickInterval=s),h.dateTime||h.logarithmic||u||(h.tickInterval=normalizeTickInterval(h.tickInterval,void 0,getMagnitude(h.tickInterval),pick(d.allowDecimals,h.tickInterval<.5||void 0!==this.tickAmount),!!this.tickAmount)),this.tickAmount||(h.tickInterval=h.unsquish()),this.setTickPositions()},t.prototype.setTickPositions=function(){var t,i=this.options,e=i.tickPositions,s=this.getMinorTickInterval(),n=i.tickPositioner,a=this.hasVerticalPanning(),o="colorAxis"===this.coll,r=(o||!a)&&i.startOnTick,h=(o||!a)&&i.endOnTick;this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===s&&this.tickInterval?this.tickInterval/5:s,this.single=this.min===this.max&&defined(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==i.allowDecimals),this.tickPositions=t=e&&e.slice(),t||(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))?t=this.dateTime?this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,i.units),this.min,this.max,i.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0):this.logarithmic?this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max):(t=[this.min,this.max],error(19,!1,this.chart)),t.length>this.len&&(t=[t[0],t.pop()])[0]===t[1]&&(t.length=1),this.tickPositions=t,n&&(n=n.apply(this,[this.min,this.max]))&&(this.tickPositions=t=n)),this.paddedTicks=t.slice(0),this.trimTicks(t,r,h),this.isLinked||(this.single&&t.length<2&&!this.categories&&!this.series.some(function(t){return t.is("heatmap")&&"between"===t.options.pointPlacement})&&(this.min-=.5,this.max+=.5),e||n||this.adjustTickAmount()),fireEvent(this,"afterSetTickPositions")},t.prototype.trimTicks=function(t,i,e){var s=t[0],n=t[t.length-1],a=!this.isOrdinal&&this.minPointOffset||0;if(fireEvent(this,"trimTicks"),!this.isLinked){if(i&&s!==-1/0)this.min=s;else for(;this.min-a>t[0];)t.shift();if(e)this.max=n;else for(;this.max+a<t[t.length-1];)t.pop();0===t.length&&defined(s)&&!this.options.tickPositions&&t.push((n+s)/2)}},t.prototype.alignToOthers=function(){var t,i={},e=this.options;return!1===this.chart.options.chart.alignTicks||!1===e.alignTicks||!1===e.startOnTick||!1===e.endOnTick||this.logarithmic||this.chart[this.coll].forEach(function(e){var s=e.options,n=[e.horiz?s.left:s.top,s.width,s.height,s.pane].join(",");e.series.length&&(i[n]?t=!0:i[n]=1)}),t},t.prototype.getTickAmount=function(){var t=this.options,i=t.tickAmount,e=t.tickPixelInterval;!defined(t.tickInterval)&&!i&&this.len<e&&!this.isRadial&&!this.logarithmic&&t.startOnTick&&t.endOnTick&&(i=2),!i&&this.alignToOthers()&&(i=Math.ceil(this.len/e)+1),i<4&&(this.finalTickAmt=i,i=5),this.tickAmount=i},t.prototype.adjustTickAmount=function(){var t,i,e,s=this.options,n=this.tickInterval,a=this.tickPositions,o=this.tickAmount,r=this.finalTickAmt,h=a&&a.length,l=pick(this.threshold,this.softThreshold?0:null);if(this.hasData()){if(h<o){for(t=this.min;a.length<o;)a.length%2||t===l?a.push(correctFloat(a[a.length-1]+n)):a.unshift(correctFloat(a[0]-n));this.transA*=(h-1)/(o-1),this.min=s.startOnTick?a[0]:Math.min(this.min,a[0]),this.max=s.endOnTick?a[a.length-1]:Math.max(this.max,a[a.length-1])}else h>o&&(this.tickInterval*=2,this.setTickPositions());if(defined(r)){for(e=i=a.length;e--;)(3===r&&e%2==1||r<=2&&e>0&&e<i-1)&&a.splice(e,1);this.finalTickAmt=void 0}}},t.prototype.setScale=function(){var t,i=!1,e=!1;this.series.forEach(function(t){var s;i=i||t.isDirtyData||t.isDirty,e=e||(null===(s=t.xAxis)||void 0===s?void 0:s.isDirty)||!1}),this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),(t=this.len!==this.oldAxisLength)||i||e||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.stacking&&this.stacking.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=t||this.min!==this.oldMin||this.max!==this.oldMax)):this.stacking&&this.stacking.cleanStacks(),i&&this.panningState&&(this.panningState.isDirty=!0),fireEvent(this,"afterSetScale")},t.prototype.setExtremes=function(t,i,e,s,n){var a=this,o=a.chart;e=pick(e,!0),a.series.forEach(function(t){delete t.kdTree}),n=extend(n,{min:t,max:i}),fireEvent(a,"setExtremes",n,function(){a.userMin=t,a.userMax=i,a.eventArgs=n,e&&o.redraw(s)})},t.prototype.zoom=function(t,i){var e=this,s=this.dataMin,n=this.dataMax,a=this.options,o=Math.min(s,pick(a.min,s)),r=Math.max(n,pick(a.max,n)),h={newMin:t,newMax:i};return fireEvent(this,"zoom",h,function(t){var i=t.newMin,a=t.newMax;i===e.min&&a===e.max||(e.allowZoomOutside||(defined(s)&&(i<o&&(i=o),i>r&&(i=r)),defined(n)&&(a<o&&(a=o),a>r&&(a=r))),e.displayBtn=void 0!==i||void 0!==a,e.setExtremes(i,a,!1,void 0,{trigger:"zoom"})),t.zoomed=!0}),h.zoomed},t.prototype.setAxisSize=function(){var t=this.chart,i=this.options,e=i.offsets||[0,0,0,0],s=this.horiz,n=this.width=Math.round(relativeLength(pick(i.width,t.plotWidth-e[3]+e[1]),t.plotWidth)),a=this.height=Math.round(relativeLength(pick(i.height,t.plotHeight-e[0]+e[2]),t.plotHeight)),o=this.top=Math.round(relativeLength(pick(i.top,t.plotTop+e[0]),t.plotHeight,t.plotTop)),r=this.left=Math.round(relativeLength(pick(i.left,t.plotLeft+e[3]),t.plotWidth,t.plotLeft));this.bottom=t.chartHeight-a-o,this.right=t.chartWidth-n-r,this.len=Math.max(s?n:a,0),this.pos=s?r:o},t.prototype.getExtremes=function(){var t=this.logarithmic;return{min:t?correctFloat(t.lin2log(this.min)):this.min,max:t?correctFloat(t.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},t.prototype.getThreshold=function(t){var i=this.logarithmic,e=i?i.lin2log(this.min):this.min,s=i?i.lin2log(this.max):this.max;return null===t||t===-1/0?t=e:t===1/0?t=s:e>t?t=e:s<t&&(t=s),this.translate(t,0,1,0,1)},t.prototype.autoLabelAlign=function(t){var i=(pick(t,0)-90*this.side+720)%360,e={align:"center"};return fireEvent(this,"autoLabelAlign",e,function(t){i>15&&i<165?t.align="right":i>195&&i<345&&(t.align="left")}),e.align},t.prototype.tickSize=function(t){var i,e,s=this.options,n=s["tick"===t?"tickLength":"minorTickLength"],a=pick(s["tick"===t?"tickWidth":"minorTickWidth"],"tick"===t&&this.isXAxis&&!this.categories?1:0);return a&&n&&("inside"===s[t+"Position"]&&(n=-n),e=[n,a]),fireEvent(this,"afterTickSize",i={tickSize:e}),i.tickSize},t.prototype.labelMetrics=function(){var t=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[t]&&this.ticks[t].label)},t.prototype.unsquish=function(){var t,i,e,s=this.options.labels,n=this.horiz,a=this.tickInterval,o=a,r=this.len/(((this.categories?1:0)+this.max-this.min)/a),h=s.rotation,l=this.labelMetrics(),c=Number.MAX_VALUE,d=this.max-this.min,m=function(t){var i=t/(r||1);return(i=i>1?Math.ceil(i):1)*a>d&&t!==1/0&&r!==1/0&&d&&(i=Math.ceil(d/a)),correctFloat(i*a)};return n?(e=!s.staggerLines&&!s.step&&(defined(h)?[h]:r<pick(s.autoRotationLimit,80)&&s.autoRotation))&&e.forEach(function(e){var s;(e===h||e&&e>=-90&&e<=90)&&(s=(i=m(Math.abs(l.h/Math.sin(deg2rad*e))))+Math.abs(e/360))<c&&(c=s,t=e,o=i)}):s.step||(o=m(l.h)),this.autoRotation=e,this.labelRotation=pick(t,h),o},t.prototype.getSlotWidth=function(t){var i,e=this.chart,s=this.horiz,n=this.options.labels,a=Math.max(this.tickPositions.length-(this.categories?0:1),1),o=e.margin[3];if(t&&isNumber(t.slotWidth))return t.slotWidth;if(s&&n&&(n.step||0)<2)return n.rotation?0:(this.staggerLines||1)*this.len/a;if(!s){var r=null===(i=null==n?void 0:n.style)||void 0===i?void 0:i.width;if(void 0!==r)return parseInt(r,10);if(o)return o-e.spacing[3]}return.33*e.chartWidth},t.prototype.renderUnsquish=function(){var t,i,e,s,n,a=this.chart,o=a.renderer,r=this.tickPositions,h=this.ticks,l=this.options.labels,c=l&&l.style||{},d=this.horiz,m=this.getSlotWidth(),p=Math.max(1,Math.round(m-2*(l.padding||5))),f={},g=this.labelMetrics(),u=l.style&&l.style.textOverflow,x=0;if(isString(l.rotation)||(f.rotation=l.rotation||0),r.forEach(function(t){(t=h[t]).movedLabel&&t.replaceMovedLabel(),t&&t.label&&t.label.textPxLength>x&&(x=t.label.textPxLength)}),this.maxLabelLength=x,this.autoRotation)x>p&&x>g.h?f.rotation=this.labelRotation:this.labelRotation=0;else if(m&&(t=p,!u))for(i="clip",s=r.length;!d&&s--;)n=r[s],(e=h[n].label)&&(e.styles&&"ellipsis"===e.styles.textOverflow?e.css({textOverflow:"clip"}):e.textPxLength>m&&e.css({width:m+"px"}),e.getBBox().height>this.len/r.length-(g.h-g.f)&&(e.specificTextOverflow="ellipsis"));f.rotation&&(t=x>.5*a.chartHeight?.33*a.chartHeight:x,u||(i="ellipsis")),this.labelAlign=l.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(f.align=this.labelAlign),r.forEach(function(e){var s=h[e],n=s&&s.label,a=c.width,o={};n&&(n.attr(f),s.shortenLabel?s.shortenLabel():t&&!a&&"nowrap"!==c.whiteSpace&&(t<n.textPxLength||"SPAN"===n.element.tagName)?(o.width=t+"px",u||(o.textOverflow=n.specificTextOverflow||i),n.css(o)):n.styles&&n.styles.width&&!o.width&&!a&&n.css({width:null}),delete n.specificTextOverflow,s.rotation=f.rotation)},this),this.tickRotCorr=o.rotCorr(g.b,this.labelRotation||0,0!==this.side)},t.prototype.hasData=function(){return this.series.some(function(t){return t.hasData()})||this.options.showEmpty&&defined(this.min)&&defined(this.max)},t.prototype.addTitle=function(t){var i,e=this.chart.renderer,s=this.horiz,n=this.opposite,a=this.options.title,o=this.chart.styledMode;this.axisTitle||((i=a.textAlign)||(i=(s?{low:"left",middle:"center",high:"right"}:{low:n?"right":"left",middle:"center",high:n?"left":"right"})[a.align]),this.axisTitle=e.text(a.text,0,0,a.useHTML).attr({zIndex:7,rotation:a.rotation||0,align:i}).addClass("highcharts-axis-title"),o||this.axisTitle.css(merge(a.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),o||a.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[t?"show":"hide"](t)},t.prototype.generateTick=function(t){var i=this.ticks;i[t]?i[t].addLabel():i[t]=new Tick(this,t)},t.prototype.getOffset=function(){var t,i,e,s,n,a,o=this,r=o.chart,h=r.renderer,l=o.options,c=o.tickPositions,d=o.ticks,m=o.horiz,p=o.side,f=r.inverted&&!o.isZAxis?[1,0,3,2][p]:p,g=0,u=0,x=l.title,v=l.labels,k=0,M=r.axisOffset,b=r.clipOffset,y=[-1,1,1,-1][p],T=l.className,P=o.axisParent;t=o.hasData(),o.showAxis=i=t||pick(l.showEmpty,!0),o.staggerLines=o.horiz&&v.staggerLines,o.axisGroup||(o.gridGroup=h.g("grid").attr({zIndex:l.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(T||"")).add(P),o.axisGroup=h.g("axis").attr({zIndex:l.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(T||"")).add(P),o.labelGroup=h.g("axis-labels").attr({zIndex:v.zIndex||7}).addClass("highcharts-"+o.coll.toLowerCase()+"-labels "+(T||"")).add(P)),t||o.isLinked?(c.forEach(function(t,i){o.generateTick(t,i)}),o.renderUnsquish(),o.reserveSpaceDefault=0===p||2===p||{1:"left",3:"right"}[p]===o.labelAlign,pick(v.reserveSpace,"center"===o.labelAlign||null,o.reserveSpaceDefault)&&c.forEach(function(t){k=Math.max(d[t].getLabelSize(),k)}),o.staggerLines&&(k*=o.staggerLines),o.labelOffset=k*(o.opposite?-1:1)):objectEach(d,function(t,i){t.destroy(),delete d[i]}),x&&x.text&&!1!==x.enabled&&(o.addTitle(i),i&&!1!==x.reserveSpace&&(o.titleOffset=g=o.axisTitle.getBBox()[m?"height":"width"],e=x.offset,u=defined(e)?0:pick(x.margin,m?5:10))),o.renderLine(),o.offset=y*pick(l.offset,M[p]?M[p]+(l.margin||0):0),o.tickRotCorr=o.tickRotCorr||{x:0,y:0},a=0===p?-o.labelMetrics().h:2===p?o.tickRotCorr.y:0,s=Math.abs(k)+u,k&&(s-=a,s+=y*(m?pick(v.y,o.tickRotCorr.y+8*y):v.x)),o.axisTitleMargin=pick(e,s),o.getMaxLabelDimensions&&(o.maxLabelDimensions=o.getMaxLabelDimensions(d,c));var A=this.tickSize("tick");M[p]=Math.max(M[p],o.axisTitleMargin+g+y*o.offset,s,c&&c.length&&A?A[0]+y*o.offset:0),n=l.offset?0:2*Math.floor(o.axisLine.strokeWidth()/2),b[f]=Math.max(b[f],n),fireEvent(this,"afterGetOffset")},t.prototype.getLinePath=function(t){var i=this.chart,e=this.opposite,s=this.offset,n=this.horiz,a=this.left+(e?this.width:0)+s,o=i.chartHeight-this.bottom-(e?this.height:0)+s;return e&&(t*=-1),i.renderer.crispLine([["M",n?this.left:a,n?o:this.top],["L",n?i.chartWidth-this.right:a,n?o:i.chartHeight-this.bottom]],t)},t.prototype.renderLine=function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},t.prototype.getTitlePosition=function(){var t=this.horiz,i=this.left,e=this.top,s=this.len,n=this.options.title,a=t?i:e,o=this.opposite,r=this.offset,h=n.x||0,l=n.y||0,c=this.axisTitle,d=this.chart.renderer.fontMetrics(n.style&&n.style.fontSize,c),m=Math.max(c.getBBox(null,0).height-d.h-1,0),p={low:a+(t?0:s),middle:a+s/2,high:a+(t?s:0)}[n.align],f=(t?e+this.height:i)+(t?1:-1)*(o?-1:1)*this.axisTitleMargin+[-m,m,d.f,-m][this.side],g={x:t?p+h:f+(o?this.width:0)+r+h,y:t?f+l-(o?this.height:0)+r:p+l};return fireEvent(this,"afterGetTitlePosition",{titlePosition:g}),g},t.prototype.renderMinorTick=function(t){var i=this.chart.hasRendered&&isNumber(this.oldMin),e=this.minorTicks;e[t]||(e[t]=new Tick(this,t,"minor")),i&&e[t].isNew&&e[t].render(null,!0),e[t].render(null,!1,1)},t.prototype.renderTick=function(t,i){var e,s=this.isLinked,n=this.ticks,a=this.chart.hasRendered&&isNumber(this.oldMin);(!s||t>=this.min&&t<=this.max||(null===(e=this.grid)||void 0===e?void 0:e.isColumn))&&(n[t]||(n[t]=new Tick(this,t)),a&&n[t].isNew&&n[t].render(i,!0,-1),n[t].render(i))},t.prototype.render=function(){var t,i,e=this,s=e.chart,n=e.logarithmic,a=s.renderer,o=e.options,r=e.isLinked,h=e.tickPositions,l=e.axisTitle,c=e.ticks,d=e.minorTicks,m=e.alternateBands,p=o.stackLabels,f=o.alternateGridColor,g=e.tickmarkOffset,u=e.axisLine,x=e.showAxis,v=animObject(a.globalAnimation);if(e.labelEdge.length=0,e.overlap=!1,[c,d,m].forEach(function(t){objectEach(t,function(t){t.isActive=!1})}),(e.hasData()||r)&&(e.minorTickInterval&&!e.categories&&e.getMinorTickPositions().forEach(function(t){e.renderMinorTick(t)}),h.length&&(h.forEach(function(t,i){e.renderTick(t,i)}),g&&(0===e.min||e.single)&&(c[-1]||(c[-1]=new Tick(e,-1,null,!0)),c[-1].render(-1))),f&&h.forEach(function(a,o){i=void 0!==h[o+1]?h[o+1]+g:e.max-g,o%2==0&&a<e.max&&i<=e.max+(s.polar?-g:g)&&(m[a]||(m[a]=new H.PlotLineOrBand(e)),t=a+g,m[a].options={from:n?n.lin2log(t):t,to:n?n.lin2log(i):i,color:f,className:"highcharts-alternate-grid"},m[a].render(),m[a].isActive=!0)}),e._addedPlotLB||((o.plotLines||[]).concat(o.plotBands||[]).forEach(function(t){e.addPlotBandOrLine(t)}),e._addedPlotLB=!0)),[c,d,m].forEach(function(t){var i,e=[],n=v.duration;objectEach(t,function(t,i){t.isActive||(t.render(i,!1,0),t.isActive=!1,e.push(i))}),syncTimeout(function(){for(i=e.length;i--;)t[e[i]]&&!t[e[i]].isActive&&(t[e[i]].destroy(),delete t[e[i]])},t!==m&&s.hasRendered&&n?n:0)}),u&&(u[u.isPlaced?"animate":"attr"]({d:this.getLinePath(u.strokeWidth())}),u.isPlaced=!0,u[x?"show":"hide"](x)),l&&x){var k=e.getTitlePosition();isNumber(k.y)?(l[l.isNew?"attr":"animate"](k),l.isNew=!1):(l.attr("y",-9999),l.isNew=!0)}p&&p.enabled&&e.stacking&&e.stacking.renderStackTotals(),e.isDirty=!1,fireEvent(this,"afterRender")},t.prototype.redraw=function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(t){t.render()})),this.series.forEach(function(t){t.isDirty=!0})},t.prototype.getKeepProps=function(){return this.keepProps||t.keepProps},t.prototype.destroy=function(t){var i,e,s=this,n=s.plotLinesAndBands;if(fireEvent(this,"destroy",{keepEvents:t}),t||removeEvent(s),[s.ticks,s.minorTicks,s.alternateBands].forEach(function(t){destroyObjectProperties(t)}),n)for(e=n.length;e--;)n[e].destroy();for(i in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(t){s[t]&&(s[t]=s[t].destroy())}),s.plotLinesAndBandsGroups)s.plotLinesAndBandsGroups[i]=s.plotLinesAndBandsGroups[i].destroy();objectEach(s,function(t,i){-1===s.getKeepProps().indexOf(i)&&delete s[i]})},t.prototype.drawCrosshair=function(t,i){var e,s,n,a,o=this.crosshair,r=pick(o.snap,!0),h=this.cross,l=this.chart;if(fireEvent(this,"drawCrosshair",{e:t,point:i}),t||(t=this.cross&&this.cross.e),this.crosshair&&!1!==(defined(i)||!r)){if(r?defined(i)&&(s=pick("colorAxis"!==this.coll?i.crosshairPos:null,this.isXAxis?i.plotX:this.len-i.plotY)):s=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),defined(s)&&(a={value:i&&(this.isXAxis?i.x:pick(i.stackY,i.y)),translatedValue:s},l.polar&&extend(a,{isCrosshair:!0,chartX:t&&t.chartX,chartY:t&&t.chartY,point:i}),e=this.getPlotLinePath(a)||null),!defined(e))return void this.hideCrosshair();n=this.categories&&!this.isRadial,h||(this.cross=h=l.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(n?"category ":"thin ")+o.className).attr({zIndex:pick(o.zIndex,2)}).add(),l.styledMode||(h.attr({stroke:o.color||(n?Color.parse("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":pick(o.width,1)}).css({"pointer-events":"none"}),o.dashStyle&&h.attr({dashstyle:o.dashStyle}))),h.show().attr({d:e}),n&&!o.width&&h.attr({"stroke-width":this.transA}),this.cross.e=t}else this.hideCrosshair();fireEvent(this,"afterDrawCrosshair",{e:t,point:i})},t.prototype.hideCrosshair=function(){this.cross&&this.cross.hide(),fireEvent(this,"afterHideCrosshair")},t.prototype.hasVerticalPanning=function(){var t,i;return/y/.test((null===(i=null===(t=this.chart.options.chart)||void 0===t?void 0:t.panning)||void 0===i?void 0:i.type)||"")},t.prototype.validatePositiveValue=function(t){return isNumber(t)&&t>0},t.defaultOptions={dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e. %b"},week:{main:"%e. %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,labels:{enabled:!0,indentation:10,x:0,style:{color:"#666666",cursor:"default",fontSize:"11px"}},maxPadding:.01,minorTickLength:2,minorTickPosition:"outside",minPadding:.01,showEmpty:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},t.defaultYAxisOptions={endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){return(0,this.axis.chart.numberFormatter)(this.total,-1)},style:{color:"#000000",fontSize:"11px",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},t.defaultLeftAxisOptions={labels:{x:-15},title:{rotation:270}},t.defaultRightAxisOptions={labels:{x:15},title:{rotation:90}},t.defaultBottomAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},t.defaultTopAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},t.keepProps=["extKey","hcEvents","names","series","userMax","userMin"],t}();H.Axis=Axis;export default H.Axis;