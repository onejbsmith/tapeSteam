"use strict";import Axis from"./Axis.js";import U from"../Utilities.js";var addEvent=U.addEvent,getMagnitude=U.getMagnitude,normalizeTickInterval=U.normalizeTickInterval,pick=U.pick,LogarithmicAxisAdditions=function(){function i(i){this.axis=i}return i.prototype.getLogTickPositions=function(i,t,o,n){var l=this.axis,r=l.len,e=l.options,s=[];if(n||(this.minorAutoInterval=void 0),i>=.5)i=Math.round(i),s=l.getLinearTickPositions(i,t,o);else if(i>=.08){var a,g,h,c,u,p,v;for(a=i>.3?[1,2,4]:i>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],g=Math.floor(t);g<o+1&&!v;g++)for(c=a.length,h=0;h<c&&!v;h++)(u=this.log2lin(this.lin2log(g)*a[h]))>t&&(!n||p<=o)&&void 0!==p&&s.push(p),p>o&&(v=!0),p=u}else{var d=this.lin2log(t),m=this.lin2log(o),f=n?l.getMinorTickInterval():e.tickInterval,k="auto"===f?null:f,A=e.tickPixelInterval/(n?5:1),x=n?r/l.tickPositions.length:r;i=pick(k,this.minorAutoInterval,(m-d)*A/(x||1)),i=normalizeTickInterval(i,void 0,getMagnitude(i)),s=l.getLinearTickPositions(i,d,m).map(this.log2lin),n||(this.minorAutoInterval=i/5)}return n||(l.tickInterval=i),s},i.prototype.lin2log=function(i){return Math.pow(10,i)},i.prototype.log2lin=function(i){return Math.log(i)/Math.LN10},i}(),LogarithmicAxis=function(){function i(){}return i.compose=function(i){i.keepProps.push("logarithmic");var t=i.prototype,o=LogarithmicAxisAdditions.prototype;t.log2lin=o.log2lin,t.lin2log=o.lin2log,addEvent(i,"init",function(i){var t=i.userOptions,o=this.logarithmic;"logarithmic"!==t.type?this.logarithmic=void 0:(o||(o=this.logarithmic=new LogarithmicAxisAdditions(this)),this.log2lin!==o.log2lin&&(o.log2lin=this.log2lin.bind(this)),this.lin2log!==o.lin2log&&(o.lin2log=this.lin2log.bind(this)))}),addEvent(i,"afterInit",function(){var i=this.logarithmic;i&&(this.lin2val=function(t){return i.lin2log(t)},this.val2lin=function(t){return i.log2lin(t)})})},i}();LogarithmicAxis.compose(Axis);export default LogarithmicAxis;