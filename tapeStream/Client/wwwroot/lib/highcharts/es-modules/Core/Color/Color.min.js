import H from"../Globals.js";import U from"../Utilities.js";var isNumber=U.isNumber,merge=U.merge,pInt=U.pInt,Color=function(){function t(r){return this.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),1]}}],this.rgba=[],H.Color!==t?new H.Color(r):this instanceof t?void this.init(r):new t(r)}return t.parse=function(r){return new t(r)},t.prototype.init=function(r){var s,o,e,n,i;if(this.input=r=t.names[r&&r.toLowerCase?r.toLowerCase():""]||r,r&&r.stops)this.stops=r.stops.map(function(r){return new t(r[1])});else if(r&&r.charAt&&"#"===r.charAt()&&(i=r.length,r=parseInt(r.substr(1),16),7===i?o=[(16711680&r)>>16,(65280&r)>>8,255&r,1]:4===i&&(o=[(3840&r)>>4|(3840&r)>>8,(240&r)>>4|240&r,(15&r)<<4|15&r,1])),!o)for(e=this.parsers.length;e--&&!o;)(s=(n=this.parsers[e]).regex.exec(r))&&(o=n.parse(s));this.rgba=o||[]},t.prototype.get=function(t){var r,s=this.input,o=this.rgba;return void 0!==this.stops?((r=merge(s)).stops=[].concat(r.stops),this.stops.forEach(function(s,o){r.stops[o]=[r.stops[o][0],s.get(t)]})):r=o&&isNumber(o[0])?"rgb"===t||!t&&1===o[3]?"rgb("+o[0]+","+o[1]+","+o[2]+")":"a"===t?o[3]:"rgba("+o.join(",")+")":s,r},t.prototype.brighten=function(t){var r,s=this.rgba;if(this.stops)this.stops.forEach(function(r){r.brighten(t)});else if(isNumber(t)&&0!==t)for(r=0;r<3;r++)s[r]+=pInt(255*t),s[r]<0&&(s[r]=0),s[r]>255&&(s[r]=255);return this},t.prototype.setOpacity=function(t){return this.rgba[3]=t,this},t.prototype.tweenTo=function(t,r){var s,o=this.rgba,e=t.rgba;return e.length&&o&&o.length?((s=1!==e[3]||1!==o[3])?"rgba(":"rgb(")+Math.round(e[0]+(o[0]-e[0])*(1-r))+","+Math.round(e[1]+(o[1]-e[1])*(1-r))+","+Math.round(e[2]+(o[2]-e[2])*(1-r))+(s?","+(e[3]+(o[3]-e[3])*(1-r)):"")+")":t.input||"none"},t.names={white:"#ffffff",black:"#000000"},t}();H.Color=Color,H.color=Color.parse;export default Color;