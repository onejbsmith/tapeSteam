import H from"../Globals.js";import Point from"./Point.js";import U from"../Utilities.js";var error=U.error,extendClass=U.extendClass,fireEvent=U.fireEvent,getOptions=U.getOptions,isObject=U.isObject,merge=U.merge,objectEach=U.objectEach,BaseSeries=function(){function e(t,s){var r=merge(e.defaultOptions,s);this.chart=t,this._i=t.series.length,t.series.push(this),this.options=r,this.userOptions=merge(s)}return e.addSeries=function(t,s){e.seriesTypes[t]=s},e.cleanRecursively=function(t,s){var r={};return objectEach(t,function(i,n){var o;isObject(t[n],!0)&&!t.nodeType&&s[n]?(o=e.cleanRecursively(t[n],s[n]),Object.keys(o).length&&(r[n]=o)):(isObject(t[n])||t[n]!==s[n])&&(r[n]=t[n])}),r},e.getSeries=function(t,s){void 0===s&&(s={});var r=t.options.chart,i=s.type||r.type||r.defaultSeriesType||"",n=e.seriesTypes[i];return n||error(17,!0,t,{missingModuleFor:i}),new n(t,s)},e.seriesType=function(t,s,r,i,n){var o=getOptions().plotOptions||{},p=e.seriesTypes;return s=s||"",o[t]=merge(o[s],r),e.addSeries(t,extendClass(p[s]||function(){},i)),p[t].prototype.type=t,n&&(p[t].prototype.pointClass=extendClass(Point,n)),p[t]},e.prototype.update=function(t,s){void 0===s&&(s=!0);var r=this,i=(t=e.cleanRecursively(t,this.userOptions)).type;return void 0!==i&&i!==r.type&&(r=e.getSeries(r.chart,t)),fireEvent(r,"update",{newOptions:t}),r.userOptions=merge(t),fireEvent(r,"afterUpdate",{newOptions:t}),s&&r.chart.redraw(),r},e.defaultOptions={type:"base"},e.seriesTypes={},e}();BaseSeries.prototype.pointClass=Point,H.seriesType=BaseSeries.seriesType,H.seriesTypes=BaseSeries.seriesTypes;export default BaseSeries;