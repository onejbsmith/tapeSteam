"use strict";var __extends=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();import H from"./Globals.js";var charts=H.charts,doc=H.doc,noop=H.noop,win=H.win;import Pointer from"./Pointer.js";import U from"./Utilities.js";var addEvent=U.addEvent,css=U.css,objectEach=U.objectEach,removeEvent=U.removeEvent,touches={},hasPointerEvent=!!win.PointerEvent;function getWebkitTouches(){var t=[];return t.item=function(t){return this[t]},objectEach(touches,function(o){t.push({pageX:o.pageX,pageY:o.pageY,target:o.target})}),t}function translateMSPointer(t,o,e,n){"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!charts[H.hoverChartIndex]||(n(t),charts[H.hoverChartIndex].pointer[o]({type:e,target:t.currentTarget,preventDefault:noop,touches:getWebkitTouches()}))}var MSPointer=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.batchMSEvents=function(t){t(this.chart.container,hasPointerEvent?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,hasPointerEvent?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(doc,hasPointerEvent?"pointerup":"MSPointerUp",this.onDocumentPointerUp)},o.prototype.destroy=function(){this.batchMSEvents(removeEvent),t.prototype.destroy.call(this)},o.prototype.init=function(o,e){t.prototype.init.call(this,o,e),this.hasZoom&&css(o.container,{"-ms-touch-action":"none","touch-action":"none"})},o.prototype.onContainerPointerDown=function(t){translateMSPointer(t,"onContainerTouchStart","touchstart",function(t){touches[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},o.prototype.onContainerPointerMove=function(t){translateMSPointer(t,"onContainerTouchMove","touchmove",function(t){touches[t.pointerId]={pageX:t.pageX,pageY:t.pageY},touches[t.pointerId].target||(touches[t.pointerId].target=t.currentTarget)})},o.prototype.onDocumentPointerUp=function(t){translateMSPointer(t,"onDocumentTouchEnd","touchend",function(t){delete touches[t.pointerId]})},o.prototype.setDOMEvents=function(){t.prototype.setDOMEvents.call(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(addEvent)},o}(Pointer);export default MSPointer;