import BaseSeries from"../../Core/Series/Series.js";import U from"../../Core/Utilities.js";var error=U.error,isArray=U.isArray;BaseSeries.seriesType("vwap","sma",{params:{period:30,volumeSeriesID:"volume"}},{getValues:function(e,r){var a,s=e.chart,i=e.xData,t=e.yData,o=r.period,u=!0;if(a=s.get(r.volumeSeriesID))return isArray(t[0])||(u=!1),this.calculateVWAPValues(u,i,t,a,o);error("Series "+r.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,s)},calculateVWAPValues:function(e,r,a,s,i){var t,o,u,l,p,m,h=s.yData,n=s.xData.length,v=r.length,D=[],S=[],c=[],f=[],y=[];for(t=v<=n?v:n,p=0,m=0;p<t;p++)o=e?(a[p][1]+a[p][2]+a[p][3])/3:a[p],o*=h[p],u=m?D[p-1]+o:o,l=m?S[p-1]+h[p]:h[p],D.push(u),S.push(l),y.push([r[p],u/l]),c.push(y[p][0]),f.push(y[p][1]),++m===i&&(m=0);return{values:y,xData:c,yData:f}}});