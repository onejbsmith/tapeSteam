import BaseSeries from"../../Core/Series/Series.js";import U from"../../Core/Utilities.js";var isArray=U.isArray;function sumArray(r){return r.reduce(function(r,e){return r+e},0)}function meanDeviation(r,e){var a,s=r.length,i=0;for(a=0;a<s;a++)i+=Math.abs(e-r[a]);return i}BaseSeries.seriesType("cci","sma",{params:{period:14}},{getValues:function(r,e){var a,s,i,t,n,u,o=e.period,p=r.xData,f=r.yData,h=f?f.length:0,m=[],c=[],l=1,y=[],v=[],D=[];if(!(p.length<=o)&&isArray(f[0])&&4===f[0].length){for(;l<o;)s=f[l-1],m.push((s[1]+s[2]+s[3])/3),l++;for(u=o;u<=h;u++)n=((s=f[u-1])[1]+s[2]+s[3])/3,i=m.push(n),a=(n-(t=sumArray(c=m.slice(i-o))/o))/(.015*(meanDeviation(c,t)/o)),y.push([p[u-1],a]),v.push(p[u-1]),D.push(a);return{values:y,xData:v,yData:D}}}});