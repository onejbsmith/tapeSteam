import BaseSeries from"../../Core/Series/Series.js";import U from"../../Core/Utilities.js";var correctFloat=U.correctFloat,pick=U.pick;function accumulatePoints(e,a,r,t,o){var i=pick(a[r][t],a[r]);return correctFloat(o?e-i:e+i)}BaseSeries.seriesType("dpo","sma",{params:{period:21}},{nameBase:"DPO",getValues:function(e,a){var r,t,o,i,s=a.period,c=a.index,u=s+Math.floor(s/2+1),n=e.xData||[],p=e.yData||[],l=p.length,m=[],f=[],h=[],D=0;if(!(n.length<=u)){for(o=0;o<s-1;o++)D=accumulatePoints(D,p,o,c);for(i=0;i<=l-u;i++)t=i+u-1,D=accumulatePoints(D,p,i+s-1,c),r=pick(p[t][c],p[t])-D/s,D=accumulatePoints(D,p,i,c,!0),m.push([n[t],r]),f.push(n[t]),h.push(r);return{values:m,xData:f,yData:h}}}});