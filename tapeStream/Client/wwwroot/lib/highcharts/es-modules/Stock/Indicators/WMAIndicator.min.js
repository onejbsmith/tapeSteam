import BaseSeries from"../../Core/Series/Series.js";import U from"../../Core/Utilities.js";var isArray=U.isArray;function accumulateAverage(e,r,a,u,t){var i=r[u],s=t<0?a[u]:a[u][t];e.push([i,s])}function weightedSumArray(e,r){var a=(r+1)/2*r;return e.reduce(function(e,r,a){return[null,e[1]+r[1]*(a+1)]})[1]/a}function populateAverage(e,r,a,u){var t=weightedSumArray(e,e.length),i=r[u-1];return e.shift(),[i,t]}BaseSeries.seriesType("wma","sma",{params:{index:3,period:9}},{getValues:function(e,r){var a,u,t,i=r.period,s=e.xData,n=e.yData,p=n?n.length:0,o=1,l=s[0],h=n[0],c=[],g=[],m=[],v=-1;if(!(s.length<i)){for(isArray(n[0])&&(v=r.index,h=n[0][v]),u=[[l,h]];o!==i;)accumulateAverage(u,s,n,o,v),o++;for(a=o;a<p;a++)t=populateAverage(u,s,n,a),c.push(t),g.push(t[0]),m.push(t[1]),accumulateAverage(u,s,n,a,v);return t=populateAverage(u,s,n,a),c.push(t),g.push(t[0]),m.push(t[1]),{values:c,xData:g,yData:m}}}});