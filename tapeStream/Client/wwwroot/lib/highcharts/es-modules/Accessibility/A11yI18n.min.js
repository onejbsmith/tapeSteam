"use strict";import H from"../Core/Globals.js";import U from"../Core/Utilities.js";var format=U.format,pick=U.pick;function stringTrim(t){return t.trim&&t.trim()||t.replace(/^\s+|\s+$/g,"")}function formatExtendedStatement(t,e){var r,n,i=t.indexOf("#each("),s=t.indexOf("#plural("),a=t.indexOf("["),u=t.indexOf("]");if(i>-1){var o,f=t.slice(i).indexOf(")")+i,l=t.substring(0,i),m=t.substring(f+1),c=t.substring(i+6,f).split(","),g=Number(c[1]);if(n="",r=e[c[0]]){o=(g=isNaN(g)?r.length:g)<0?r.length+g:Math.min(g,r.length);for(var p=0;p<o;++p)n+=l+r[p]+m}return n.length?n:""}if(s>-1){var d=t.slice(s).indexOf(")")+s,h=t.substring(s+8,d).split(",");switch(Number(e[h[0]])){case 0:n=pick(h[4],h[1]);break;case 1:n=pick(h[2],h[1]);break;case 2:n=pick(h[3],h[1]);break;default:n=h[1]}return n?stringTrim(n):""}if(a>-1){var b,v=t.substring(0,a),x=Number(t.substring(a+1,u));return r=e[v],!isNaN(x)&&r&&(x<0?void 0===(b=r[r.length+x])&&(b=r[0]):void 0===(b=r[x])&&(b=r[r.length-1])),void 0!==b?b:""}return"{"+t+"}"}H.i18nFormat=function(t,e,r){var n,i,s=function(t,e){var r=t.slice(e||0),n=r.indexOf("{"),i=r.indexOf("}");if(n>-1&&i>n)return{statement:r.substring(n+1,i),begin:e+n+1,end:e+i}},a=[],u=0;do{n=s(t,u),(i=t.substring(u,n&&n.begin-1)).length&&a.push({value:i,type:"constant"}),n&&a.push({value:n.statement,type:"statement"}),u=n?n.end+1:u+1}while(n);return a.forEach(function(t){"statement"===t.type&&(t.value=formatExtendedStatement(t.value,e))}),format(a.reduce(function(t,e){return t+e.value},""),e,r)},H.Chart.prototype.langFormat=function(t,e){for(var r=t.split("."),n=this.options.lang,i=0;i<r.length;++i)n=n&&n[r[i]];return"string"==typeof n?H.i18nFormat(n,e,this):""};