import BaseSeries from"../Core/Series/Series.js";import Color from"../Core/Color/Color.js";var color=Color.parse;import H from"../Core/Globals.js";var Renderer=H.Renderer;import LegendSymbolMixin from"../Mixins/LegendSymbol.js";import U from"../Core/Utilities.js";var SolidGaugeAxis,clamp=U.clamp,extend=U.extend,isNumber=U.isNumber,merge=U.merge,pick=U.pick,pInt=U.pInt,wrap=U.wrap;import"../Core/Options.js";import"../Series/GaugeSeries.js";wrap(Renderer.prototype.symbols,"arc",function(o,t,e,r,s,a){var i=o(t,e,r,s,a);if(a.rounded){var n=((a.r||r)-(a.innerR||0))/2,l=i[0],d=i[2];if("M"===l[0]&&"L"===d[0]){var p=["A",n,n,0,1,1,l[1],l[2]],h=["A",n,n,0,1,1,d[1],d[2]];i[2]=h,i[4]=p}}return i}),function(o){var t={initDataClasses:function(o){var t,e=this.chart,r=0,s=this.options;this.dataClasses=t=[],o.dataClasses.forEach(function(a,i){var n;a=merge(a),t.push(a),a.color||("category"===s.dataClassColor?(n=e.options.colors,a.color=n[r++],r===n.length&&(r=0)):a.color=color(s.minColor).tweenTo(color(s.maxColor),i/(o.dataClasses.length-1)))})},initStops:function(o){this.stops=o.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach(function(o){o.color=color(o[1])})},toColor:function(o,t){var e,r,s,a,i,n,l=this.stops,d=this.dataClasses;if(d){for(n=d.length;n--;)if(r=(i=d[n]).from,s=i.to,(void 0===r||o>=r)&&(void 0===s||o<=s)){a=i.color,t&&(t.dataClass=n);break}}else{for(this.logarithmic&&(o=this.val2lin(o)),e=1-(this.max-o)/(this.max-this.min),n=l.length;n--&&!(e>l[n][0]););r=l[n]||l[n+1],e=1-((s=l[n+1]||r)[0]-e)/(s[0]-r[0]||1),a=r.color.tweenTo(s.color,e)}return a}};o.init=function(o){extend(o,t)}}(SolidGaugeAxis||(SolidGaugeAxis={}));var solidGaugeOptions={colorByPoint:!0,dataLabels:{y:0}};BaseSeries.seriesType("solidgauge","gauge",solidGaugeOptions,{drawLegendSymbol:LegendSymbolMixin.drawRectangle,translate:function(){var o=this.yAxis;SolidGaugeAxis.init(o),!o.dataClasses&&o.options.dataClasses&&o.initDataClasses(o.options),o.initStops(o.options),H.seriesTypes.gauge.prototype.translate.call(this)},drawPoints:function(){var o,t=this,e=t.yAxis,r=e.center,s=t.options,a=t.chart.renderer,i=s.overshoot,n=isNumber(i)?i/180*Math.PI:0;isNumber(s.threshold)&&(o=e.startAngleRad+e.translate(s.threshold,null,null,null,!0)),this.thresholdAngleRad=pick(o,e.startAngleRad),t.points.forEach(function(o){if(!o.isNull){var i,l,d,p,h=o.graphic,c=e.startAngleRad+e.translate(o.y,null,null,null,!0),u=pInt(pick(o.options.radius,s.radius,110))*r[2]/200,g=pInt(pick(o.options.innerRadius,s.innerRadius,60))*r[2]/200,m=e.toColor(o.y,o),f=Math.min(e.startAngleRad,e.endAngleRad),C=Math.max(e.startAngleRad,e.endAngleRad);"none"===m&&(m=o.color||t.color||"none"),"none"!==m&&(o.color=m),c=clamp(c,f-n,C+n),!1===s.wrap&&(c=clamp(c,f,C)),d=Math.min(c,t.thresholdAngleRad),(p=Math.max(c,t.thresholdAngleRad))-d>2*Math.PI&&(p=d+2*Math.PI),o.shapeArgs=i={x:r[0],y:r[1],r:u,innerR:g,start:d,end:p,rounded:s.rounded},o.startR=u,h?(l=i.d,h.animate(extend({fill:m},i)),l&&(i.d=l)):o.graphic=h=a.arc(i).attr({fill:m,"sweep-flag":0}).add(t.group),t.chart.styledMode||("square"!==s.linecap&&h.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),h.attr({stroke:s.borderColor||"none","stroke-width":s.borderWidth||0})),h&&h.addClass(o.getClassName(),!0)}})},animate:function(o){o||(this.startAngleRad=this.thresholdAngleRad,H.seriesTypes.pie.prototype.animate.call(this,o))}});export default SolidGaugeAxis;
