import BaseSeries from"../Core/Series/Series.js";import DerivedSeriesMixin from"../Mixins/DerivedSeries.js";import U from"../Core/Utilities.js";var correctFloat=U.correctFloat,isNumber=U.isNumber,merge=U.merge;function mean(e){var t=e.length,r=e.reduce(function(e,t){return e+t},0);return t>0&&r/t}function standardDeviation(e,t){var r,i=e.length;return t=isNumber(t)?t:mean(e),r=e.reduce(function(e,r){var i=r-t;return e+i*i},0),i>1&&Math.sqrt(r/(i-1))}function normalDensity(e,t,r){var i=e-t;return Math.exp(-i*i/(2*r*r))/(r*Math.sqrt(2*Math.PI))}BaseSeries.seriesType("bellcurve","areaspline",{intervals:3,pointsInInterval:3,marker:{enabled:!1}},merge(DerivedSeriesMixin,{setMean:function(){this.mean=correctFloat(mean(this.baseSeries.yData))},setStandardDeviation:function(){this.standardDeviation=correctFloat(standardDeviation(this.baseSeries.yData,this.mean))},setDerivedData:function(){this.baseSeries.yData.length>1&&(this.setMean(),this.setStandardDeviation(),this.setData(this.derivedData(this.mean,this.standardDeviation),!1))},derivedData:function(e,t){var r,i=this.options.intervals,a=this.options.pointsInInterval,n=e-i*t,s=i*a*2+1,o=t/a,d=[];for(r=0;r<s;r++)d.push([n,normalDensity(n,e,t)]),n+=o;return d}}));