import BaseSeries from"../Core/Series/Series.js";import H from"../Core/Globals.js";import O from"../Core/Options.js";var dateFormat=O.dateFormat;import"../Core/Axis/TreeGridAxis.js";import U from"../Core/Utilities.js";var isNumber=U.isNumber,merge=U.merge,pick=U.pick,splat=U.splat;import"../Extensions/CurrentDateIndication.js";import"../Extensions/StaticScale.js";import"../Gantt/Pathfinder.js";import"./XRangeSeries.js";var Series=H.Series,seriesTypes=BaseSeries.seriesTypes,parent=seriesTypes.xrange;BaseSeries.seriesType("gantt","xrange",{grouping:!1,dataLabels:{enabled:!0},tooltip:{headerFormat:'<span style="font-size: 10px">{series.name}</span><br/>',pointFormat:null,pointFormatter:function(){var t,e,r=this.series,i=r.chart.tooltip,s=r.xAxis,a=r.tooltipOptions.dateTimeLabelFormats,o=s.options.startOfWeek,n=r.tooltipOptions,p=n.xDateFormat,l=this.options.milestone,m="<b>"+(this.name||this.yCategory)+"</b>";return n.pointFormat?this.tooltipFormatter(n.pointFormat):(p||(p=splat(i.getDateFormat(s.closestPointRange,this.start,o,a))[0]),t=r.chart.time.dateFormat(p,this.start),e=r.chart.time.dateFormat(p,this.end),m+="<br/>",l?m+=t+"<br/>":(m+="Start: "+t+"<br/>",m+="End: "+e+"<br/>"),m)}},connectors:{type:"simpleConnect",animation:{reversed:!0},startMarker:{enabled:!0,symbol:"arrow-filled",radius:4,fill:"#fa0",align:"left"},endMarker:{enabled:!1,align:"right"}}},{pointArrayMap:["start","end","y"],keyboardMoveVertical:!1,translatePoint:function(t){var e,r;parent.prototype.translatePoint.call(this,t),t.options.milestone&&(r=(e=t.shapeArgs).height,t.shapeArgs={x:e.x-r/2,y:e.y,width:r,height:r})},drawPoint:function(t,e){var r,i=this.options,s=this.chart.renderer,a=t.shapeArgs,o=t.plotY,n=t.graphic,p=t.selected&&"select",l=i.stacking&&!i.borderRadius;t.options.milestone?isNumber(o)&&null!==t.y&&!1!==t.visible?(r=s.symbols.diamond(a.x,a.y,a.width,a.height),n?n[e]({d:r}):t.graphic=n=s.path(r).addClass(t.getClassName(),!0).add(t.group||this.group),this.chart.styledMode||t.graphic.attr(this.pointAttribs(t,p)).shadow(i.shadow,null,l)):n&&(t.graphic=n.destroy()):parent.prototype.drawPoint.call(this,t,e)},setData:Series.prototype.setData,setGanttPointAliases:function(t){function e(e,r){void 0!==r&&(t[e]=r)}e("x",pick(t.start,t.x)),e("x2",pick(t.end,t.x2)),e("partialFill",pick(t.completed,t.partialFill))}},merge(parent.prototype.pointClass.prototype,{applyOptions:function(t,e){var r;return r=parent.prototype.pointClass.prototype.applyOptions.call(this,t,e),H.seriesTypes.gantt.prototype.setGanttPointAliases(r),r},isValid:function(){return("number"==typeof this.start||"number"==typeof this.x)&&("number"==typeof this.end||"number"==typeof this.x2||this.milestone)}}));