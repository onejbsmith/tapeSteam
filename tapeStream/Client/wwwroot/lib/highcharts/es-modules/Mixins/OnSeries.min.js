"use strict";import H from"../Core/Globals.js";import U from"../Core/Utilities.js";var defined=U.defined,stableSort=U.stableSort;import"../Series/LineSeries.js";var seriesTypes=H.seriesTypes,onSeriesMixin={getPlotBox:function(){return H.Series.prototype.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)},translate:function(){seriesTypes.column.prototype.translate.apply(this);var t,e,o,s,i,r,n,p=this,l=p.options,a=p.chart,x=p.points,f=x.length-1,y=l.onSeries,d=y&&a.get(y),c=l.onKey||"y",h=d&&d.options.step,u=d&&d.points,S=u&&u.length,v=a.inverted,g=p.xAxis,b=p.yAxis,X=0;if(d&&d.visible&&S)for(X=(d.pointXOffset||0)+(d.barW||0)/2,r=d.currentDataGrouping,s=u[S-1].x+(r?r.totalRange:0),stableSort(x,function(t,e){return t.x-e.x}),c="plot"+c[0].toUpperCase()+c.substr(1);S--&&x[f]&&(o=u[S],(t=x[f]).y=o.y,!(o.x<=t.x&&void 0!==o[c]&&(t.x<=s&&(t.plotY=o[c],o.x<t.x&&!h&&(i=u[S+1])&&void 0!==i[c]&&(n=(t.x-o.x)/(i.x-o.x),t.plotY+=n*(i[c]-o[c]),t.y+=n*(i.y-o.y))),S++,--f<0))););x.forEach(function(t,o){var s;t.plotX+=X,(void 0===t.plotY||v)&&(t.plotX>=0&&t.plotX<=g.len?v?(t.plotY=g.translate(t.x,0,1,0,1),t.plotX=defined(t.y)?b.translate(t.y,0,0,0,1):0):t.plotY=(g.opposite?0:p.yAxis.len)+g.offset:t.shapeArgs={}),(e=x[o-1])&&e.plotX===t.plotX&&(void 0===e.stackIndex&&(e.stackIndex=0),s=e.stackIndex+1),t.stackIndex=s}),this.onSeries=d}};export default onSeriesMixin;