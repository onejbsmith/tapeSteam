var getCentroid=function(r){for(var e=r.slice(0,-1),n=e.length,t=[],f=function(r,e){return r.sum+=e[r.i],r},u=0;u<n;u++)t[u]=e.reduce(f,{sum:0,i:u}).sum/n;return t},nelderMead=function(r,e){for(var n=function(r,e){return r.fx-e.fx},t=function(r,e,n,t){return e.map(function(e,f){return r*e+n*t[f]})},f=function(e,n){return n.fx=r(n),e[e.length-1]=n,e},u=function(e){var n=e[0];return e.map(function(e){var f=t(.5,n,.5,e);return f.fx=r(f),f})},i=function(e,n,f,u){var i=t(f,e,u,n);return i.fx=r(i),i},x=function(e){var n=e.length,t=new Array(n+1);t[0]=e,t[0].fx=r(e);for(var f=0;f<n;++f){var u=e.slice();u[f]=u[f]?1.05*u[f]:.001,u.fx=r(u),t[f+1]=u}return t}(e),a=0;a<110;a++){x.sort(n);var o=x[x.length-1],d=getCentroid(x),l=i(d,o,2,-1);if(l.fx<x[0].fx){var c=i(d,o,3,-2);x=f(x,c.fx<l.fx?c:l)}else if(l.fx>=x[x.length-2].fx){var v;x=l.fx>o.fx?(v=i(d,o,.5,.5)).fx<o.fx?f(x,v):u(x):(v=i(d,o,1.5,-.5)).fx<l.fx?f(x,v):u(x)}else x=f(x,l)}return x[0]},nelderMeadMixin={getCentroid:getCentroid,nelderMead:nelderMead};export default nelderMeadMixin;
