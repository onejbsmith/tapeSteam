"use strict";import U from"../Core/Utilities.js";var extend=U.extend,isNumber=U.isNumber,pick=U.pick,getListOfParents=function(e,t){var r=e.reduce(function(e,t){var r=pick(t.parent,"");return void 0===e[r]&&(e[r]=[]),e[r].push(t),e},{});return Object.keys(r).forEach(function(e,n){var i=r[e];""!==e&&-1===t.indexOf(e)&&(i.forEach(function(e){n[""].push(e)}),delete n[e])}),r},getNode=function(e,t,r,n,i,a){var s,u,d,o=0,c=0,f=a&&a.after,p=a&&a.before,g={data:n,depth:r-1,id:e,level:r,parent:t};return"function"==typeof p&&p(g,a),d=(i[e]||[]).map(function(t){var n=getNode(t.id,e,r+1,t,i,a),d=t.start,f=!0===t.milestone?d:t.end;return s=!isNumber(s)||d<s?d:s,u=!isNumber(u)||f>u?f:u,o=o+1+n.descendants,c=Math.max(n.height+1,c),n}),n&&(n.start=pick(n.start,s),n.end=pick(n.end,u)),extend(g,{children:d,descendants:o,height:c}),"function"==typeof f&&f(g,a),g},getTree=function(e,t){var r=e.map(function(e){return e.id}),n=getListOfParents(e,r);return getNode("",null,1,null,n,t)},Tree={getListOfParents:getListOfParents,getNode:getNode,getTree:getTree};export default Tree;