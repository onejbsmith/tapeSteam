"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/organization",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i))}i(e,"Series/OrganizationSeries.js",[e["Core/Series/Series.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(t,h,e){var a=e.css,p=e.pick,i=e.wrap,d=t.seriesTypes.sankey.prototype;t.seriesType("organization","sankey",{borderColor:"#666666",borderRadius:3,linkRadius:10,borderWidth:1,dataLabels:{nodeFormatter:function(){var t={width:"100%",height:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"},e={"max-height":"100%","border-radius":"50%"},i={width:"100%",padding:0,"text-align":"center","white-space":"normal"};function s(i){return Object.keys(i).reduce(function(t,e){return t+e+":"+i[e]+";"},'style="')+'"'}this.point.image&&(e["max-width"]="30%",i.width="70%"),this.series.chart.renderer.forExport&&(t.display="block",i.position="absolute",i.left=this.point.image?"30%":0,i.top=0);var n="<div "+s(t)+">";return this.point.image&&(n+='<img src="'+this.point.image+'" '+s(e)+">"),n+="<div "+s(i)+">",this.point.name&&(n+="<h4 "+s({margin:0})+">"+this.point.name+"</h4>"),this.point.title&&(n+="<p "+s({margin:0})+">"+(this.point.title||"")+"</p>"),this.point.description&&(n+="<p "+s({opacity:.75,margin:"5px"})+">"+this.point.description+"</p>"),n+="</div></div>"},style:{fontWeight:"normal",fontSize:"13px"},useHTML:!0},hangingIndent:20,linkColor:"#666666",linkLineWidth:1,nodeWidth:50,tooltip:{nodeFormat:"{point.name}<br>{point.title}<br>{point.description}"}},{pointAttribs:function(t,e){var i=this,s=d.pointAttribs.call(i,t,e),n=t.isNode?t.level:t.fromNode.level,o=i.mapOptionsToLevel[n||0]||{},r=t.options,h=o.states&&o.states[e]||{},a=["borderRadius","linkColor","linkLineWidth"].reduce(function(t,e){return t[e]=p(h[e],r[e],o[e],i.options[e]),t},{});return t.isNode?a.borderRadius&&(s.r=a.borderRadius):(s.stroke=a.linkColor,s["stroke-width"]=a.linkLineWidth,delete s.fill),s},createNode:function(t){var e=d.createNode.call(this,t);return e.getSum=function(){return 1},e},createNodeColumn:function(){var t=d.createNodeColumn.call(this);return i(t,"offset",function(t,e,i){var s=t.call(this,e,i);return e.hangsFrom?{absoluteTop:e.hangsFrom.nodeY}:s}),t},translateNode:function(t,e){d.translateNode.call(this,t,e),t.hangsFrom&&(t.shapeArgs.height-=this.options.hangingIndent,this.chart.inverted||(t.shapeArgs.y+=this.options.hangingIndent)),t.nodeHeight=this.chart.inverted?t.shapeArgs.width:t.shapeArgs.height},curvedPath:function(t,e){for(var i=[],s=0;s<t.length;s++){var n,o,r,h,a,p,d,l,g=t[s][1],u=t[s][2];"number"==typeof g&&"number"==typeof u&&(0===s?i.push(["M",g,u]):s!==t.length-1&&e?(n=t[s-1],o=t[s+1],n&&o&&(r=n[1],h=n[2],a=o[1],p=o[2],"number"==typeof r&&"number"==typeof a&&"number"==typeof h&&"number"==typeof p&&r!==a&&h!==p&&(d=r<a?1:-1,l=h<p?1:-1,i.push(["L",g-d*Math.min(Math.abs(g-r),e),u-l*Math.min(Math.abs(u-h),e)],["C",g,u,g,u,g+d*Math.min(Math.abs(g-a),e),u+l*Math.min(Math.abs(u-p),e)])))):i.push(["L",g,u]))}return i},translateLink:function(t){var e,i=t.fromNode,s=t.toNode,n=Math.round(this.options.linkLineWidth)%2/2,o=Math.floor(i.shapeArgs.x+i.shapeArgs.width)+n,r=Math.floor(i.shapeArgs.y+i.shapeArgs.height/2)+n,h=Math.floor(s.shapeArgs.x)+n,a=Math.floor(s.shapeArgs.y+s.shapeArgs.height/2)+n,p=this.options.hangingIndent,d=s.options.offset,l=/%$/.test(d)&&parseInt(d,10),g=this.chart.inverted;g&&(o-=i.shapeArgs.width,h+=s.shapeArgs.width),e=Math.floor(h+(g?1:-1)*(this.colDistance-this.nodeWidth)/2)+n,l&&(50<=l||l<=-50)&&(e=h=Math.floor(h+(g?-.5:.5)*s.shapeArgs.width)+n,a=s.shapeArgs.y,0<l&&(a+=s.shapeArgs.height)),s.hangsFrom===i&&(this.chart.inverted?(r=Math.floor(i.shapeArgs.y+i.shapeArgs.height-p/2)+n,a=s.shapeArgs.y+s.shapeArgs.height):r=Math.floor(i.shapeArgs.y+p/2)+n,e=h=Math.floor(s.shapeArgs.x+s.shapeArgs.width/2)+n),t.plotY=1,t.shapeType="path",t.shapeArgs={d:this.curvedPath([["M",o,r],["L",e,r],["L",e,a],["L",h,a]],this.options.linkRadius)}},alignDataLabel:function(t,e,i){var s,n,o,r;i.useHTML&&(s=t.shapeArgs.width,n=t.shapeArgs.height,o=this.options.borderWidth+2*this.options.dataLabels.padding,this.chart.inverted&&(s=n,n=t.shapeArgs.width),n-=o,s-=o,(r=e.text)&&(a(r.element.parentNode,{width:s+"px",height:n+"px"}),a(r.element,{left:0,top:0,width:"100%",height:"100%",overflow:"hidden"})),e.getBBox=function(){return{width:s,height:n}},e.width=s,e.height=n),h.seriesTypes.column.prototype.alignDataLabel.apply(this,arguments)}})}),i(e,"masters/modules/organization.src.js",[],function(){})});