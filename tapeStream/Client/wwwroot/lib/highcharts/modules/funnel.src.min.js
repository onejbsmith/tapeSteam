"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(m){var t=m?m._modules:{};function e(t,e,i,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,i))}e(t,"Series/FunnelSeries.js",[t["Core/Series/Series.js"],t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e,i,a){var h=t.seriesTypes,Y=i.noop,n=a.addEvent,S=a.fireEvent,o=a.isArray,E=a.pick;t.seriesType("funnel","pie",{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}},{animate:Y,translate:function(){var e,i,a,n,o,s,l,r,h,d,c=0,p=this,t=p.chart,g=p.options,u=g.reversed,f=g.ignoreHiddenPoint,b=t.plotWidth,m=t.plotHeight,y=0,L=g.center,v=w(L[0],b),W=w(L[1],m),A=w(g.width,b),x=w(g.height,m),D=w(g.neckWidth,b),C=w(g.neckHeight,m),H=W-x/2+x-C,k=p.data,j="left"===g.dataLabels.position?1:0;function w(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}p.getWidthAt=function(t){return H<t||x===C?D:D+(A-D)*(1-(t-(W-x/2))/(x-C))},p.getX=function(t,e,i){return v+(e?-1:1)*(p.getWidthAt(u?2*W-t:t)/2+i.labelDistance)},p.center=[v,W,x],p.centerX=v,k.forEach(function(t){f&&!1===t.visible||(c+=t.y)}),k.forEach(function(t){d=null,a=c?t.y/c:0,r=(o=W-x/2+y*x)+a*x,e=p.getWidthAt(o),s=(n=v-e/2)+e,e=p.getWidthAt(r),h=(l=v-e/2)+e,H<o?(n=l=v-D/2,s=h=v+D/2):H<r&&(d=r,e=p.getWidthAt(H),h=(l=v-e/2)+e,r=H),u&&(o=2*W-o,r=2*W-r,null!==d&&(d=2*W-d)),i=[["M",n,o],["L",s,o],["L",h,r]],null!==d&&i.push(["L",h,d],["L",l,d]),i.push(["L",l,r],["Z"]),t.shapeType="path",t.shapeArgs={d:i},t.percentage=100*a,t.plotX=v,t.plotY=(o+(d||r))/2,t.tooltipPos=[v,t.plotY],t.dlBox={x:l,y:o,topWidth:s-n,bottomWidth:h-l,height:Math.abs(E(d,r)-o),width:NaN},t.slice=Y,t.half=j,f&&!1===t.visible||(y+=a)}),S(p,"afterTranslate")},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e,i,a,n,o=this,s=o.data,l=o.options.dataLabels.distance,r=s.length;for(o.center[2]-=2*l;r--;)e=(t=(i=s[r]).half)?1:-1,n=i.plotY,i.labelDistance=E(i.options.dataLabels&&i.options.dataLabels.distance,l),o.maxLabelDistance=Math.max(i.labelDistance,o.maxLabelDistance||0),a=o.getX(n,t,i),i.labelPosition={natural:{x:0,y:n},final:{},alignment:t?"right":"left",connectorPosition:{breakAt:{x:a+(i.labelDistance-5)*e,y:n},touchingSliceAt:{x:a+i.labelDistance*e,y:n}}};h[o.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)},alignDataLabel:function(t,e,i,a,n){var o=t.series,s=o.options.reversed,l=t.dlBox||t.shapeArgs,r=i.align,h=i.verticalAlign,d=((o.options||{}).dataLabels||{}).inside,c=o.center[1],p=s?2*c-t.plotY:t.plotY,g=o.getWidthAt(p-l.height/2+e.height),u="middle"===h?(l.topWidth-l.bottomWidth)/4:(g-l.bottomWidth)/2,f=l.y,b=l.x;"middle"===h?f=l.y-l.height/2+e.height/2:"top"===h&&(f=l.y-l.height+e.height+i.padding),("top"===h&&!s||"bottom"===h&&s||"middle"===h)&&("right"===r?b=l.x-i.padding+u:"left"===r&&(b=l.x+i.padding-u)),a={x:b,y:s?f-l.height:f,width:l.bottomWidth,height:l.height},i.verticalAlign="bottom",d&&!t.visible||m.Series.prototype.alignDataLabel.call(this,t,e,i,a,n),d&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}}),n(e,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){var e=t.options&&t.options.dataLabels;o(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),t.seriesType("pyramid","funnel",{neckWidth:"0%",neckHeight:"0%",reversed:!0})}),e(t,"masters/modules/funnel.src.js",[],function(){})});