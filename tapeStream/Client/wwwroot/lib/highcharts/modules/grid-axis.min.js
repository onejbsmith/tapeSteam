!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/grid-axis",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function i(t,i,e,s){t.hasOwnProperty(i)||(t[i]=s.apply(null,e))}i(t=t?t._modules:{},"Core/Axis/GridAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Options.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(h,l,t,i,r){var e=r.addEvent,o=r.defined,d=r.erase,c=r.find,a=r.isArray,u=r.isNumber,f=r.merge,m=r.pick,g=r.timeUnits,p=r.wrap;t=l.Chart;h.prototype.getMaxLabelDimensions=function(s,t){var n={width:0,height:0};return t.forEach(function(t){var i,e;t=s[t],r.isObject(t,!0)&&(t=(i=r.isObject(t.label,!0)?t.label:{}).getBBox?i.getBBox().height:0,i.textStr&&!u(i.textPxLength)&&(i.textPxLength=i.getBBox().width),e=u(i.textPxLength)?Math.round(i.textPxLength):0,i.textStr&&(e=Math.round(i.getBBox().width)),n.height=Math.max(t,n.height),n.width=Math.max(e,n.width))}),n},l.dateFormats.W=function(t){t=new this.Date(t);var i=(this.get("Day",t)+6)%7,e=new this.Date(t.valueOf());return this.set("Date",e,this.get("Date",t)-i+3),i=new this.Date(this.get("FullYear",e),0,1),4!==this.get("Day",i)&&(this.set("Month",t,0),this.set("Date",t,1+(11-this.get("Day",i))%7)),(1+Math.floor((e.valueOf()-i.valueOf())/6048e5)).toString()},l.dateFormats.E=function(t){return this.dateFormat("%a",t,!0).charAt(0)},e(t,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.grid&&t.grid.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})}),e(i,"afterGetLabelPosition",function(t){var i,e=this.label,s=this.axis,n=s.reversed,r=s.chart,o=s.options.grid||{},a=s.options.labels,h=a.align,l=x.Side[s.side],d=t.tickmarkOffset,c=s.tickPositions,f=this.pos-d,c=u(c[t.index+1])?c[t.index+1]-d:s.max+d,d=(g=s.tickSize("tick"))?g[0]:0,g=g?g[1]/2:0;!0===o.enabled&&("top"===l?i=(o=s.top+s.offset)-d:"bottom"===l?o=(i=r.chartHeight-s.bottom+s.offset)+d:(o=s.top+s.len-s.translate(n?c:f),i=s.top+s.len-s.translate(n?f:c)),"right"===l?n=(l=r.chartWidth-s.right+s.offset)+d:"left"===l?l=(n=s.left+s.offset)-d:(l=Math.round(s.left+s.translate(n?c:f))-g,n=Math.round(s.left+s.translate(n?f:c))-g),this.slotWidth=n-l,t.pos.x="left"===h?l:"right"===h?n:l+(n-l)/2,t.pos.y=i+(o-i)/2,r=r.renderer.fontMetrics(a.style.fontSize,e.element),e=e.getBBox().height,a.useHTML?t.pos.y+=r.b+-e/2:(e=Math.round(e/r.h),t.pos.y+=(r.b-(r.h-r.f))/2+-((e-1)*r.h)/2),t.pos.x+=s.horiz&&a.x||0)});var s,n=(b.prototype.isOuterAxis=function(){var e=this.axis,t=e.grid.columnIndex,i=e.linkedParent&&e.linkedParent.grid.columns||e.grid.columns,s=t?e.linkedParent:e,n=-1,r=0;return e.chart[e.coll].forEach(function(t,i){t.side!==e.side||t.options.isInternal||(r=i,t===s&&(n=i))}),r===n&&(!u(t)||i.length===t)},b.prototype.renderBorder=function(t){var i=this.axis,e=i.chart.renderer,s=i.options;return t=e.path(t).addClass("highcharts-axis-line").add(i.axisBorder),e.styledMode||t.attr({stroke:s.lineColor,"stroke-width":s.lineWidth,zIndex:7}),t},b),x=(k.compose=function(t){h.keepProps.push("grid"),p(t.prototype,"unsquish",k.wrapUnsquish),e(t,"init",k.onInit),e(t,"afterGetOffset",k.onAfterGetOffset),e(t,"afterGetTitlePosition",k.onAfterGetTitlePosition),e(t,"afterInit",k.onAfterInit),e(t,"afterRender",k.onAfterRender),e(t,"afterSetAxisTranslation",k.onAfterSetAxisTranslation),e(t,"afterSetOptions",k.onAfterSetOptions),e(t,"afterSetOptions",k.onAfterSetOptions2),e(t,"afterSetScale",k.onAfterSetScale),e(t,"afterTickSize",k.onAfterTickSize),e(t,"trimTicks",k.onTrimTicks),e(t,"destroy",k.onDestroy)},k.onAfterGetOffset=function(){var t=this.grid;(t&&t.columns||[]).forEach(function(t){t.getOffset()})},k.onAfterGetTitlePosition=function(t){var i,e,s,n,r,o,a,h,l,d,c,f,g,u;!0===(this.options.grid||{}).enabled&&(g=this.axisTitle,i=this.height,e=this.horiz,s=this.left,n=this.offset,r=this.opposite,o=void 0===(a=this.options.title)?{}:a,a=this.top,h=this.width,u=this.tickSize(),l=g&&g.getBBox().width,d=o.x||0,c=o.y||0,f=m(o.margin,e?5:10),g=this.chart.renderer.fontMetrics(o.style&&o.style.fontSize,g).f,u=(e?a+i:s)+(e?1:-1)*(r?-1:1)*(u?u[0]/2:0)+(this.side===k.Side.bottom?g:0),t.titlePosition.x=e?s-l/2-f+d:u+(r?h:0)+n+d,t.titlePosition.y=e?u-(r?i:0)+(r?g:-g)/2+n+c:a-f+c)},k.onAfterInit=function(){var t,i,e=this.chart,s=void 0===(s=this.options.grid)?{}:s,n=this.userOptions;if(s.enabled&&((i=(t=this).options).labels||(i.labels={}),i.labels.align=m(i.labels.align,"center"),t.categories||(i.showLastLabel=!1),t.labelRotation=0,i.labels.rotation=0,p(this,"labelFormatter",function(t){var i,e=this.axis,s=this.value,n=e.tickPositions,r=(e.isLinked?e.linkedParent:e).series[0],o=s===n[0],n=s===n[n.length-1],a=r&&c(r.options.data,function(t){return t[e.isXAxis?"x":"y"]===s});return a&&r.is("gantt")&&(i=f(a),l.seriesTypes.gantt.prototype.setGanttPointAliases(i)),this.isFirst=o,this.isLast=n,this.point=i,t.call(this)})),s.columns)for(var r=this.grid.columns=[],o=this.grid.columnIndex=0;++o<s.columns.length;){var a=f(n,s.columns[s.columns.length-o-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete a.grid.columns,(a=new h(this.chart,a)).grid.isColumn=!0,a.grid.columnIndex=o,d(e.axes,a),d(e[this.coll],a),r.push(a)}},k.onAfterRender=function(){var t,i,e,s,n=this.grid,r=this.options;!0===(r.grid||{}).enabled&&(this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions),this.rightWall&&this.rightWall.destroy(),this.grid&&this.grid.isOuterAxis()&&this.axisLine&&(r=r.lineWidth)&&(i=(r=this.getLinePath(r))[0],e=r[1],s=((this.tickSize("tick")||[1])[0]-1)*(this.side===k.Side.top||this.side===k.Side.left?-1:1),"M"===i[0]&&"L"===e[0]&&(this.horiz?(i[2]+=s,e[2]+=s):(i[1]+=s,e[1]+=s)),!this.horiz&&this.chart.marginRight&&(i=[i,["L",this.left,i[2]]],s=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(this.max+this.tickmarkOffset)],e=[["M",e[1],this.toPixels(this.max+this.tickmarkOffset)],s],this.grid.upperBorder||0==this.min%1||(this.grid.upperBorder=this.grid.renderBorder(i)),this.grid.upperBorder&&this.grid.upperBorder.animate({d:i}),this.grid.lowerBorder||0==this.max%1||(this.grid.lowerBorder=this.grid.renderBorder(e)),this.grid.lowerBorder&&this.grid.lowerBorder.animate({d:e})),this.grid.axisLineExtra?this.grid.axisLineExtra.animate({d:r}):this.grid.axisLineExtra=this.grid.renderBorder(r),this.axisLine[this.showAxis?"show":"hide"](!0)),(n&&n.columns||[]).forEach(function(t){t.render()}),!this.horiz&&this.chart.hasRendered&&(this.scrollbar||null!==(t=this.linkedParent)&&void 0!==t&&t.scrollbar)&&(t=this.max,n=this.tickmarkOffset,r=this.tickPositions[this.tickPositions.length-1],e=this.tickPositions[0],this.min-e>n?this.ticks[e].label.hide():this.ticks[e].label.show(),n<r-t?this.ticks[r].label.hide():this.ticks[r].label.show(),r-t<n&&0<r-t&&this.ticks[r].isLast?this.ticks[r].mark.hide():this.ticks[r-1].mark.show()))},k.onAfterSetAxisTranslation=function(){var t,i=this.tickPositions&&this.tickPositions.info,e=this.options,s=e.grid||{},n=this.userOptions.labels||{};this.horiz?(!0===s.enabled&&this.series.forEach(function(t){t.options.pointRange=0}),i&&e.dateTimeLabelFormats&&e.labels&&!o(n.align)&&(!1===e.dateTimeLabelFormats[i.unitName].range||1<i.count)&&(e.labels.align="left",o(n.x)||(e.labels.x=3))):"treegrid"!==this.options.type&&null!==(t=this.grid)&&void 0!==t&&t.columns&&(this.minPointOffset=this.tickInterval)},k.onAfterSetOptions=function(t){var i=this.options;t=t.userOptions;var h,e=i&&r.isObject(i.grid,!0)?i.grid:{};!0===e.enabled&&(h=f(!0,{className:"highcharts-grid-axis "+(t.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},t),"xAxis"===this.coll&&(o(t.linkedTo)&&!o(t.tickPixelInterval)&&(h.tickPixelInterval=350),o(t.tickPixelInterval)||!o(t.linkedTo)||o(t.tickPositioner)||o(t.tickInterval)||(h.tickPositioner=function(t,i){var e=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(e){for(var s,n,r=h.units,o=0;o<r.length;o++)if(r[o][0]===e.unitName){var a=o;break}return r[a+1]?(s=r[a+1][0],n=(r[a+1][1]||[1])[0]):"year"===e.unitName&&(s="year",n=10*e.count),e=g[s],this.tickInterval=e*n,this.getTimeTicks({unitRange:e,count:n,unitName:s},t,i,this.options.startOfWeek)}})),f(!0,this.options,h),this.horiz&&(i.minPadding=m(t.minPadding,0),i.maxPadding=m(t.maxPadding,0)),u(i.grid.borderWidth)&&(i.tickWidth=i.lineWidth=e.borderWidth))},k.onAfterSetOptions2=function(t){var i=(t=(t=t.userOptions)&&t.grid||{}).columns;t.enabled&&i&&f(!0,this.options,i[i.length-1])},k.onAfterSetScale=function(){(this.grid.columns||[]).forEach(function(t){t.setScale()})},k.onAfterTickSize=function(t){var i=h.defaultLeftAxisOptions,e=this.horiz,s=this.maxLabelDimensions,n=this.options.grid;(n=void 0===n?{}:n).enabled&&s&&(i=2*Math.abs(i.labels.x),e=e?n.cellHeight||i+s.height:i+s.width,a(t.tickSize)?t.tickSize[0]=e:t.tickSize=[e,0])},k.onDestroy=function(i){var t=this.grid;(t.columns||[]).forEach(function(t){t.destroy(i.keepEvents)}),t.columns=void 0},k.onInit=function(t){var i=(t=t.userOptions||{}).grid||{};i.enabled&&o(i.borderColor)&&(t.tickColor=t.lineColor=i.borderColor),this.grid||(this.grid=new n(this))},k.onTrimTicks=function(){var t=this.options,i=this.categories,e=this.tickPositions,s=e[0],n=e[e.length-1],r=this.linkedParent&&this.linkedParent.min||this.min,o=this.linkedParent&&this.linkedParent.max||this.max,a=this.tickInterval;!0!==(t.grid||{}).enabled||i||!this.horiz&&!this.isLinked||(s<r&&r<s+a&&!t.startOnTick&&(e[0]=r),o<n&&n-a<o&&!t.endOnTick&&(e[e.length-1]=o))},k.wrapUnsquish=function(t){var i=this.options.grid;return!0===(void 0===i?{}:i).enabled&&this.categories?this.tickInterval:t.apply(this,Array.prototype.slice.call(arguments,1))},k);function k(){}function b(t){this.axis=t}return(s=(s=x=x||{}).Side||(s.Side={}))[s.top=0]="top",s[s.right=1]="right",s[s.bottom=2]="bottom",s[s.left=3]="left",x.compose(h),x}),i(t,"masters/modules/grid-axis.src.js",[],function(){})});