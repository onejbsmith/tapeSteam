"use strict";!function(s){"object"==typeof module&&module.exports?module.exports=s.default=s:"function"==typeof define&&define.amd?define("highcharts/modules/variwide",["highcharts"],function(t){return s(t),s.Highcharts=t,s}):s("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var s=t?t._modules:{};function i(t,s,i,r){t.hasOwnProperty(s)||(t[s]=r.apply(null,i))}i(s,"Series/VariwideSeries.js",[s["Core/Axis/Axis.js"],s["Core/Series/Series.js"],s["Core/Globals.js"],s["Core/Utilities.js"]],function(t,s,i,r){var h=s.seriesTypes,e=r.addEvent,a=r.isNumber,f=r.pick,o=r.wrap;s.seriesType("variwide","column",{pointPadding:0,groupPadding:0},{irregularWidths:!0,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],processData:function(t){this.totalZ=0,this.relZ=[],h.column.prototype.processData.call(this,t),(this.xAxis.reversed?this.zData.slice().reverse():this.zData).forEach(function(t,s){this.relZ[s]=this.totalZ,this.totalZ+=t},this),this.xAxis.categories&&(this.xAxis.variwide=!0,this.xAxis.zData=this.zData)},postTranslate:function(t,s,i){var r=this.xAxis,e=this.relZ,a=r.reversed?e.length-t:t,o=r.reversed?-1:1,h=r.len,n=this.totalZ,l=a/e.length*h,c=(a+o)/e.length*h,p=f(e[a],n)/n*h,d=f(e[a+o],n)/n*h,u=s-l;return i&&(i.crosshairWidth=d-p),p+u*(d-p)/(c-l)},translate:function(){var t=this.options.crisp,e=this.xAxis;this.options.crisp=!1,h.column.prototype.translate.call(this),this.options.crisp=t;var a=this.chart.inverted,o=this.borderWidth%2/2;this.points.forEach(function(t,s){var i,r=e.variwide?(i=this.postTranslate(s,t.shapeArgs.x,t),this.postTranslate(s,t.shapeArgs.x+t.shapeArgs.width)):(i=t.plotX,e.translate(t.x+t.z,0,0,0,1));this.options.crisp&&(i=Math.round(i)-o,r=Math.round(r)-o),t.shapeArgs.x=i,t.shapeArgs.width=Math.max(r-i,1),t.plotX=(i+r)/2,a?t.tooltipPos[1]=e.len-t.shapeArgs.x-t.shapeArgs.width/2:t.tooltipPos[0]=t.shapeArgs.x+t.shapeArgs.width/2},this),this.options.stacking&&this.correctStackLabels()},correctStackLabels:function(){var s,i,r,e,a=this,o=a.options,h=a.yAxis;a.points.forEach(function(t){e=t.x,i=t.shapeArgs.width,(r=h.stacking.stacks[(a.negStacks&&t.y<(o.startFromThreshold?0:o.threshold)?"-":"")+a.stackKey])&&(s=r[e])&&!t.isNull&&s.setOffset(-i/2||0,i||0,void 0,void 0,t.plotX)})}},{isValid:function(){return a(this.y)&&a(this.z)}}),i.Tick.prototype.postTranslate=function(t,s,i){var r=this.axis,e=t[s]-r.pos;r.horiz||(e=r.len-e),e=r.series[0].postTranslate(i,e),r.horiz||(e=r.len-e),t[s]=r.pos+e},e(t,"afterDrawCrosshair",function(t){this.variwide&&this.cross&&this.cross.attr("stroke-width",t.point&&t.point.crosshairWidth)}),e(t,"afterRender",function(){var r=this;!this.horiz&&this.variwide&&this.chart.labelCollectors.push(function(){return r.tickPositions.filter(function(t){return r.ticks[t].label}).map(function(t,s){var i=r.ticks[t].label;return i.labelrank=r.zData[s],i})})}),e(i.Tick,"afterGetPosition",function(t){var s=this.axis,i=s.horiz?"x":"y";s.variwide&&(this[i+"Orig"]=t.pos[i],this.postTranslate(t.pos,i,this.pos))}),o(i.Tick.prototype,"getLabelPosition",function(t,s,i,r,e,a,o,h){var n,l=Array.prototype.slice.call(arguments,1),c=e?"x":"y";return this.axis.variwide&&"number"==typeof this[c+"Orig"]&&(l[e?0:1]=this[c+"Orig"]),n=t.apply(this,l),this.axis.variwide&&this.axis.categories&&this.postTranslate(n,c,h),n})}),i(s,"masters/modules/variwide.src.js",[],function(){})});