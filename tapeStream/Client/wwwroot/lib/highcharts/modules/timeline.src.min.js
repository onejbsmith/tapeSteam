"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/timeline",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,i))}i(e,"Series/TimelineSeries.js",[e["Core/Series/Series.js"],e["Core/Globals.js"],e["Mixins/LegendSymbol.js"],e["Core/Series/Point.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Utilities.js"]],function(t,e,i,n,a,o){var c=t.seriesTypes,s=o.addEvent,r=o.arrayMax,l=o.arrayMin,p=o.defined,d=o.isNumber,h=o.merge,u=o.objectEach,y=o.pick,f=e.TrackerMixin,g=e.Series;t.seriesType("timeline","line",{colorByPoint:!0,stickyTracking:!1,ignoreHiddenPoint:!0,legendType:"point",lineWidth:4,tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 10px"> {point.key}</span><br/>',pointFormat:"{point.description}"},states:{hover:{lineWidthPlus:0}},dataLabels:{enabled:!0,allowOverlap:!0,alternate:!0,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#999999",borderRadius:3,color:"#333333",connectorWidth:1,distance:100,formatter:function(){var t=this.series.chart.styledMode?"<span>● </span>":'<span style="color:'+this.point.color+'">● </span>';return t+='<span class="highcharts-strong">'+(this.key||"")+"</span><br/>"+(this.point.label||"")},style:{textOutline:"none",fontWeight:"normal",fontSize:"12px"},shadow:!1,verticalAlign:"middle"},marker:{enabledThreshold:0,symbol:"square",radius:6,lineWidth:2,height:15},showInLegend:!1,colorKey:"x"},{trackerGroups:["markerGroup","dataLabelsGroup"],drawLegendSymbol:i.drawRectangle,drawTracker:f.drawTrackerPoint,init:function(){var t=this;g.prototype.init.apply(t,arguments),s(t,"afterTranslate",function(){var e,i=Number.MAX_VALUE;t.points.forEach(function(t){t.isInside=t.isInside&&t.visible,t.visible&&!t.isNull&&(p(e)&&(i=Math.min(i,Math.abs(t.plotX-e))),e=t.plotX)}),t.closestPointRangePx=i}),s(t,"drawDataLabels",function(){t.distributeDL()}),s(t,"afterDrawDataLabels",function(){var e;t.points.forEach(function(t){if(e=t.dataLabel)return e.animate=function(t){return this.targetPosition&&(this.targetPosition=t),a.prototype.animate.apply(this,arguments)},e.targetPosition||(e.targetPosition={}),t.drawConnector()})}),s(t.chart,"afterHideOverlappingLabel",function(){t.points.forEach(function(t){t.connector&&t.dataLabel&&t.dataLabel.oldOpacity!==t.dataLabel.newOpacity&&t.alignConnector()})})},alignDataLabel:function(t,e,i,n){var a,o,s,r=this,l=r.chart.inverted,p=r.visibilityMap.filter(function(t){return t}),c=r.visiblePointsCount,d=p.indexOf(t),h=!d||d===c-1,u=r.options.dataLabels,y=t.userDLOptions||{},f=u.alternate?h?1.5:2:1,b=Math.floor(r.xAxis.len/c),x=e.padding;t.visible&&(a=Math.abs(y.x||t.options.dataLabels.x),s=l?{width:(o=2*(a-x)-t.itemHeight/2)+"px",textOverflow:e.width/o*e.height/2>b*f?"ellipsis":"none"}:{width:(y.width||u.width||b*f-2*x)+"px"},e.css(s),r.chart.styledMode||e.shadow(u.shadow)),g.prototype.alignDataLabel.apply(r,arguments)},processData:function(){var t,e=this,i=0;for(e.visibilityMap=e.getVisibilityMap(),e.visibilityMap.forEach(function(t){t&&i++}),e.visiblePointsCount=i,t=0;t<e.xData.length;t++)e.yData[t]=1;g.prototype.processData.call(this,arguments)},getXExtremes:function(t){var i=this,e=t.filter(function(t,e){return i.points[e].isValid()&&i.points[e].visible});return{min:l(e),max:r(e)}},generatePoints:function(){var i=this;g.prototype.generatePoints.apply(i),i.points.forEach(function(t,e){t.applyOptions({x:i.xData[e]},i.xData[e])})},getVisibilityMap:function(){return(this.data.length?this.data:this.userOptions.data).map(function(t){return!(!t||!1===t.visible||t.isNull)&&t})},distributeDL:function(){var e,i,n=this,a=n.options.dataLabels,o={},s=1,r=a.distance;n.points.forEach(function(t){t.visible&&!t.isNull&&(e=t.options,i=t.options.dataLabels,n.hasRendered||(t.userDLOptions=h({},i)),o[n.chart.inverted?"x":"y"]=a.alternate&&s%2?-r:r,e.dataLabels=h(o,t.userDLOptions),s++)})},markerAttribs:function(t,e){var i,n,a=this.options.marker,o=t.marker||{},s=o.symbol||a.symbol,r=y(o.width,a.width,this.closestPointRangePx),l=y(o.height,a.height),p=0;return this.xAxis.dateTime?c.line.prototype.markerAttribs.call(this,t,e):(e&&(i=a.states[e]||{},n=o.states&&o.states[e]||{},p=y(n.radius,i.radius,p+(i.radiusPlus||0))),t.hasImage=s&&0===s.indexOf("url"),{x:Math.floor(t.plotX)-r/2-p/2,y:t.plotY-l/2-p/2,width:r+p,height:l+p})},bindAxes:function(){var e=this;g.prototype.bindAxes.call(e),["xAxis","yAxis"].forEach(function(t){"xAxis"!==t||e[t].userOptions.type||(e[t].categories=e[t].hasNames=!0)})}},{init:function(){var t=n.prototype.init.apply(this,arguments);return t.name=y(t.name,"Event"),t.y=1,t},isValid:function(){return null!==this.options.y},setVisible:function(t,e){var i=this.series;e=y(e,i.options.ignoreHiddenPoint),c.pie.prototype.pointClass.prototype.setVisible.call(this,t,!1),i.processData(),e&&i.chart.redraw()},setState:function(){var t=g.prototype.pointClass.prototype.setState;this.isNull||t.apply(this,arguments)},getConnectorPath:function(){var t=this,e=t.series.chart,i=t.series.xAxis.len,n=e.inverted,a=n?"x2":"y2",o=t.dataLabel,s=o.targetPosition,r={x1:t.plotX,y1:t.plotY,x2:t.plotX,y2:d(s.y)?s.y:o.y},l=(o.alignAttr||o)[a[0]]<t.series.yAxis.len/2;return n&&(r={x1:t.plotY,y1:i-t.plotX,x2:s.x||o.x,y2:i-t.plotX}),l&&(r[a]+=o[n?"width":"height"]),u(r,function(t,e){r[e]-=(o.alignAttr||o)[e[0]]}),e.renderer.crispLine([["M",r.x1,r.y1],["L",r.x2,r.y2]],o.options.connectorWidth)},drawConnector:function(){var t=this,e=t.series;t.connector||(t.connector=e.chart.renderer.path(t.getConnectorPath()).attr({zIndex:-1}).add(t.dataLabel)),t.series.chart.isInsidePlot(t.dataLabel.x,t.dataLabel.y)&&t.alignConnector()},alignConnector:function(){var t=this,e=t.series,i=t.connector,n=t.dataLabel,a=t.dataLabel.options=h(e.options.dataLabels,t.options.dataLabels),o=t.series.chart,s=i.getBBox(),r={x:s.x+n.translateX,y:s.y+n.translateY};o.inverted?r.y-=n.options.connectorWidth/2:r.x+=n.options.connectorWidth/2,i[o.isInsidePlot(r.x,r.y)?"animate":"attr"]({d:t.getConnectorPath()}),e.chart.styledMode||i.attr({stroke:a.connectorColor||t.color,"stroke-width":a.connectorWidth,opacity:n[p(n.newOpacity)?"newOpacity":"opacity"]})}})}),i(e,"masters/modules/timeline.src.js",[],function(){})});