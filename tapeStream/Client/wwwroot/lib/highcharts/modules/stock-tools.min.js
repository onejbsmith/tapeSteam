!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/stock-tools",["highcharts","highcharts/modules/stock"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(g){function t(t,i,o,s){t.hasOwnProperty(i)||(t[i]=s.apply(null,o))}var i=g?g._modules:{};t(i,"Extensions/Annotations/Mixins/EventEmitterMixin.js",[i["Core/Globals.js"],i["Core/Utilities.js"]],function(e,t){var a=t.addEvent,r=t.fireEvent,n=t.objectEach,h=t.pick,i=t.removeEvent;return{addEvents:function(){function i(t){a(t,e.isTouchDevice?"touchstart":"mousedown",function(t){s.onMouseDown(t)})}var o,s=this;i(this.graphic.element),(s.labels||[]).forEach(function(t){t.options.useHTML&&t.graphic.text&&i(t.graphic.text.element)}),n(s.options.events,function(i,o){function t(t){"click"===o&&s.cancelClick||i.call(s,s.chart.pointer.normalize(t),s.target)}-1===(s.nonDOMEvents||[]).indexOf(o)?s.graphic.on(o,t):a(s,o,t)}),s.options.draggable&&(a(s,"drag",s.onDrag),!s.graphic.renderer.styledMode)&&(o={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[s.options.draggable]},s.graphic.css(o),(s.labels||[]).forEach(function(t){t.options.useHTML&&t.graphic.text&&t.graphic.text.css(o)})),s.isUpdating||r(s,"add")},removeDocEvents:function(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},onMouseDown:function(t){var i,o,s=this,n=s.chart.pointer;t.preventDefault&&t.preventDefault(),2!==t.button&&(i=(t=n.normalize(t)).chartX,o=t.chartY,s.cancelClick=!1,s.chart.hasDraggedAnnotation=!0,s.removeDrag=a(e.doc,e.isTouchDevice?"touchmove":"mousemove",function(t){s.hasDragged=!0,(t=n.normalize(t)).prevChartX=i,t.prevChartY=o,r(s,"drag",t),i=t.chartX,o=t.chartY}),s.removeMouseUp=a(e.doc,e.isTouchDevice?"touchend":"mouseup",function(t){s.cancelClick=s.hasDragged,s.hasDragged=!1,s.chart.hasDraggedAnnotation=!1,r(h(s.target,s),"afterUpdate"),s.onMouseUp(t)}))},onMouseUp:function(t){var i=this.chart;t=this.target||this;var o=i.options.annotations,i=i.annotations.indexOf(t);this.removeDocEvents(),o[i]=t.options},onDrag:function(t){var i;this.chart.isInsidePlot(t.chartX-this.chart.plotLeft,t.chartY-this.chart.plotTop)&&(i=this.mouseMoveToTranslation(t),"x"===this.options.draggable&&(i.y=0),"y"===this.options.draggable&&(i.x=0),this.points.length?this.translate(i.x,i.y):(this.shapes.forEach(function(t){t.translate(i.x,i.y)}),this.labels.forEach(function(t){t.translate(i.x,i.y)})),this.redraw(!1))},mouseMoveToRadians:function(t,i,o){var s=t.prevChartY-o,n=t.prevChartX-i;return o=t.chartY-o,t=t.chartX-i,this.chart.inverted&&(i=n,n=s,s=i,i=t,t=o,o=i),Math.atan2(o,t)-Math.atan2(s,n)},mouseMoveToTranslation:function(t){var i,o=t.chartX-t.prevChartX;return t=t.chartY-t.prevChartY,this.chart.inverted&&(i=t,t=o,o=i),{x:o,y:t}},mouseMoveToScale:function(t,i,o){return i=(t.chartX-i||1)/(t.prevChartX-i||1),t=(t.chartY-o||1)/(t.prevChartY-o||1),this.chart.inverted&&(o=t,t=i,i=o),{x:i,y:t}},destroy:function(){this.removeDocEvents(),i(this),this.hcEvents=null}}}),t(i,"Extensions/Annotations/ControlPoint.js",[i["Core/Utilities.js"],i["Extensions/Annotations/Mixins/EventEmitterMixin.js"]],function(t,n){var e=t.merge,a=t.pick;return i.prototype.setVisibility=function(t){this.graphic.attr("visibility",t?"visible":"hidden"),this.options.visible=t},i.prototype.render=function(){var t=this.chart,i=this.options;this.graphic=t.renderer.symbol(i.symbol,0,0,i.width,i.height).add(t.controlPointsGroup).css(i.style),this.setVisibility(i.visible),this.addEvents()},i.prototype.redraw=function(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))},i.prototype.destroy=function(){n.destroy.call(this),this.graphic&&(this.graphic=this.graphic.destroy()),this.options=this.target=this.chart=null},i.prototype.update=function(t){var i=this.chart,o=this.target,s=this.index;t=e(!0,this.options,t),this.destroy(),this.constructor(i,o,t,s),this.render(i.controlPointsGroup),this.redraw()},i;function i(t,i,o,s){this.addEvents=n.addEvents,this.graphic=void 0,this.mouseMoveToRadians=n.mouseMoveToRadians,this.mouseMoveToScale=n.mouseMoveToScale,this.mouseMoveToTranslation=n.mouseMoveToTranslation,this.onDrag=n.onDrag,this.onMouseDown=n.onMouseDown,this.onMouseUp=n.onMouseUp,this.removeDocEvents=n.removeDocEvents,this.nonDOMEvents=["drag"],this.chart=t,this.target=i,this.options=o,this.index=a(o.index,s)}}),t(i,"Extensions/Annotations/MockPoint.js",[i["Core/Globals.js"],i["Core/Utilities.js"],i["Core/Axis/Axis.js"]],function(s,t,n){var e=t.defined,a=t.fireEvent;return i.fromPoint=function(t){return new i(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})},i.pointToPixels=function(t,i){var o=t.series,s=o.chart,n=t.plotX,e=t.plotY;return s.inverted&&(e=t.mock?(n=t.plotY,t.plotX):(n=s.plotWidth-t.plotY,s.plotHeight-t.plotX)),o&&!i&&(n+=(t=o.getPlotBox()).translateX,e+=t.translateY),{x:n,y:e}},i.pointToOptions=function(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}},i.prototype.hasDynamicOptions=function(){return"function"==typeof this.options},i.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options},i.prototype.applyOptions=function(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()},i.prototype.setAxis=function(t,i){t=t[i+="Axis"];var o=this.series.chart;this.series[i]=t instanceof n?t:e(t)?o[i][t]||o.get(t):null},i.prototype.toAnchor=function(){var t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t},i.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}},i.prototype.isInsidePlot=function(){var t=this.plotX,i=this.plotY,o=this.series.xAxis,s=this.series.yAxis,n={x:t,y:i,isInsidePlot:!0};return o&&(n.isInsidePlot=e(t)&&0<=t&&t<=o.len),s&&(n.isInsidePlot=n.isInsidePlot&&e(i)&&0<=i&&i<=s.len),a(this.series.chart,"afterIsInsidePlot",n),n.isInsidePlot},i.prototype.refresh=function(){var t=(i=this.series).xAxis,i=i.yAxis,o=this.getOptions();t?(this.x=o.x,this.plotX=t.toPixels(o.x,!0)):(this.x=null,this.plotX=o.x),i?(this.y=o.y,this.plotY=i.toPixels(o.y,!0)):(this.y=null,this.plotY=o.y),this.isInside=this.isInsidePlot()},i.prototype.translate=function(t,i,o,s){this.hasDynamicOptions()||(this.plotX+=o,this.plotY+=s,this.refreshOptions())},i.prototype.scale=function(t,i,o,s){var n;this.hasDynamicOptions()||(n=this.plotY*s,this.plotX=(1-o)*t+this.plotX*o,this.plotY=(1-s)*i+n,this.refreshOptions())},i.prototype.rotate=function(t,i,o){var s,n,e;this.hasDynamicOptions()||(s=Math.cos(o),o=Math.sin(o),n=this.plotX,e=this.plotY,n-=t,e-=i,this.plotX=n*s-e*o+t,this.plotY=n*o+e*s+i,this.refreshOptions())},i.prototype.refreshOptions=function(){var t=(i=this.series).xAxis,i=i.yAxis;this.x=this.options.x=t?this.options.x=t.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=i?i.toValue(this.plotY,!0):this.plotY},i;function i(t,i,o){this.y=this.x=this.plotY=this.plotX=this.isInside=void 0,this.mock=!0,this.series={visible:!0,chart:t,getPlotBox:s.Series.prototype.getPlotBox},this.target=i||null,this.options=o,this.applyOptions(this.getOptions())}}),t(i,"Extensions/Annotations/Mixins/ControllableMixin.js",[i["Extensions/Annotations/ControlPoint.js"],i["Extensions/Annotations/MockPoint.js"],i["Core/Tooltip.js"],i["Core/Utilities.js"]],function(s,r,n,t){var o=t.isObject,e=t.isString,a=t.merge,i=t.splat;return{init:function(t,i,o){this.annotation=t,this.chart=t.chart,this.options=i,this.points=[],this.controlPoints=[],this.index=o,this.linkPoints(),this.addControlPoints()},attr:function(){this.graphic.attr.apply(this.graphic,arguments)},getPointsOptions:function(){var t=this.options;return t.points||t.point&&i(t.point)},attrsFromOptions:function(t){var i,o=this.constructor.attrsMap,s={},n=this.chart.styledMode;for(i in t){var e=o[i];!e||n&&-1!==["fill","stroke","stroke-width"].indexOf(e)||(s[e]=t[i])}return s},anchor:function(t){var i=t.series.getPlotBox(),o=t.series.chart,s=t.mock?t.toAnchor():n.prototype.getAnchor.call({chart:t.series.chart},t);return{relativePosition:s={x:s[0]+(this.options.x||0),y:s[1]+(this.options.y||0),height:s[2]||0,width:s[3]||0},absolutePosition:a(s,{x:s.x+(t.mock?i.translateX:o.plotLeft),y:s.y+(t.mock?i.translateY:o.plotTop)})}},point:function(t,i){return t&&t.series?t:(i&&null!==i.series||(o(t)?i=new r(this.chart,this,t):e(t)?i=this.chart.get(t)||null:"function"==typeof t&&(i=(i=t.call(i,this)).series?i:new r(this.chart,this,t))),i)},linkPoints:function(){for(var t=this.getPointsOptions(),i=this.points,o=t&&t.length||0,s=0;s<o;s++){var n=this.point(t[s],i[s]);if(!n)return void(i.length=0);n.mock&&n.refresh(),i[s]=n}return i},addControlPoints:function(){var o=this.options.controlPoints;(o||[]).forEach(function(t,i){(t=a(this.options.controlPointOptions,t)).index||(t.index=i),o[i]=t,this.controlPoints.push(new s(this.chart,this,t))},this)},shouldBeDrawn:function(){return!!this.points.length},render:function(t){this.controlPoints.forEach(function(t){t.render()})},redraw:function(i){this.controlPoints.forEach(function(t){t.redraw(i)})},transform:function(o,s,n,e,a){var t;this.chart.inverted&&(t=s,s=n,n=t),this.points.forEach(function(t,i){this.transformPoint(o,s,n,e,a,i)},this)},transformPoint:function(t,i,o,s,n,e){var a=this.points[e];a.mock||(a=this.points[e]=r.fromPoint(a)),a[t](i,o,s,n)},translate:function(t,i){this.transform("translate",null,null,t,i)},translatePoint:function(t,i,o){this.transformPoint("translate",null,null,t,i,o)},translateShape:function(t,i){var o=this.annotation.chart,s=this.annotation.userOptions,n=o.annotations.indexOf(this.annotation),o=o.options.annotations[n];this.translatePoint(t,i,0),o[this.collection][this.index].point=this.options.point,s[this.collection][this.index].point=this.options.point},rotate:function(t,i,o){this.transform("rotate",t,i,o)},scale:function(t,i,o,s){this.transform("scale",t,i,o,s)},setControlPointsVisibility:function(i){this.controlPoints.forEach(function(t){t.setVisibility(i)})},destroy:function(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.controlPoints.forEach(function(t){t.destroy()}),this.options=this.controlPoints=this.points=this.chart=null,this.annotation&&(this.annotation=null)},update:function(t){var i=this.annotation;t=a(!0,this.options,t);var o=this.graphic.parentGroup;this.destroy(),this.constructor(i,t),this.render(o),this.redraw()}}}),t(i,"Extensions/Annotations/Mixins/MarkerMixin.js",[i["Core/Chart/Chart.js"],i["Core/Renderer/SVG/SVGRenderer.js"],i["Core/Utilities.js"]],function(t,i,o){function s(i){return function(t){this.attr(i,"url(#"+t+")")}}var n=o.addEvent,c=o.defined,p=o.merge,e=o.objectEach,d=o.uniqueKey,a={arrow:{tagName:"marker",render:!1,id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10,children:[{tagName:"path",d:"M 0 0 L 10 5 L 0 10 Z",strokeWidth:0}]},"reverse-arrow":{tagName:"marker",render:!1,id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10,children:[{tagName:"path",d:"M 0 5 L 10 0 L 10 10 Z",strokeWidth:0}]}};return i.prototype.addMarker=function(t,i){var o={id:t},s={stroke:i.color||"none",fill:i.color||"rgba(0, 0, 0, 0.75)"};return o.children=i.children.map(function(t){return p(s,t)}),(i=this.definition(p(!0,{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"},i,o))).id=t,i},i={markerEndSetter:s("marker-end"),markerStartSetter:s("marker-start"),setItemMarkers:function(e){var a=e.options,r=e.chart,h=r.options.defs,t=a.fill,l=c(t)&&"none"!==t?t:a.stroke;["markerStart","markerEnd"].forEach(function(t){var i,o=a[t];if(o){for(i in h){var s=h[i];if(o===s.id&&"marker"===s.tagName){var n=s;break}}n&&(o=e[t]=r.renderer.addMarker((a.id||d())+"-"+n.id,p(n,{color:l})),e.attr(t,o.attr("id")))}})}},n(t,"afterGetContainer",function(){this.options.defs=p(a,this.options.defs||{}),e(this.options.defs,function(t){"marker"===t.tagName&&!1!==t.render&&this.renderer.addMarker(t.id,t)},this)}),i}),t(i,"Extensions/Annotations/Controllables/ControllablePath.js",[i["Extensions/Annotations/Mixins/ControllableMixin.js"],i["Core/Globals.js"],i["Extensions/Annotations/Mixins/MarkerMixin.js"],i["Core/Utilities.js"]],function(s,t,n,i){var e=i.extend,a="rgba(192,192,192,"+(t.svg?1e-4:.002)+")";return o.prototype.toD=function(){var t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;var i=(t=this.points).length,o=i,s=t[0],n=o&&this.anchor(s).absolutePosition,e=0,a=[];if(n)for(a.push(["M",n.x,n.y]);++e<i&&o;)o=(s=t[e]).command||"L",n=this.anchor(s).absolutePosition,"M"===o||"L"===o?a.push([o,n.x,n.y]):"Z"===o&&a.push([o]),o=s.series.visible;return o?this.chart.renderer.crispLine(a,this.graphic.strokeWidth()):null},o.prototype.shouldBeDrawn=function(){return s.shouldBeDrawn.call(this)||!!this.options.d},o.prototype.render=function(t){var i=this.options,o=this.attrsFromOptions(i);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(o).add(t),i.className&&this.graphic.addClass(i.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(t),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:a,fill:a,"stroke-width":this.graphic.strokeWidth()+2*i.snap}),s.render.call(this),e(this.graphic,{markerStartSetter:n.markerStartSetter,markerEndSetter:n.markerEndSetter}),this.setMarkers(this)},o.prototype.redraw=function(t){var i=this.toD(),o=t?"animate":"attr";i?(this.graphic[o]({d:i}),this.tracker[o]({d:i})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"})),this.graphic.placed=this.tracker.placed=!!i,s.redraw.call(this,t)},o.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},o;function o(t,i,o){this.addControlPoints=s.addControlPoints,this.anchor=s.anchor,this.attr=s.attr,this.attrsFromOptions=s.attrsFromOptions,this.destroy=s.destroy,this.getPointsOptions=s.getPointsOptions,this.init=s.init,this.linkPoints=s.linkPoints,this.point=s.point,this.rotate=s.rotate,this.scale=s.scale,this.setControlPointsVisibility=s.setControlPointsVisibility,this.setMarkers=n.setItemMarkers,this.transform=s.transform,this.transformPoint=s.transformPoint,this.translate=s.translate,this.translatePoint=s.translatePoint,this.translateShape=s.translateShape,this.update=s.update,this.type="path",this.init(t,i,o),this.collection="shapes"}}),t(i,"Extensions/Annotations/Controllables/ControllableRect.js",[i["Extensions/Annotations/Mixins/ControllableMixin.js"],i["Extensions/Annotations/Controllables/ControllablePath.js"],i["Core/Utilities.js"]],function(s,t,i){var o=i.merge;return n.prototype.render=function(t){var i=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(i).add(t),s.render.call(this)},n.prototype.redraw=function(t){var i=this.anchor(this.points[0]).absolutePosition;i?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=!!i,s.redraw.call(this,t)},n.attrsMap=o(t.attrsMap,{width:"width",height:"height"}),n;function n(t,i,o){this.addControlPoints=s.addControlPoints,this.anchor=s.anchor,this.attr=s.attr,this.attrsFromOptions=s.attrsFromOptions,this.destroy=s.destroy,this.getPointsOptions=s.getPointsOptions,this.init=s.init,this.linkPoints=s.linkPoints,this.point=s.point,this.rotate=s.rotate,this.scale=s.scale,this.setControlPointsVisibility=s.setControlPointsVisibility,this.shouldBeDrawn=s.shouldBeDrawn,this.transform=s.transform,this.transformPoint=s.transformPoint,this.translatePoint=s.translatePoint,this.translateShape=s.translateShape,this.update=s.update,this.type="rect",this.translate=s.translateShape,this.init(t,i,o),this.collection="shapes"}}),t(i,"Extensions/Annotations/Controllables/ControllableCircle.js",[i["Extensions/Annotations/Mixins/ControllableMixin.js"],i["Extensions/Annotations/Controllables/ControllablePath.js"],i["Core/Utilities.js"]],function(s,t,i){var o=i.merge;return n.prototype.render=function(t){var i=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(i).add(t),s.render.call(this)},n.prototype.redraw=function(t){var i=this.anchor(this.points[0]).absolutePosition;i?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!i,s.redraw.call(this,t)},n.prototype.setRadius=function(t){this.options.r=t},n.attrsMap=o(t.attrsMap,{r:"r"}),n;function n(t,i,o){this.addControlPoints=s.addControlPoints,this.anchor=s.anchor,this.attr=s.attr,this.attrsFromOptions=s.attrsFromOptions,this.destroy=s.destroy,this.getPointsOptions=s.getPointsOptions,this.init=s.init,this.linkPoints=s.linkPoints,this.point=s.point,this.rotate=s.rotate,this.scale=s.scale,this.setControlPointsVisibility=s.setControlPointsVisibility,this.shouldBeDrawn=s.shouldBeDrawn,this.transform=s.transform,this.transformPoint=s.transformPoint,this.translatePoint=s.translatePoint,this.translateShape=s.translateShape,this.update=s.update,this.type="circle",this.translate=s.translateShape,this.init(t,i,o),this.collection="shapes"}}),t(i,"Extensions/Annotations/Controllables/ControllableLabel.js",[i["Extensions/Annotations/Mixins/ControllableMixin.js"],i["Extensions/Annotations/MockPoint.js"],i["Core/Renderer/SVG/SVGRenderer.js"],i["Core/Tooltip.js"],i["Core/Utilities.js"]],function(e,h,t,l,i){var c=i.extend,a=i.format,p=i.isNumber,d=i.pick;function u(t,i,o){this.addControlPoints=e.addControlPoints,this.attr=e.attr,this.attrsFromOptions=e.attrsFromOptions,this.destroy=e.destroy,this.getPointsOptions=e.getPointsOptions,this.init=e.init,this.linkPoints=e.linkPoints,this.point=e.point,this.rotate=e.rotate,this.scale=e.scale,this.setControlPointsVisibility=e.setControlPointsVisibility,this.shouldBeDrawn=e.shouldBeDrawn,this.transform=e.transform,this.transformPoint=e.transformPoint,this.translateShape=e.translateShape,this.update=e.update,this.init(t,i,o),this.collection="labels"}return u.alignedPosition=function(t,i){var o,s,n=t.align,e=t.verticalAlign,a=(i.x||0)+(t.x||0),r=(i.y||0)+(t.y||0);return"right"===n?o=1:"center"===n&&(o=2),o&&(a+=(i.width-(t.width||0))/o),"bottom"===e?s=1:"middle"===e&&(s=2),s&&(r+=(i.height-(t.height||0))/s),{x:Math.round(a),y:Math.round(r)}},u.justifiedOptions=function(t,i,o,s){var n=o.align,e=o.verticalAlign,a=!i.box&&i.padding||0,r=i.getBBox();i={align:n,verticalAlign:e,x:o.x,y:o.y,width:i.width,height:i.height},o=s.x-t.plotLeft;var h=s.y-t.plotTop;return(s=o+a)<0&&("right"===n?i.align="left":i.x=-s),(s=o+r.width-a)>t.plotWidth&&("left"===n?i.align="right":i.x=t.plotWidth-s),(s=h+a)<0&&("bottom"===e?i.verticalAlign="top":i.y=-s),(s=h+r.height-a)>t.plotHeight&&("top"===e?i.verticalAlign="bottom":i.y=t.plotHeight-s),i},u.prototype.translatePoint=function(t,i){e.translatePoint.call(this,t,i,0)},u.prototype.translate=function(t,i){var o=this.annotation.chart,s=this.annotation.userOptions,n=o.annotations.indexOf(this.annotation),n=o.options.annotations[n];o.inverted&&(o=t,t=i,i=o),this.options.x+=t,this.options.y+=i,n[this.collection][this.index].x=this.options.x,n[this.collection][this.index].y=this.options.y,s[this.collection][this.index].x=this.options.x,s[this.collection][this.index].y=this.options.y},u.prototype.render=function(t){var i=this.options,o=this.attrsFromOptions(i),s=i.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,i.shape,null,null,i.useHTML,null,"annotation-label").attr(o).add(t),this.annotation.chart.styledMode||("contrast"===s.color&&(s.color=this.annotation.chart.renderer.getContrast(-1<u.shapesWithoutBackground.indexOf(i.shape)?"#FFFFFF":i.backgroundColor)),this.graphic.css(i.style).shadow(i.shadow)),i.className&&this.graphic.addClass(i.className),this.graphic.labelrank=i.labelrank,e.render.call(this)},u.prototype.redraw=function(t){var i=this.options,o=this.text||i.format||i.text,s=this.graphic,n=this.points[0];s.attr({text:o?a(o,n.getLabelConfig(),this.annotation.chart):i.formatter.call(n,this)}),i=this.anchor(n),(o=this.position(i))?((s.alignAttr=o).anchorX=i.absolutePosition.x,o.anchorY=i.absolutePosition.y,s[t?"animate":"attr"](o)):s.attr({x:0,y:-9999}),s.placed=!!o,e.redraw.call(this,t)},u.prototype.anchor=function(t){var i=e.anchor.apply(this,arguments),o=this.options.x||0,s=this.options.y||0;return i.absolutePosition.x-=o,i.absolutePosition.y-=s,i.relativePosition.x-=o,i.relativePosition.y-=s,i},u.prototype.position=function(t){var i,o=this.graphic,s=this.annotation.chart,n=this.points[0],e=this.options,a=t.absolutePosition,r=t.relativePosition;return(t=n.series.visible&&h.prototype.isInsidePlot.call(n))&&(e.distance?i=l.prototype.getPosition.call({chart:s,distance:d(e.distance,16)},o.width,o.height,{plotX:r.x,plotY:r.y,negative:n.negative,ttBelow:n.ttBelow,h:r.height||r.width}):e.positioner?i=e.positioner.call(this):(n={x:a.x,y:a.y,width:0,height:0},i=u.alignedPosition(c(e,{width:o.width,height:o.height}),n),"justify"===this.options.overflow&&(i=u.alignedPosition(u.justifiedOptions(s,o,e,i),n))),e.crop&&(e=i.x-s.plotLeft,n=i.y-s.plotTop,t=s.isInsidePlot(e,n)&&s.isInsidePlot(e+o.width,n+o.height))),t?i:null},u.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},u.shapesWithoutBackground=["connector"],i=u,t.prototype.symbols.connector=function(t,i,o,s,n){var e=n&&n.anchorX;n=n&&n.anchorY;var a,r,h=o/2;return p(e)&&p(n)&&(a=[["M",e,n]],(r=i-n)<0&&(r=-s-r),r<o&&(h=e<t+o/2?r:o-r),i+s<n?a.push(["L",t+h,i+s]):n<i?a.push(["L",t+h,i]):e<t?a.push(["L",t,i+s/2]):t+o<e&&a.push(["L",t+o,i+s/2])),a||[]},i}),t(i,"Extensions/Annotations/Controllables/ControllableImage.js",[i["Extensions/Annotations/Controllables/ControllableLabel.js"],i["Extensions/Annotations/Mixins/ControllableMixin.js"]],function(o,s){return t.prototype.render=function(t){var i=this.attrsFromOptions(this.options),o=this.options;this.graphic=this.annotation.chart.renderer.image(o.src,0,-9e9,o.width,o.height).attr(i).add(t),this.graphic.width=o.width,this.graphic.height=o.height,s.render.call(this)},t.prototype.redraw=function(t){var i=this.anchor(this.points[0]);(i=o.prototype.position.call(this,i))?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!i,s.redraw.call(this,t)},t.attrsMap={width:"width",height:"height",zIndex:"zIndex"},t;function t(t,i,o){this.addControlPoints=s.addControlPoints,this.anchor=s.anchor,this.attr=s.attr,this.attrsFromOptions=s.attrsFromOptions,this.destroy=s.destroy,this.getPointsOptions=s.getPointsOptions,this.init=s.init,this.linkPoints=s.linkPoints,this.point=s.point,this.rotate=s.rotate,this.scale=s.scale,this.setControlPointsVisibility=s.setControlPointsVisibility,this.shouldBeDrawn=s.shouldBeDrawn,this.transform=s.transform,this.transformPoint=s.transformPoint,this.translatePoint=s.translatePoint,this.translateShape=s.translateShape,this.update=s.update,this.type="image",this.translate=s.translateShape,this.init(t,i,o),this.collection="shapes"}}),t(i,"Extensions/Annotations/Annotations.js",[i["Core/Animation/AnimationUtilities.js"],i["Core/Chart/Chart.js"],i["Extensions/Annotations/Mixins/ControllableMixin.js"],i["Extensions/Annotations/Controllables/ControllableRect.js"],i["Extensions/Annotations/Controllables/ControllableCircle.js"],i["Extensions/Annotations/Controllables/ControllablePath.js"],i["Extensions/Annotations/Controllables/ControllableImage.js"],i["Extensions/Annotations/Controllables/ControllableLabel.js"],i["Extensions/Annotations/ControlPoint.js"],i["Extensions/Annotations/Mixins/EventEmitterMixin.js"],i["Core/Globals.js"],i["Extensions/Annotations/MockPoint.js"],i["Core/Pointer.js"],i["Core/Utilities.js"]],function(t,i,o,s,n,e,a,r,h,l,c,p,d,u){var g=t.getDeferredAnimation;t=i.prototype;var y=u.addEvent,f=u.defined,v=u.destroyObjectProperties,x=u.erase;i=u.extend;var m=u.find,b=u.fireEvent,A=u.merge,k=u.pick,C=u.splat;u=u.wrap;var w=(P.prototype.init=function(){var t=this.chart,i=this.options.animation;this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=g(t,i)},P.prototype.getLabelsAndShapesOptions=function(s,t){var i={};return["labels","shapes"].forEach(function(o){s[o]&&(i[o]=C(t[o]).map(function(t,i){return A(s[o][i],t)}))}),i},P.prototype.addShapes=function(){(this.options.shapes||[]).forEach(function(t,i){t=this.initShape(t,i),A(!0,this.options.shapes[i],t.options)},this)},P.prototype.addLabels=function(){(this.options.labels||[]).forEach(function(t,i){t=this.initLabel(t,i),A(!0,this.options.labels[i],t.options)},this)},P.prototype.addClipPaths=function(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))},P.prototype.setClipAxes=function(){var o=this.chart.xAxis,s=this.chart.yAxis,t=(this.options.labels||[]).concat(this.options.shapes||[]).reduce(function(t,i){return[o[i&&i.point&&i.point.xAxis]||t[0],s[i&&i.point&&i.point.yAxis]||t[1]]},[]);this.clipXAxis=t[0],this.clipYAxis=t[1]},P.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}},P.prototype.setLabelCollector=function(){var t=this;t.labelCollector=function(){return t.labels.reduce(function(t,i){return i.options.allowOverlap||t.push(i.graphic),t},[])},t.chart.labelCollectors.push(t.labelCollector)},P.prototype.setOptions=function(t){this.options=A(this.defaultOptions,t)},P.prototype.redraw=function(t){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t),o.redraw.call(this,t)},P.prototype.redrawItems=function(t,i){for(var o=t.length;o--;)this.redrawItem(t[o],i)},P.prototype.renderItems=function(t){for(var i=t.length;i--;)this.renderItem(t[i])},P.prototype.render=function(){var t=this.chart.renderer;this.graphic=t.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"visible":"hidden"}).add(),this.shapesGroup=t.g("annotation-shapes").add(this.graphic).clip(this.chart.plotBoxClip),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),o.render.call(this)},P.prototype.setVisibility=function(t){var i=this.options;t=k(t,!i.visible),this.graphic.attr("visibility",t?"visible":"hidden"),t||this.setControlPointsVisibility(!1),i.visible=t},P.prototype.setControlPointsVisibility=function(i){function t(t){t.setControlPointsVisibility(i)}o.setControlPointsVisibility.call(this,i),this.shapes.forEach(t),this.labels.forEach(t)},P.prototype.destroy=function(){function t(t){t.destroy()}var i=this.chart;this.labels.forEach(t),this.shapes.forEach(t),this.clipYAxis=this.clipXAxis=null,x(i.labelCollectors,this.labelCollector),l.destroy.call(this),o.destroy.call(this),v(this,i)},P.prototype.remove=function(){return this.chart.removeAnnotation(this)},P.prototype.update=function(t,i){var o=this.chart,s=this.getLabelsAndShapesOptions(this.userOptions,t),n=o.annotations.indexOf(this);(t=A(!0,this.userOptions,t)).labels=s.labels,t.shapes=s.shapes,this.destroy(),this.constructor(o,t),o.options.annotations[n]=t,this.isUpdating=!0,k(i,!0)&&o.redraw(),b(this,"afterUpdate"),this.isUpdating=!1},P.prototype.initShape=function(t,i){return t=A(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},t),(i=new P.shapesMap[t.type](this,t,i)).itemType="shape",this.shapes.push(i),i},P.prototype.initLabel=function(t,i){return t=A(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},t),(i=new r(this,t,i)).itemType="label",this.labels.push(i),i},P.prototype.redrawItem=function(t,i){t.linkPoints(),t.shouldBeDrawn()?(t.graphic||this.renderItem(t),t.redraw(k(i,!0)&&t.graphic.placed),t.points.length&&this.adjustVisibility(t)):this.destroyItem(t)},P.prototype.adjustVisibility=function(t){var i=!1,o=t.graphic;t.points.forEach(function(t){!1!==t.series.visible&&!1!==t.visible&&(i=!0)}),i?"hidden"===o.visibility&&o.show():o.hide()},P.prototype.destroyItem=function(t){x(this[t.itemType+"s"],t),t.destroy()},P.prototype.renderItem=function(t){t.render("label"===t.itemType?this.labelsGroup:this.shapesGroup)},P.ControlPoint=h,P.MockPoint=p,P.shapesMap={rect:s,circle:n,path:e,image:a},P.types={},P);function P(t,i){this.annotation=void 0,this.coll="annotations",this.shapesGroup=this.labelsGroup=this.labelCollector=this.group=this.graphic=this.animationConfig=this.collection=void 0,this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.labels=[],this.shapes=[],this.options=A(this.defaultOptions,i),this.userOptions=i,i=this.getLabelsAndShapesOptions(this.options,i),this.options.labels=i.labels,this.options.shapes=i.shapes,this.init(t,this.options)}return A(!0,w.prototype,o,l,A(w.prototype,{nonDOMEvents:["add","afterUpdate","drag","remove"],defaultOptions:{visible:!0,animation:{},draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"black",borderRadius:3,borderWidth:1,className:"",crop:!1,formatter:function(){return f(this.y)?this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{symbol:"circle",width:10,height:10,style:{stroke:"black","stroke-width":2,fill:"white"},visible:!1,events:{}},events:{},zIndex:6}})),c.extendAnnotation=function(t,i,o,s){i=i||w,A(!0,t.prototype,i.prototype,o),t.prototype.defaultOptions=A(t.prototype.defaultOptions,s||{})},i(t,{initAnnotation:function(t){return t=new(w.types[t.type]||w)(this,t),this.annotations.push(t),t},addAnnotation:function(t,i){return t=this.initAnnotation(t),this.options.annotations.push(t.options),k(i,!0)&&(t.redraw(),t.graphic.attr({opacity:1})),t},removeAnnotation:function(i){var t=this.annotations,o="annotations"===i.coll?i:m(t,function(t){return t.options.id===i});o&&(b(o,"remove"),x(this.options.annotations,o.options),x(t,o),o.destroy())},drawAnnotations:function(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach(function(t){t.redraw(),t.graphic.animate({opacity:1},t.animationConfig)})}}),t.collectionsWithUpdate.push("annotations"),t.collectionsWithInit.annotations=[t.addAnnotation],t.callbacks.push(function(v){v.annotations=[],v.options.annotations||(v.options.annotations=[]),v.plotBoxClip=this.renderer.clipRect(this.plotBox),v.controlPointsGroup=v.renderer.g("control-points").attr({zIndex:99}).clip(v.plotBoxClip).add(),v.options.annotations.forEach(function(t,i){t=v.initAnnotation(t),v.options.annotations[i]=t.options}),v.drawAnnotations(),y(v,"redraw",v.drawAnnotations),y(v,"destroy",function(){v.plotBoxClip.destroy(),v.controlPointsGroup.destroy()}),y(v,"exportData",function(r){var t,i,o,s,n,e,a,h=v.annotations,l=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,c=!r.dataRows[1].xValues,p=null===(t=null===(d=v.options.lang)||void 0===d?void 0:d.exportData)||void 0===t?void 0:t.annotationHeader,d=function(t){if(l){var i=l(t);if(!1!==i)return i}return i=p+" "+t,c?{columnTitle:i,topLevelColumnTitle:i}:i},u=r.dataRows[0].length,g=null===(s=null===(o=null===(i=v.options.exporting)||void 0===i?void 0:i.csv)||void 0===o?void 0:o.annotations)||void 0===s?void 0:s.itemDelimiter,y=null===(a=null===(e=null===(n=v.options.exporting)||void 0===n?void 0:n.csv)||void 0===e?void 0:e.annotations)||void 0===a?void 0:a.join;h.forEach(function(t){t.options.labelOptions.includeInDataExport&&t.labels.forEach(function(t){var a;t.options.text&&(a=t.options.text,t.points.forEach(function(t){var o=t.x,s=t.series.xAxis?t.series.xAxis.options.index:-1,n=!1;if(-1===s){t=r.dataRows[0].length;for(var i=Array(t),e=0;e<t;++e)i[e]="";i.push(a),i.xValues=[],i.xValues[s]=o,r.dataRows.push(i),n=!0}if(n||r.dataRows.forEach(function(t,i){!n&&t.xValues&&void 0!==s&&o===t.xValues[s]&&(y&&t.length>u?t[t.length-1]+=g+a:t.push(a),n=!0)}),!n){for(t=r.dataRows[0].length,i=Array(t),e=0;e<t;++e)i[e]="";i[0]=o,i.push(a),i.xValues=[],void 0!==s&&(i.xValues[s]=o),r.dataRows.push(i)}}))})});var f=0;for(r.dataRows.forEach(function(t){f=Math.max(f,t.length)}),i=f-r.dataRows[0].length,o=0;o<i;o++)s=d(o+1),c?(r.dataRows[0].push(s.topLevelColumnTitle),r.dataRows[1].push(s.columnTitle)):r.dataRows[0].push(s)})}),u(d.prototype,"onContainerMouseDown",function(t){this.chart.hasDraggedAnnotation||t.apply(this,Array.prototype.slice.call(arguments,1))}),c.Annotation=w}),t(i,"Mixins/Navigation.js",[],function(){return{initUpdate:function(t){t.navigation||(t.navigation={updates:[],update:function(i,o){this.updates.forEach(function(t){t.update.call(t.context,i,o)})}})},addUpdate:function(t,i){i.navigation||this.initUpdate(i),i.navigation.updates.push({update:t,context:i})}}}),t(i,"Extensions/Annotations/NavigationBindings.js",[i["Extensions/Annotations/Annotations.js"],i["Core/Chart/Chart.js"],i["Mixins/Navigation.js"],i["Core/Globals.js"],i["Core/Utilities.js"]],function(t,i,o,n,s){function e(t){var n=t.prototype.defaultOptions.events&&t.prototype.defaultOptions.events.click;g(!0,t.prototype.defaultOptions.events,{click:function(t){var o=this,s=o.chart.navigationBindings,i=s.activeAnnotation;n&&n.call(o,t),i!==o?(s.deselectAnnotation(),(s.activeAnnotation=o).setControlPointsVisibility(!0),h(s,"showPopup",{annotation:o,formType:"annotation-toolbar",options:s.annotationToFields(o),onSubmit:function(t){var i={};"remove"===t.actionType?(s.activeAnnotation=!1,s.chart.removeAnnotation(o)):(s.fieldsToOptions(t.fields,i),s.deselectAnnotation(),t=i.typeOptions,"measure"===o.options.type&&(t.crosshairY.enabled=0!==t.crosshairY.strokeWidth,t.crosshairX.enabled=0!==t.crosshairX.strokeWidth),o.update(i))}})):(s.deselectAnnotation(),h(s,"closePopup")),t.activeAnnotation=!0}})}var a=s.addEvent,r=s.attr,p=s.format,h=s.fireEvent,d=s.isArray,l=s.isFunction,c=s.isNumber,u=s.isObject,g=s.merge,y=s.objectEach,f=s.pick;s=s.setOptions;var v=n.doc,x=n.win,m=(b.prototype.initEvents=function(){var s=this,i=s.chart,t=s.container,o=s.options;s.boundClassNames={},y(o.bindings||{},function(t){s.boundClassNames[t.className]=t}),[].forEach.call(t,function(o){s.eventsToUnbind.push(a(o,"click",function(t){var i=s.getButtonEvents(o,t);i&&s.bindingsButtonClick(i.button,i.events,t)}))}),y(o.events||{},function(t,i){l(t)&&s.eventsToUnbind.push(a(s,i,t))}),s.eventsToUnbind.push(a(i.container,"click",function(t){!i.cancelClick&&i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&s.bindingsChartClick(this,t)})),s.eventsToUnbind.push(a(i.container,n.isTouchDevice?"touchmove":"mousemove",function(t){s.bindingsContainerMouseMove(this,t)}))},b.prototype.initUpdate=function(){var i=this;o.addUpdate(function(t){i.update(t)},this.chart)},b.prototype.bindingsButtonClick=function(t,i,o){var s=this.chart;this.selectedButtonElement&&(h(this,"deselectButton",{button:this.selectedButtonElement}),this.nextEvent&&(this.currentUserDetails&&"annotations"===this.currentUserDetails.coll&&s.removeAnnotation(this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1)),this.selectedButton=i,this.selectedButtonElement=t,h(this,"selectButton",{button:t}),i.init&&i.init.call(this,t,o),(i.start||i.steps)&&s.renderer.boxWrapper.addClass("highcharts-draw-mode")},b.prototype.bindingsChartClick=function(t,i){t=this.chart;var o,s=this.selectedButton;if(t=t.renderer.boxWrapper,o=this.activeAnnotation&&!i.activeAnnotation&&i.target.parentNode){t:{o=i.target;var n=x.Element.prototype,e=n.matches||n.msMatchesSelector||n.webkitMatchesSelector,a=null;if(n.closest)a=n.closest.call(o,".highcharts-popup");else do{if(e.call(o,".highcharts-popup"))break t;o=o.parentElement||o.parentNode}while(null!==o&&1===o.nodeType);o=a}o=!o}o&&(h(this,"closePopup"),this.deselectAnnotation()),s&&s.start&&(this.nextEvent?(this.nextEvent(i,this.currentUserDetails),this.steps&&(this.stepIndex++,s.steps[this.stepIndex]?this.mouseMoveEvent=this.nextEvent=s.steps[this.stepIndex]:(h(this,"deselectButton",{button:this.selectedButtonElement}),t.removeClass("highcharts-draw-mode"),s.end&&s.end.call(this,i,this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=null))):(this.currentUserDetails=s.start.call(this,i),s.steps?(this.stepIndex=0,this.steps=!0,this.mouseMoveEvent=this.nextEvent=s.steps[this.stepIndex]):(h(this,"deselectButton",{button:this.selectedButtonElement}),t.removeClass("highcharts-draw-mode"),this.steps=!1,this.selectedButton=null,s.end&&s.end.call(this,i,this.currentUserDetails))))},b.prototype.bindingsContainerMouseMove=function(t,i){this.mouseMoveEvent&&this.mouseMoveEvent(i,this.currentUserDetails)},b.prototype.fieldsToOptions=function(t,o){return y(t,function(s,t){var i=parseFloat(s),n=t.split("."),e=o,a=n.length-1;!c(i)||s.match(/px/g)||t.match(/format/g)||(s=i),""!==s&&"undefined"!==s&&n.forEach(function(t,i){var o=f(n[i+1],"");a===i?e[t]=s:(e[t]||(e[t]=o.match(/\d/g)?[]:{}),e=e[t])})}),o},b.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)},b.prototype.annotationToFields=function(i){function a(t,s,o,n){var e;o&&t&&-1===l.indexOf(s)&&(0<=(o.indexOf&&o.indexOf(s))||o[s]||!0===o)&&(d(t)?(n[s]=[],t.forEach(function(t,o){u(t)?(n[s][o]={},y(t,function(t,i){a(t,i,r[s],n[s][o])})):a(t,0,r[s],n[s])})):u(t)?(e={},d(n)?(n.push(e),e[s]={},e=e[s]):n[s]=e,y(t,function(t,i){a(t,i,0===s?o:r[s],e)})):"format"===s?n[s]=[p(t,i.labels[0].points[0]).toString(),"text"]:d(n)?n.push([t,h(t)]):n[s]=[t,h(t)])}var s=i.options,n=b.annotationsEditable,r=n.nestedOptions,h=this.utils.getFieldType,e=f(s.type,s.shapes&&s.shapes[0]&&s.shapes[0].type,s.labels&&s.labels[0]&&s.labels[0].itemType,"label"),l=b.annotationsNonEditable[s.langKey]||[],c={langKey:s.langKey,type:e};return y(s,function(t,o){"typeOptions"===o?(c[o]={},y(s[o],function(t,i){a(t,i,r,c[o])})):a(t,o,n[e],c)}),c},b.prototype.getClickedClassNames=function(t,i){var o,s=i.target;for(i=[];s&&((o=r(s,"class"))&&(i=i.concat(o.split(" ").map(function(t){return[t,s]}))),(s=s.parentNode)!==t););return i},b.prototype.getButtonEvents=function(t,i){var o,s=this;return this.getClickedClassNames(t,i).forEach(function(t){s.boundClassNames[t[0]]&&!o&&(o={events:s.boundClassNames[t[0]],button:t[1]})}),o},b.prototype.update=function(t){this.options=g(!0,this.options,t),this.removeEvents(),this.initEvents()},b.prototype.removeEvents=function(){this.eventsToUnbind.forEach(function(t){t()})},b.prototype.destroy=function(){this.removeEvents()},b.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},b.annotationsNonEditable={rectangle:["crosshairX","crosshairY","label"]},b);function b(t,i){this.selectedButton=this.boundClassNames=void 0,this.chart=t,this.options=i,this.eventsToUnbind=[],this.container=v.getElementsByClassName(this.options.bindingsClassName||"")}return m.prototype.utils={updateRectSize:function(t,i){var o=i.chart,s=i.options.typeOptions,n=o.pointer.getCoordinates(t);t=n.xAxis[0].value-s.point.x,s=s.point.y-n.yAxis[0].value,i.update({typeOptions:{background:{width:o.inverted?s:t,height:o.inverted?t:s}}})},getFieldType:function(t){return{string:"text",number:"number",boolean:"checkbox"}[typeof t]}},i.prototype.initNavigationBindings=function(){var t=this.options;t&&t.navigation&&t.navigation.bindings&&(this.navigationBindings=new m(this,t.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())},a(i,"load",function(){this.initNavigationBindings()}),a(i,"destroy",function(){this.navigationBindings&&this.navigationBindings.destroy()}),a(m,"deselectButton",function(){this.selectedButtonElement=null}),a(t,"remove",function(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()}),n.Annotation&&(e(t),y(t.types,function(t){e(t)})),s({lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return this.chart.addAnnotation(g({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{xAxis:0,yAxis:0,x:t.xAxis[0].value,y:t.yAxis[0].value},r:5}]},i.annotationsOptions,i.bindings.circleAnnotation.annotationsOptions))},steps:[function(t,i){var o=i.options.shapes[0].point,s=this.chart.xAxis[0].toPixels(o.x),o=this.chart.yAxis[0].toPixels(o.y),n=this.chart.inverted;i.update({shapes:[{r:Math.max(Math.sqrt(Math.pow(n?o-t.chartX:s-t.chartX,2)+Math.pow(n?s-t.chartY:o-t.chartY,2)),5)}]})}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(t){var i=this.chart.pointer.getCoordinates(t);t=this.chart.options.navigation;var o=i.xAxis[0].value,i=i.yAxis[0].value;return this.chart.addAnnotation(g({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:0,yAxis:0,x:o,y:i},{xAxis:0,yAxis:0,x:o,y:i},{xAxis:0,yAxis:0,x:o,y:i},{xAxis:0,yAxis:0,x:o,y:i}]}]},t.annotationsOptions,t.bindings.rectangleAnnotation.annotationsOptions))},steps:[function(t,i){var o=i.options.shapes[0].points,s=this.chart.pointer.getCoordinates(t);t=s.xAxis[0].value,s=s.yAxis[0].value,o[1].x=t,o[2].x=t,o[2].y=s,o[3].y=s,i.update({shapes:[{points:o}]})}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return this.chart.addAnnotation(g({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}"},labels:[{point:{xAxis:0,yAxis:0,x:t.xAxis[0].value,y:t.yAxis[0].value},overflow:"none",crop:!0}]},i.annotationsOptions,i.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}),m}),t(i,"Stock/StockToolsBindings.js",[i["Core/Globals.js"],i["Extensions/Annotations/NavigationBindings.js"],i["Core/Utilities.js"]],function(a,t,i){var r=i.correctFloat,h=i.defined,o=i.extend,l=i.fireEvent,c=i.getOptions,p=i.isNumber,s=i.merge,n=i.pick,e=i.setOptions,d=i.uniqueKey,u=t.prototype.utils;u.addFlagFromForm=function(a){return function(t){var o=this,i=o.chart,s=i.stockTools,n=u.getFieldType,e={type:"flags",onSeries:(t=u.attractToPoint(t,i)).series.id,shape:a,data:[{x:t.x,y:t.y}],point:{events:{click:function(){var i=this,t=i.options;l(o,"showPopup",{point:i,formType:"annotation-toolbar",options:{langKey:"flags",type:"flags",title:[t.title,n(t.title)],name:[t.name,n(t.name)]},onSubmit:function(t){"remove"===t.actionType?i.remove():i.update(o.fieldsToOptions(t.fields,{}))}})}}}};s&&s.guiEnabled||i.addSeries(e),l(o,"showPopup",{formType:"flag",options:{langKey:"flags",type:"flags",title:["A",n("A")],name:["Flag A",n("Flag A")]},onSubmit:function(t){o.fieldsToOptions(t.fields,e.data[0]),i.addSeries(e)}})}},u.manageIndicators=function(t){var i,o,s,n=this.chart,e={linkedTo:t.linkedTo,type:t.type},a="ad atr cci cmf macd mfi roc rsi ao aroon aroonoscillator trix apo dpo ppo natr williamsr stochastic slowstochastic linearRegression linearRegressionSlope linearRegressionIntercept linearRegressionAngle".split(" ");"edit"===t.actionType?(this.fieldsToOptions(t.fields,e),(t=n.get(t.seriesId))&&t.update(e,!1)):"remove"===t.actionType?(t=n.get(t.seriesId))&&(i=t.yAxis,t.linkedSeries&&t.linkedSeries.forEach(function(t){t.remove(!1)}),t.remove(!1),0<=a.indexOf(t.type)&&(i.remove(!1),this.resizeYAxes())):(e.id=d(),this.fieldsToOptions(t.fields,e),o=n.get(e.linkedTo),s=c().plotOptions,void 0!==o&&o instanceof g.Series&&"sum"===o.getDGApproximation()&&!h(s&&s[e.type]&&(null===(i=s.dataGrouping)||void 0===i?void 0:i.approximation))&&(e.dataGrouping={approximation:"sum"}),0<=a.indexOf(t.type)?(i=n.addAxis({id:d(),offset:0,opposite:!0,title:{text:""},tickPixelInterval:40,showLastLabel:!1,labels:{align:"left",y:-2}},!1,!1),e.yAxis=i.options.id,this.resizeYAxes()):e.yAxis=n.get(t.linkedTo).options.yAxis,0<=["ad","cmf","mfi","vbp","vwap"].indexOf(t.type)&&(e.params.volumeSeriesID=n.series.filter(function(t){return"column"===t.options.type})[0].options.id),n.addSeries(e,!1)),l(this,"deselectButton",{button:this.selectedButtonElement}),n.redraw()},u.updateHeight=function(t,i){i.update({typeOptions:{height:this.chart.pointer.getCoordinates(t).yAxis[0].value-i.options.typeOptions.points[1].y}})},u.attractToPoint=function(t,i){var o=(t=i.pointer.getCoordinates(t)).xAxis[0].value;t=t.yAxis[0].value;var s,n=Number.MAX_VALUE;return i.series.forEach(function(t){t.points.forEach(function(t){t&&n>Math.abs(t.x-o)&&(n=Math.abs(t.x-o),s=t)})}),{x:s.x,y:s.y,below:t<s.y,series:s.series,xAxis:s.series.xAxis.index||0,yAxis:s.series.yAxis.index||0}},u.isNotNavigatorYAxis=function(t){return"highcharts-navigator-yaxis"!==t.userOptions.className},u.updateNthPoint=function(e){return function(t,i){var o=i.options.typeOptions,s=(t=this.chart.pointer.getCoordinates(t)).xAxis[0].value,n=t.yAxis[0].value;o.points.forEach(function(t,i){e<=i&&(t.x=s,t.y=n)}),i.update({typeOptions:{points:o.points}})}},o(t.prototype,{getYAxisPositions:function(t,o,s){function n(t){return h(t)&&!p(t)&&t.match("%")}var e=0;return(t=t.map(function(t){var i=n(t.options.height)?parseFloat(t.options.height)/100:t.height/o;return t=n(t.options.top)?parseFloat(t.options.top)/100:r(t.top-t.chart.plotTop)/o,p(i)||(i=s/100),e=r(e+i),{height:100*i,top:100*t}})).allAxesHeight=e,t},getYAxisResizers:function(o){var s=[];return o.forEach(function(t,i){t=o[i+1],s[i]=t?{enabled:!0,controlledAxis:{next:[n(t.options.id,t.options.index)]}}:{enabled:!1}}),s},resizeYAxes:function(t){t=t||20;var o=(s=this.chart).yAxis.filter(u.isNotNavigatorYAxis),i=o.length,s=this.getYAxisPositions(o,s.plotHeight,t),n=this.getYAxisResizers(o),e=s.allAxesHeight,a=t;1<e?(s=i<6?(s[0].height=r(s[0].height-a),this.recalculateYAxisPositions(s,a)):(t=100/i,this.recalculateYAxisPositions(s,t/(i-1),!0,-1)))[i-1]={top:r(100-t),height:t}:(a=100*r(1-e),s=i<5?(s[0].height=r(s[0].height+a),this.recalculateYAxisPositions(s,a)):this.recalculateYAxisPositions(s,a/i,!0,1)),s.forEach(function(t,i){o[i].update({height:t.height+"%",top:t.top+"%",resize:n[i]},!1)})},recalculateYAxisPositions:function(o,s,n,e){return o.forEach(function(t,i){i=o[i-1],t.top=i?r(i.height+i.top):0,n&&(t.height=r(t.height+e*s))}),o}}),e({navigation:{bindings:i={segment:{className:"highcharts-segment",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"segment",type:"crookedLine",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.segment.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1)]},arrowSegment:{className:"highcharts-arrow-segment",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"arrowSegment",type:"crookedLine",typeOptions:{line:{markerEnd:"arrow"},points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.arrowSegment.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1)]},ray:{className:"highcharts-ray",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"ray",type:"crookedLine",typeOptions:{type:"ray",points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.ray.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1)]},arrowRay:{className:"highcharts-arrow-ray",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"arrowRay",type:"infinityLine",typeOptions:{type:"ray",line:{markerEnd:"arrow"},points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.arrowRay.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1)]},infinityLine:{className:"highcharts-infinity-line",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"infinityLine",type:"infinityLine",typeOptions:{type:"line",points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.infinityLine.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1)]},arrowInfinityLine:{className:"highcharts-arrow-infinity-line",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"arrowInfinityLine",type:"infinityLine",typeOptions:{type:"line",line:{markerEnd:"arrow"},points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.arrowInfinityLine.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1)]},horizontalLine:{className:"highcharts-horizontal-line",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;t=s({langKey:"horizontalLine",type:"infinityLine",draggable:"y",typeOptions:{type:"horizontalLine",points:[{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.horizontalLine.annotationsOptions),this.chart.addAnnotation(t)}},verticalLine:{className:"highcharts-vertical-line",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;t=s({langKey:"verticalLine",type:"infinityLine",draggable:"x",typeOptions:{type:"verticalLine",points:[{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.verticalLine.annotationsOptions),this.chart.addAnnotation(t)}},crooked3:{className:"highcharts-crooked3",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"crooked3",type:"crookedLine",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.crooked3.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1),u.updateNthPoint(2)]},crooked5:{className:"highcharts-crooked5",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"crookedLine",type:"crookedLine",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.crooked5.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1),u.updateNthPoint(2),u.updateNthPoint(3),u.updateNthPoint(4)]},elliott3:{className:"highcharts-elliott3",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"elliott3",type:"elliottWave",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]},labelOptions:{style:{color:"#666666"}}},i.annotationsOptions,i.bindings.elliott3.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1),u.updateNthPoint(2),u.updateNthPoint(3)]},elliott5:{className:"highcharts-elliott5",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"elliott5",type:"elliottWave",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]},labelOptions:{style:{color:"#666666"}}},i.annotationsOptions,i.bindings.elliott5.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1),u.updateNthPoint(2),u.updateNthPoint(3),u.updateNthPoint(4),u.updateNthPoint(5)]},measureX:{className:"highcharts-measure-x",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"measure",type:"measure",typeOptions:{selectType:"x",point:{x:t.xAxis[0].value,y:t.yAxis[0].value,xAxis:0,yAxis:0},crosshairX:{strokeWidth:1,stroke:"#000000"},crosshairY:{enabled:!1,strokeWidth:0,stroke:"#000000"},background:{width:0,height:0,strokeWidth:0,stroke:"#ffffff"}},labelOptions:{style:{color:"#666666"}}},i.annotationsOptions,i.bindings.measureX.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateRectSize]},measureY:{className:"highcharts-measure-y",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"measure",type:"measure",typeOptions:{selectType:"y",point:{x:t.xAxis[0].value,y:t.yAxis[0].value,xAxis:0,yAxis:0},crosshairX:{enabled:!1,strokeWidth:0,stroke:"#000000"},crosshairY:{strokeWidth:1,stroke:"#000000"},background:{width:0,height:0,strokeWidth:0,stroke:"#ffffff"}},labelOptions:{style:{color:"#666666"}}},i.annotationsOptions,i.bindings.measureY.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateRectSize]},measureXY:{className:"highcharts-measure-xy",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"measure",type:"measure",typeOptions:{selectType:"xy",point:{x:t.xAxis[0].value,y:t.yAxis[0].value,xAxis:0,yAxis:0},background:{width:0,height:0,strokeWidth:10},crosshairX:{strokeWidth:1,stroke:"#000000"},crosshairY:{strokeWidth:1,stroke:"#000000"}},labelOptions:{style:{color:"#666666"}}},i.annotationsOptions,i.bindings.measureXY.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateRectSize]},fibonacci:{className:"highcharts-fibonacci",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"fibonacci",type:"fibonacci",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]},labelOptions:{style:{color:"#666666"}}},i.annotationsOptions,i.bindings.fibonacci.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1),u.updateHeight]},parallelChannel:{className:"highcharts-parallel-channel",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"parallelChannel",type:"tunnel",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}]}},i.annotationsOptions,i.bindings.parallelChannel.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1),u.updateHeight]},pitchfork:{className:"highcharts-pitchfork",start:function(t){t=this.chart.pointer.getCoordinates(t);var i=this.chart.options.navigation;return t=s({langKey:"pitchfork",type:"pitchfork",typeOptions:{points:[{x:t.xAxis[0].value,y:t.yAxis[0].value,controlPoint:{style:{fill:"red"}}},{x:t.xAxis[0].value,y:t.yAxis[0].value},{x:t.xAxis[0].value,y:t.yAxis[0].value}],innerBackground:{fill:"rgba(100, 170, 255, 0.8)"}},shapeOptions:{strokeWidth:2}},i.annotationsOptions,i.bindings.pitchfork.annotationsOptions),this.chart.addAnnotation(t)},steps:[u.updateNthPoint(1),u.updateNthPoint(2)]},verticalCounter:{className:"highcharts-vertical-counter",start:function(t){t=u.attractToPoint(t,this.chart);var i=this.chart.options.navigation,o=h(this.verticalCounter)?this.verticalCounter:0;t=s({langKey:"verticalCounter",type:"verticalLine",typeOptions:{point:{x:t.x,y:t.y,xAxis:t.xAxis,yAxis:t.yAxis},label:{offset:t.below?40:-40,text:o.toString()}},labelOptions:{style:{color:"#666666",fontSize:"11px"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},i.annotationsOptions,i.bindings.verticalCounter.annotationsOptions),(t=this.chart.addAnnotation(t)).options.events.click.call(t,{})}},verticalLabel:{className:"highcharts-vertical-label",start:function(t){t=u.attractToPoint(t,this.chart);var i=this.chart.options.navigation;t=s({langKey:"verticalLabel",type:"verticalLine",typeOptions:{point:{x:t.x,y:t.y,xAxis:t.xAxis,yAxis:t.yAxis},label:{offset:t.below?40:-40}},labelOptions:{style:{color:"#666666",fontSize:"11px"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},i.annotationsOptions,i.bindings.verticalLabel.annotationsOptions),(t=this.chart.addAnnotation(t)).options.events.click.call(t,{})}},verticalArrow:{className:"highcharts-vertical-arrow",start:function(t){t=u.attractToPoint(t,this.chart);var i=this.chart.options.navigation;t=s({langKey:"verticalArrow",type:"verticalLine",typeOptions:{point:{x:t.x,y:t.y,xAxis:t.xAxis,yAxis:t.yAxis},label:{offset:t.below?40:-40,format:" "},connector:{fill:"none",stroke:t.below?"red":"green"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},i.annotationsOptions,i.bindings.verticalArrow.annotationsOptions),(t=this.chart.addAnnotation(t)).options.events.click.call(t,{})}},flagCirclepin:{className:"highcharts-flag-circlepin",start:u.addFlagFromForm("circlepin")},flagDiamondpin:{className:"highcharts-flag-diamondpin",start:u.addFlagFromForm("flag")},flagSquarepin:{className:"highcharts-flag-squarepin",start:u.addFlagFromForm("squarepin")},flagSimplepin:{className:"highcharts-flag-simplepin",start:u.addFlagFromForm("nopin")},zoomX:{className:"highcharts-zoom-x",init:function(t){this.chart.update({chart:{zoomType:"x"}}),l(this,"deselectButton",{button:t})}},zoomY:{className:"highcharts-zoom-y",init:function(t){this.chart.update({chart:{zoomType:"y"}}),l(this,"deselectButton",{button:t})}},zoomXY:{className:"highcharts-zoom-xy",init:function(t){this.chart.update({chart:{zoomType:"xy"}}),l(this,"deselectButton",{button:t})}},seriesTypeLine:{className:"highcharts-series-type-line",init:function(t){this.chart.series[0].update({type:"line",useOhlcData:!0}),l(this,"deselectButton",{button:t})}},seriesTypeOhlc:{className:"highcharts-series-type-ohlc",init:function(t){this.chart.series[0].update({type:"ohlc"}),l(this,"deselectButton",{button:t})}},seriesTypeCandlestick:{className:"highcharts-series-type-candlestick",init:function(t){this.chart.series[0].update({type:"candlestick"}),l(this,"deselectButton",{button:t})}},fullScreen:{className:"highcharts-full-screen",init:function(t){this.chart.fullscreen.toggle(),l(this,"deselectButton",{button:t})}},currentPriceIndicator:{className:"highcharts-current-price-indicator",init:function(t){var i=this.chart,o=i.series[0],s=(n=o.options).lastVisiblePrice&&n.lastVisiblePrice.enabled,n=n.lastPrice&&n.lastPrice.enabled,e=(i=i.stockTools).getIconsURL();i&&i.guiEnabled&&(t.firstChild.style["background-image"]=n?'url("'+e+'current-price-show.svg")':'url("'+e+'current-price-hide.svg")'),o.update({lastPrice:{enabled:!n,color:"red"},lastVisiblePrice:{enabled:!s,label:{enabled:!0}}}),l(this,"deselectButton",{button:t})}},indicators:{className:"highcharts-indicators",init:function(){var i=this;l(i,"showPopup",{formType:"indicators",options:{},onSubmit:function(t){i.utils.manageIndicators.call(i,t)}})}},toggleAnnotations:{className:"highcharts-toggle-annotations",init:function(t){var i=this.chart,o=i.stockTools,s=o.getIconsURL();this.toggledAnnotations=!this.toggledAnnotations,(i.annotations||[]).forEach(function(t){t.setVisibility(!this.toggledAnnotations)},this),o&&o.guiEnabled&&(t.firstChild.style["background-image"]=this.toggledAnnotations?'url("'+s+'annotations-hidden.svg")':'url("'+s+'annotations-visible.svg")'),l(this,"deselectButton",{button:t})}},saveChart:{className:"highcharts-save-chart",init:function(t){var i=this.chart,o=[],s=[],n=[],e=[];i.annotations.forEach(function(t,i){o[i]=t.userOptions}),i.series.forEach(function(t){t.is("sma")?s.push(t.userOptions):"flags"===t.type&&n.push(t.userOptions)}),i.yAxis.forEach(function(t){u.isNotNavigatorYAxis(t)&&e.push(t.options)}),a.win.localStorage.setItem("highcharts-chart",JSON.stringify({annotations:o,indicators:s,flags:n,yAxes:e})),l(this,"deselectButton",{button:t})}}}}}),t.prototype.utils=s(u,t.prototype.utils)}),t(i,"Stock/StockToolsGui.js",[i["Core/Chart/Chart.js"],i["Core/Globals.js"],i["Extensions/Annotations/NavigationBindings.js"],i["Core/Utilities.js"]],function(t,i,o,s){var p=s.addEvent,d=s.createElement,u=s.css,n=s.extend,e=s.fireEvent,g=s.getStyle,h=s.isArray,a=s.merge,r=s.pick;(s=s.setOptions)({lang:{stockTools:{gui:{simpleShapes:"Simple shapes",lines:"Lines",crookedLines:"Crooked lines",measure:"Measure",advanced:"Advanced",toggleAnnotations:"Toggle annotations",verticalLabels:"Vertical labels",flags:"Flags",zoomChange:"Zoom change",typeChange:"Type change",saveChart:"Save chart",indicators:"Indicators",currentPriceIndicator:"Current Price Indicators",zoomX:"Zoom X",zoomY:"Zoom Y",zoomXY:"Zooom XY",fullScreen:"Fullscreen",typeOHLC:"OHLC",typeLine:"Line",typeCandlestick:"Candlestick",circle:"Circle",label:"Label",rectangle:"Rectangle",flagCirclepin:"Flag circle",flagDiamondpin:"Flag diamond",flagSquarepin:"Flag square",flagSimplepin:"Flag simple",measureXY:"Measure XY",measureX:"Measure X",measureY:"Measure Y",segment:"Segment",arrowSegment:"Arrow segment",ray:"Ray",arrowRay:"Arrow ray",line:"Line",arrowLine:"Arrow line",horizontalLine:"Horizontal line",verticalLine:"Vertical line",infinityLine:"Infinity line",crooked3:"Crooked 3 line",crooked5:"Crooked 5 line",elliott3:"Elliott 3 line",elliott5:"Elliott 5 line",verticalCounter:"Vertical counter",verticalLabel:"Vertical label",verticalArrow:"Vertical arrow",fibonacci:"Fibonacci",pitchfork:"Pitchfork",parallelChannel:"Parallel channel"}},navigation:{popup:{circle:"Circle",rectangle:"Rectangle",label:"Label",segment:"Segment",arrowSegment:"Arrow segment",ray:"Ray",arrowRay:"Arrow ray",line:"Line",arrowLine:"Arrow line",horizontalLine:"Horizontal line",verticalLine:"Vertical line",crooked3:"Crooked 3 line",crooked5:"Crooked 5 line",elliott3:"Elliott 3 line",elliott5:"Elliott 5 line",verticalCounter:"Vertical counter",verticalLabel:"Vertical label",verticalArrow:"Vertical arrow",fibonacci:"Fibonacci",pitchfork:"Pitchfork",parallelChannel:"Parallel channel",infinityLine:"Infinity line",measure:"Measure",measureXY:"Measure XY",measureX:"Measure X",measureY:"Measure Y",flags:"Flags",addButton:"add",saveButton:"save",editButton:"edit",removeButton:"remove",series:"Series",volume:"Volume",connector:"Connector",innerBackground:"Inner background",outerBackground:"Outer background",crosshairX:"Crosshair X",crosshairY:"Crosshair Y",tunnel:"Tunnel",background:"Background"}}},stockTools:{gui:{enabled:!0,className:"highcharts-bindings-wrapper",toolbarClassName:"stocktools-toolbar",buttons:"indicators separator simpleShapes lines crookedLines measure advanced toggleAnnotations separator verticalLabels flags separator zoomChange fullScreen typeChange separator currentPriceIndicator saveChart".split(" "),definitions:{separator:{symbol:"separator.svg"},simpleShapes:{items:["label","circle","rectangle"],circle:{symbol:"circle.svg"},rectangle:{symbol:"rectangle.svg"},label:{symbol:"label.svg"}},flags:{items:["flagCirclepin","flagDiamondpin","flagSquarepin","flagSimplepin"],flagSimplepin:{symbol:"flag-basic.svg"},flagDiamondpin:{symbol:"flag-diamond.svg"},flagSquarepin:{symbol:"flag-trapeze.svg"},flagCirclepin:{symbol:"flag-elipse.svg"}},lines:{items:"segment arrowSegment ray arrowRay line arrowLine horizontalLine verticalLine".split(" "),segment:{symbol:"segment.svg"},arrowSegment:{symbol:"arrow-segment.svg"},ray:{symbol:"ray.svg"},arrowRay:{symbol:"arrow-ray.svg"},line:{symbol:"line.svg"},arrowLine:{symbol:"arrow-line.svg"},verticalLine:{symbol:"vertical-line.svg"},horizontalLine:{symbol:"horizontal-line.svg"}},crookedLines:{items:["elliott3","elliott5","crooked3","crooked5"],crooked3:{symbol:"crooked-3.svg"},crooked5:{symbol:"crooked-5.svg"},elliott3:{symbol:"elliott-3.svg"},elliott5:{symbol:"elliott-5.svg"}},verticalLabels:{items:["verticalCounter","verticalLabel","verticalArrow"],verticalCounter:{symbol:"vertical-counter.svg"},verticalLabel:{symbol:"vertical-label.svg"},verticalArrow:{symbol:"vertical-arrow.svg"}},advanced:{items:["fibonacci","pitchfork","parallelChannel"],pitchfork:{symbol:"pitchfork.svg"},fibonacci:{symbol:"fibonacci.svg"},parallelChannel:{symbol:"parallel-channel.svg"}},measure:{items:["measureXY","measureX","measureY"],measureX:{symbol:"measure-x.svg"},measureY:{symbol:"measure-y.svg"},measureXY:{symbol:"measure-xy.svg"}},toggleAnnotations:{symbol:"annotations-visible.svg"},currentPriceIndicator:{symbol:"current-price-show.svg"},indicators:{symbol:"indicators.svg"},zoomChange:{items:["zoomX","zoomY","zoomXY"],zoomX:{symbol:"zoom-x.svg"},zoomY:{symbol:"zoom-y.svg"},zoomXY:{symbol:"zoom-xy.svg"}},typeChange:{items:["typeOHLC","typeLine","typeCandlestick"],typeOHLC:{symbol:"series-ohlc.svg"},typeLine:{symbol:"series-line.svg"},typeCandlestick:{symbol:"series-candlestick.svg"}},fullScreen:{symbol:"fullscreen.svg"},saveChart:{symbol:"save-chart.svg"}}}}}),p(t,"afterGetContainer",function(){this.setStockTools()}),p(t,"getMargins",function(){var t=this.stockTools&&this.stockTools.listWrapper;(t=t&&(t.startWidth+g(t,"padding-left")+g(t,"padding-right")||t.offsetWidth))&&t<this.plotWidth&&(this.plotLeft+=t)}),p(t,"destroy",function(){this.stockTools&&this.stockTools.destroy()}),p(t,"redraw",function(){this.stockTools&&this.stockTools.guiEnabled&&this.stockTools.redraw()});var l=(c.prototype.init=function(){var i,o=this,s=this.lang,t=this.options,n=this.toolbar,e=o.addSubmenu,a=t.definitions,r=n.childNodes;t.buttons.forEach(function(t){i=o.addButton(n,a,t,s),o.eventsToUnbind.push(p(i.buttonWrapper,"click",function(){o.eraseActiveButtons(r,i.buttonWrapper)})),h(a[t].items)&&e.call(o,i,a[t])})},c.prototype.addSubmenu=function(t,i){var o,s=this,n=t.submenuArrow,e=t.buttonWrapper,a=g(e,"width"),r=this.wrapper,h=this.listWrapper,l=this.toolbar.childNodes,c=0;this.submenu=o=d("ul",{className:"highcharts-submenu-wrapper"},null,e),this.addSubmenuItems(e,i),s.eventsToUnbind.push(p(n,"click",function(t){t.stopPropagation(),s.eraseActiveButtons(l,e),0<=e.className.indexOf("highcharts-current")?(h.style.width=h.startWidth+"px",e.classList.remove("highcharts-current"),o.style.display="none"):(o.style.display="block",c=o.offsetHeight-e.offsetHeight-3,o.offsetHeight+e.offsetTop>r.offsetHeight&&e.offsetTop>c||(c=0),u(o,{top:-c+"px",left:a+3+"px"}),e.className+=" highcharts-current",h.startWidth=r.offsetWidth,h.style.width=h.startWidth+g(h,"padding-left")+o.offsetWidth+3+"px")}))},c.prototype.addSubmenuItems=function(i,o){var s,n=this,e=this.submenu,a=this.lang,r=this.listWrapper;o.items.forEach(function(t){s=n.addButton(e,o,t,a),n.eventsToUnbind.push(p(s.mainButton,"click",function(){n.switchSymbol(this,i,!0),r.style.width=r.startWidth+"px",e.style.display="none"}))});var t=e.querySelectorAll("li > .highcharts-menu-item-btn")[0];n.switchSymbol(t,!1)},c.prototype.eraseActiveButtons=function(t,i,o){[].forEach.call(t,function(t){t!==i&&(t.classList.remove("highcharts-current"),t.classList.remove("highcharts-active"),0<(o=t.querySelectorAll(".highcharts-submenu-wrapper")).length&&(o[0].style.display="none"))})},c.prototype.addButton=function(t,i,o,s){void 0===s&&(s={});var n,e=(i=i[o]).items,a=i.className||"";return o=d("li",{className:r(c.prototype.classMapping[o],"")+" "+a,title:s[o]||o},null,t),t=d("span",{className:"highcharts-menu-item-btn"},null,o),e&&e.length?(n=d("span",{className:"highcharts-submenu-item-arrow highcharts-arrow-right"},null,o)).style["background-image"]="url("+this.iconsURL+"arrow-bottom.svg)":t.style["background-image"]="url("+this.iconsURL+i.symbol+")",{buttonWrapper:o,mainButton:t,submenuArrow:n}},c.prototype.addNavigation=function(){var t=this.wrapper;this.arrowWrapper=d("div",{className:"highcharts-arrow-wrapper"}),this.arrowUp=d("div",{className:"highcharts-arrow-up"},null,this.arrowWrapper),this.arrowUp.style["background-image"]="url("+this.iconsURL+"arrow-right.svg)",this.arrowDown=d("div",{className:"highcharts-arrow-down"},null,this.arrowWrapper),this.arrowDown.style["background-image"]="url("+this.iconsURL+"arrow-right.svg)",t.insertBefore(this.arrowWrapper,t.childNodes[0]),this.scrollButtons()},c.prototype.scrollButtons=function(){var t=0,i=this.wrapper,o=this.toolbar,s=.1*i.offsetHeight;this.eventsToUnbind.push(p(this.arrowUp,"click",function(){0<t&&(t-=s,o.style["margin-top"]=-t+"px")})),this.eventsToUnbind.push(p(this.arrowDown,"click",function(){i.offsetHeight+t<=o.offsetHeight+s&&(t+=s,o.style["margin-top"]=-t+"px")}))},c.prototype.createHTML=function(){var t=this.chart,i=this.options,o=t.container,t=t.options.navigation;this.wrapper=t=d("div",{className:"highcharts-stocktools-wrapper "+i.className+" "+(t&&t.bindingsClassName)}),o.parentNode.insertBefore(t,o),this.toolbar=o=d("ul",{className:"highcharts-stocktools-toolbar "+i.toolbarClassName}),this.listWrapper=i=d("div",{className:"highcharts-menu-wrapper"}),t.insertBefore(i,t.childNodes[0]),i.insertBefore(o,i.childNodes[0]),this.showHideToolbar(),this.addNavigation()},c.prototype.showHideNavigatorion=function(){this.visible&&this.toolbar.offsetHeight>this.wrapper.offsetHeight-50?this.arrowWrapper.style.display="block":(this.toolbar.style.marginTop="0px",this.arrowWrapper.style.display="none")},c.prototype.showHideToolbar=function(){var t,i=this.chart,o=this.wrapper,s=this.listWrapper,n=this.submenu,e=this.visible;this.showhideBtn=t=d("div",{className:"highcharts-toggle-toolbar highcharts-arrow-left"},null,o),t.style["background-image"]="url("+this.iconsURL+"arrow-right.svg)",e?(o.style.height="100%",t.style.top=g(s,"padding-top")+"px",t.style.left=o.offsetWidth+g(s,"padding-left")+"px"):(n&&(n.style.display="none"),t.style.left="0px",this.visible=e=!1,s.classList.add("highcharts-hide"),t.classList.toggle("highcharts-arrow-right"),o.style.height=t.offsetHeight+"px"),this.eventsToUnbind.push(p(t,"click",function(){i.update({stockTools:{gui:{visible:!e,placed:!0}}})}))},c.prototype.switchSymbol=function(t,i){var o=t.parentNode,s=o.classList.value;(o=o.parentNode.parentNode).className="",s&&o.classList.add(s.trim()),o.querySelectorAll(".highcharts-menu-item-btn")[0].style["background-image"]=t.style["background-image"],i&&this.selectButton(o)},c.prototype.selectButton=function(t){0<=t.className.indexOf("highcharts-active")?t.classList.remove("highcharts-active"):t.classList.add("highcharts-active")},c.prototype.unselectAllButtons=function(i){var t=i.parentNode.querySelectorAll(".highcharts-active");[].forEach.call(t,function(t){t!==i&&t.classList.remove("highcharts-active")})},c.prototype.update=function(t){a(!0,this.chart.options.stockTools,t),this.destroy(),this.chart.setStockTools(t),this.chart.navigationBindings&&this.chart.navigationBindings.update()},c.prototype.destroy=function(){var t=this.wrapper,i=t&&t.parentNode;this.eventsToUnbind.forEach(function(t){t()}),i&&i.removeChild(t),this.chart.isDirtyBox=!0,this.chart.redraw()},c.prototype.redraw=function(){this.showHideNavigatorion()},c.prototype.getIconsURL=function(){return this.chart.options.navigation.iconsURL||this.options.iconsURL||"https://code.highcharts.com/8.2.2/gfx/stock-icons/"},c);function c(t,i,o){this.wrapper=this.toolbar=this.submenu=this.showhideBtn=this.listWrapper=this.arrowWrapper=this.arrowUp=this.arrowDown=void 0,this.chart=o,this.options=t,this.lang=i,this.iconsURL=this.getIconsURL(),this.guiEnabled=t.enabled,this.visible=r(t.visible,!0),this.placed=r(t.placed,!1),this.eventsToUnbind=[],this.guiEnabled&&(this.createHTML(),this.init(),this.showHideNavigatorion()),e(this,"afterInit")}return l.prototype.classMapping={circle:"highcharts-circle-annotation",rectangle:"highcharts-rectangle-annotation",label:"highcharts-label-annotation",segment:"highcharts-segment",arrowSegment:"highcharts-arrow-segment",ray:"highcharts-ray",arrowRay:"highcharts-arrow-ray",line:"highcharts-infinity-line",arrowLine:"highcharts-arrow-infinity-line",verticalLine:"highcharts-vertical-line",horizontalLine:"highcharts-horizontal-line",crooked3:"highcharts-crooked3",crooked5:"highcharts-crooked5",elliott3:"highcharts-elliott3",elliott5:"highcharts-elliott5",pitchfork:"highcharts-pitchfork",fibonacci:"highcharts-fibonacci",parallelChannel:"highcharts-parallel-channel",measureX:"highcharts-measure-x",measureY:"highcharts-measure-y",measureXY:"highcharts-measure-xy",verticalCounter:"highcharts-vertical-counter",verticalLabel:"highcharts-vertical-label",verticalArrow:"highcharts-vertical-arrow",currentPriceIndicator:"highcharts-current-price-indicator",indicators:"highcharts-indicators",flagCirclepin:"highcharts-flag-circlepin",flagDiamondpin:"highcharts-flag-diamondpin",flagSquarepin:"highcharts-flag-squarepin",flagSimplepin:"highcharts-flag-simplepin",zoomX:"highcharts-zoom-x",zoomY:"highcharts-zoom-y",zoomXY:"highcharts-zoom-xy",typeLine:"highcharts-series-type-line",typeOHLC:"highcharts-series-type-ohlc",typeCandlestick:"highcharts-series-type-candlestick",fullScreen:"highcharts-full-screen",toggleAnnotations:"highcharts-toggle-annotations",saveChart:"highcharts-save-chart",separator:"highcharts-separator"},n(t.prototype,{setStockTools:function(t){var i=this.options,o=i.lang;t=a(i.stockTools&&i.stockTools.gui,t&&t.gui),this.stockTools=new l(t,o.stockTools&&o.stockTools.gui,this),this.stockTools.guiEnabled&&(this.isDirtyBox=!0)}}),p(o,"selectButton",function(t){var i=t.button,o=this.chart.stockTools;o&&o.guiEnabled&&(o.unselectAllButtons(t.button),0<=i.parentNode.className.indexOf("highcharts-submenu-wrapper")&&(i=i.parentNode.parentNode),o.selectButton(i))}),p(o,"deselectButton",function(t){t=t.button;var i=this.chart.stockTools;i&&i.guiEnabled&&(0<=t.parentNode.className.indexOf("highcharts-submenu-wrapper")&&(t=t.parentNode.parentNode),i.selectButton(t))}),i.Toolbar=l,i.Toolbar}),t(i,"masters/modules/stock-tools.src.js",[],function(){})});