"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/broken-axis",["highcharts"],function(i){return t(i),t.Highcharts=i,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(i){var t=i?i._modules:{};function n(i,t,n,s){i.hasOwnProperty(t)||(i[t]=s.apply(null,n))}n(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Axis.js"],t["Series/LineSeries.js"],t["Extensions/Stacking.js"],t["Core/Utilities.js"]],function(p,s,h,i){var e=i.addEvent,n=i.find,v=i.fireEvent,r=i.isArray,u=i.isNumber,x=i.pick,o=(A.isInBreak=function(i,t){var n=i.repeat||1/0,s=i.from,e=i.to-i.from,r=s<=t?(t-s)%n:n-(s-t)%n,o=i.inclusive?r<=e:r<e&&0!=r;return o},A.lin2Val=function(i){var t=this.brokenAxis,n=t&&t.breakArray;if(!n)return i;for(var s,e=i,r=0;r<n.length&&!((s=n[r]).from>=e);r++)(s.to<e||A.isInBreak(s,e))&&(e+=s.len);return e},A.val2Lin=function(i){var t=this.brokenAxis,n=t&&t.breakArray;if(!n)return i;for(var s,e=i,r=0;r<n.length;r++)if((s=n[r]).to<=i)e-=s.len;else{if(s.from>=i)break;if(A.isInBreak(s,i)){e-=i-s.from;break}}return e},A.prototype.findBreakAt=function(t,i){return n(i,function(i){return i.from<t&&t<i.to})},A.prototype.isInAnyBreak=function(i,t){var n,s,e,r=this.axis,o=r.options.breaks,a=o&&o.length;if(a){for(;a--;)A.isInBreak(o[a],i)&&(n=!0,s=s||x(o[a].showPoints,!r.isXAxis));e=n&&t?n&&!s:n}return e},A.prototype.setBreaks=function(i,t){var c=this,k=c.axis,n=r(i)&&!!i.length;k.isDirty=c.hasBreaks!==n,c.hasBreaks=n,k.options.breaks=k.userOptions.breaks=i,k.forceRedraw=!0,k.series.forEach(function(i){i.isDirty=!0}),n||k.val2lin!==A.val2Lin||(delete k.val2lin,delete k.lin2val),n&&(k.userOptions.ordinal=!1,k.lin2val=A.lin2Val,k.val2lin=A.val2Lin,k.setExtremes=function(i,t,n,s,e){if(c.hasBreaks){for(var r,o=this.options.breaks;r=c.findBreakAt(i,o);)i=r.to;for(;r=c.findBreakAt(t,o);)t=r.from;t<i&&(t=i)}p.prototype.setExtremes.call(this,i,t,n,s,e)},k.setAxisTranslation=function(i){var t,n,s,e,r,o,a,f,h,u,l;p.prototype.setAxisTranslation.call(this,i),c.unitLength=null,c.hasBreaks&&(t=k.options.breaks||[],n=[],s=[],e=0,a=k.userMin||k.min,f=k.userMax||k.max,h=x(k.pointRangePadding,0),t.forEach(function(i){o=i.repeat||1/0,A.isInBreak(i,a)&&(a+=i.to%o-a%o),A.isInBreak(i,f)&&(f-=f%o-i.from%o)}),t.forEach(function(i){for(u=i.from,o=i.repeat||1/0;a<u-o;)u-=o;for(;u<a;)u+=o;for(l=u;l<f;l+=o)n.push({value:l,move:"in"}),n.push({value:l+(i.to-i.from),move:"out",size:i.breakSize})}),n.sort(function(i,t){return i.value===t.value?("in"===i.move?0:1)-("in"===t.move?0:1):i.value-t.value}),r=0,u=a,n.forEach(function(i){1===(r+="in"===i.move?1:-1)&&"in"===i.move&&(u=i.value),0===r&&(s.push({from:u,to:i.value,len:i.value-u-(i.size||0)}),e+=i.value-u-(i.size||0))}),k.breakArray=c.breakArray=s,c.unitLength=f-a-e+h,v(k,"afterBreaks"),k.staticScale?k.transA=k.staticScale:c.unitLength&&(k.transA*=(f-k.min+h)/c.unitLength),h&&(k.minPixelPadding=k.transA*k.minPointOffset),k.min=a,k.max=f)}),x(t,!0)&&k.chart.redraw()},A);function A(i){this.hasBreaks=!1,this.axis=i}var t=(a.compose=function(i,t){i.keepProps.push("brokenAxis");var n=s.prototype;n.drawBreaks=function(n,i){var s,e,r,o,t,a=this,f=a.points;n&&n.brokenAxis&&n.brokenAxis.hasBreaks&&(t=n.brokenAxis,i.forEach(function(i){s=t&&t.breakArray||[],e=n.isXAxis?n.min:x(a.options.threshold,n.min),f.forEach(function(t){o=x(t["stack"+i.toUpperCase()],t[i]),s.forEach(function(i){u(e)&&u(o)&&(r=!1,e<i.from&&o>i.to||e>i.from&&o<i.from?r="pointBreak":(e<i.from&&o>i.from&&o<i.to||e>i.from&&o>i.to&&o<i.from)&&(r="pointInBreak"),r&&v(n,r,{point:t,brk:i}))})})}))},n.gappedPath=function(){var i=this.currentDataGrouping,t=i&&i.gapSize,n=this.options.gapSize,s=this.points.slice(),e=s.length-1,r=this.yAxis;if(n&&0<e){"value"!==this.options.gapUnit&&(n*=this.basePointRange),t&&n<t&&t>=this.basePointRange&&(n=t);for(var o,a=void 0,f=void 0;e--;)f&&!1!==f.visible||(f=s[e+1]),a=s[e],!1!==f.visible&&!1!==a.visible&&(f.x-a.x>n&&(o=(a.x+f.x)/2,s.splice(e+1,0,{isNull:!0,x:o}),r.stacking&&this.options.stacking&&((r.stacking.stacks[this.stackKey][o]=new h(r,r.options.stackLabels,!1,o,this.stack)).total=0)),f=a)}return this.getGraphPath(s)},e(i,"init",function(){this.brokenAxis||(this.brokenAxis=new o(this))}),e(i,"afterInit",function(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}),e(i,"afterSetTickPositions",function(){var i=this.brokenAxis;if(i&&i.hasBreaks){for(var t=this.tickPositions,n=this.tickPositions.info,s=[],e=0;e<t.length;e++)i.isInAnyBreak(t[e])||s.push(t[e]);this.tickPositions=s,this.tickPositions.info=n}}),e(i,"afterSetOptions",function(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}),e(t,"afterGeneratePoints",function(){var i=this,t=i.isDirty,n=i.options.connectNulls,s=i.points,e=i.xAxis,r=i.yAxis;if(t)for(var o=s.length;o--;){var a=s[o],f=!(null===a.y&&!1===n)&&(e&&e.brokenAxis&&e.brokenAxis.isInAnyBreak(a.x,!0)||r&&r.brokenAxis&&r.brokenAxis.isInAnyBreak(a.y,!0));a.visible=!f&&!1!==a.options.visible}}),e(t,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,x(this.pointArrayMap,["y"]))})},a);function a(){}return t.compose(p,s),t}),n(t,"masters/modules/broken-axis.src.js",[],function(){})});