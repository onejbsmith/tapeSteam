"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/grid-axis",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var i=t?t._modules:{};function e(t,i,e,n){t.hasOwnProperty(i)||(t[i]=n.apply(null,e))}e(i,"Core/Axis/GridAxis.js",[i["Core/Axis/Axis.js"],i["Core/Globals.js"],i["Core/Options.js"],i["Core/Axis/Tick.js"],i["Core/Utilities.js"]],function(c,f,t,i,e){t.dateFormat;function a(t){return e.isObject(t,!0)}var n=e.addEvent,s=e.defined,u=e.erase,g=e.find,l=e.isArray,A=e.isNumber,m=e.merge,b=e.pick,h=e.timeUnits,p=e.wrap,r=f.Chart;c.prototype.getMaxLabelDimensions=function(o,t){var s={width:0,height:0};return t.forEach(function(t){var i,e=o[t],n=0,r=0;a(e)&&(n=(i=a(e.label)?e.label:{}).getBBox?i.getBBox().height:0,i.textStr&&!A(i.textPxLength)&&(i.textPxLength=i.getBBox().width),r=A(i.textPxLength)?Math.round(i.textPxLength):0,i.textStr&&(r=Math.round(i.getBBox().width)),s.height=Math.max(n,s.height),s.width=Math.max(r,s.width))}),s},f.dateFormats.W=function(t){var i=new this.Date(t),e=(this.get("Day",i)+6)%7,n=new this.Date(i.valueOf());this.set("Date",n,this.get("Date",i)-e+3);var r=new this.Date(this.get("FullYear",n),0,1);return 4!==this.get("Day",r)&&(this.set("Month",i,0),this.set("Date",i,1+(11-this.get("Day",r))%7)),(1+Math.floor((n.valueOf()-r.valueOf())/6048e5)).toString()},f.dateFormats.E=function(t){return this.dateFormat("%a",t,!0).charAt(0)},n(r,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.grid&&t.grid.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})}),n(i,"afterGetLabelPosition",function(t){var i,e,n,r,o,s,a,l=this,d=l.label,h=l.axis,c=h.reversed,f=h.chart,u=h.options.grid||{},g=h.options.labels,m=g.align,p=O.Side[h.side],x=t.tickmarkOffset,k=h.tickPositions,b=l.pos-x,v=A(k[t.index+1])?k[t.index+1]-x:h.max+x,P=h.tickSize("tick"),y=P?P[0]:0,S=P?P[1]/2:0;!0===u.enabled&&("top"===p?o=(r=h.top+h.offset)-y:"bottom"===p?r=(o=f.chartHeight-h.bottom+h.offset)+y:(r=h.top+h.len-h.translate(c?v:b),o=h.top+h.len-h.translate(c?b:v)),"right"===p?a=(s=f.chartWidth-h.right+h.offset)+y:"left"===p?s=(a=h.left+h.offset)-y:(s=Math.round(h.left+h.translate(c?v:b))-S,a=Math.round(h.left+h.translate(c?b:v))-S),l.slotWidth=a-s,t.pos.x="left"===m?s:"right"===m?a:s+(a-s)/2,t.pos.y=o+(r-o)/2,e=f.renderer.fontMetrics(g.style.fontSize,d.element),i=d.getBBox().height,g.useHTML?t.pos.y+=e.b+-i/2:(n=Math.round(i/e.h),t.pos.y+=(e.b-(e.h-e.f))/2+-((n-1)*e.h)/2),t.pos.x+=h.horiz&&g.x||0)});var o=(d.prototype.isOuterAxis=function(){var e=this.axis,t=e.chart,i=e.grid.columnIndex,n=e.linkedParent&&e.linkedParent.grid.columns||e.grid.columns,r=i?e.linkedParent:e,o=-1,s=0;return t[e.coll].forEach(function(t,i){t.side!==e.side||t.options.isInternal||(s=i,t===r&&(o=i))}),s===o&&(!A(i)||n.length===i)},d.prototype.renderBorder=function(t){var i=this.axis,e=i.chart.renderer,n=i.options,r=e.path(t).addClass("highcharts-axis-line").add(i.axisBorder);return e.styledMode||r.attr({stroke:n.lineColor,"stroke-width":n.lineWidth,zIndex:7}),r},d);function d(t){this.axis=t}var x,k,O=(v.compose=function(t){c.keepProps.push("grid"),p(t.prototype,"unsquish",v.wrapUnsquish),n(t,"init",v.onInit),n(t,"afterGetOffset",v.onAfterGetOffset),n(t,"afterGetTitlePosition",v.onAfterGetTitlePosition),n(t,"afterInit",v.onAfterInit),n(t,"afterRender",v.onAfterRender),n(t,"afterSetAxisTranslation",v.onAfterSetAxisTranslation),n(t,"afterSetOptions",v.onAfterSetOptions),n(t,"afterSetOptions",v.onAfterSetOptions2),n(t,"afterSetScale",v.onAfterSetScale),n(t,"afterTickSize",v.onAfterTickSize),n(t,"trimTicks",v.onTrimTicks),n(t,"destroy",v.onDestroy)},v.onAfterGetOffset=function(){var t=this.grid;(t&&t.columns||[]).forEach(function(t){t.getOffset()})},v.onAfterGetTitlePosition=function(t){var i,e,n,r,o,s,a,l,d,h,c,f,u,g,m,p,x,k=this;!0===(k.options.grid||{}).enabled&&(i=k.axisTitle,e=k.height,n=k.horiz,r=k.left,o=k.offset,s=k.opposite,l=void 0===(a=k.options.title)?{}:a,d=k.top,h=k.width,c=k.tickSize(),f=i&&i.getBBox().width,u=l.x||0,g=l.y||0,m=b(l.margin,n?5:10),p=k.chart.renderer.fontMetrics(l.style&&l.style.fontSize,i).f,x=(n?d+e:r)+(n?1:-1)*(s?-1:1)*(c?c[0]/2:0)+(k.side===v.Side.bottom?p:0),t.titlePosition.x=n?r-f/2-m+u:x+(s?h:0)+o+u,t.titlePosition.y=n?x-(s?e:0)+(s?p:-p)/2+o+g:d-m+g)},v.onAfterInit=function(){var t,i,e=this,n=e.chart,r=e.options.grid,o=void 0===r?{}:r,s=e.userOptions;if(o.enabled&&((i=(t=e).options).labels||(i.labels={}),i.labels.align=b(i.labels.align,"center"),t.categories||(i.showLastLabel=!1),t.labelRotation=0,i.labels.rotation=0,p(e,"labelFormatter",function(t){var i,e=this.axis,n=this.value,r=e.tickPositions,o=(e.isLinked?e.linkedParent:e).series[0],s=n===r[0],a=n===r[r.length-1],l=o&&g(o.options.data,function(t){return t[e.isXAxis?"x":"y"]===n});return l&&o.is("gantt")&&(i=m(l),f.seriesTypes.gantt.prototype.setGanttPointAliases(i)),this.isFirst=s,this.isLast=a,this.point=i,t.call(this)})),o.columns)for(var a=e.grid.columns=[],l=e.grid.columnIndex=0;++l<o.columns.length;){var d=m(s,o.columns[o.columns.length-l-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete d.grid.columns;var h=new c(e.chart,d);h.grid.isColumn=!0,h.grid.columnIndex=l,u(n.axes,h),u(n[e.coll],h),a.push(h)}},v.onAfterRender=function(){var t,i,e,n,r,o,s,a,l,d,h,c,f,u,g=this,m=g.grid,p=g.options;!0===(p.grid||{}).enabled&&(g.maxLabelDimensions=g.getMaxLabelDimensions(g.ticks,g.tickPositions),g.rightWall&&g.rightWall.destroy(),g.grid&&g.grid.isOuterAxis()&&g.axisLine&&(i=p.lineWidth)&&(n=(e=g.getLinePath(i))[0],r=e[1],o=((g.tickSize("tick")||[1])[0]-1)*(g.side===v.Side.top||g.side===v.Side.left?-1:1),"M"===n[0]&&"L"===r[0]&&(g.horiz?(n[2]+=o,r[2]+=o):(n[1]+=o,r[1]+=o)),!g.horiz&&g.chart.marginRight&&(s=[n,["L",g.left,n[2]]],a=["L",g.chart.chartWidth-g.chart.marginRight,g.toPixels(g.max+g.tickmarkOffset)],l=[["M",r[1],g.toPixels(g.max+g.tickmarkOffset)],a],g.grid.upperBorder||g.min%1==0||(g.grid.upperBorder=g.grid.renderBorder(s)),g.grid.upperBorder&&g.grid.upperBorder.animate({d:s}),g.grid.lowerBorder||g.max%1==0||(g.grid.lowerBorder=g.grid.renderBorder(l)),g.grid.lowerBorder&&g.grid.lowerBorder.animate({d:l})),g.grid.axisLineExtra?g.grid.axisLineExtra.animate({d:e}):g.grid.axisLineExtra=g.grid.renderBorder(e),g.axisLine[g.showAxis?"show":"hide"](!0)),(m&&m.columns||[]).forEach(function(t){t.render()}),!g.horiz&&g.chart.hasRendered&&(g.scrollbar||null!==(t=g.linkedParent)&&void 0!==t&&t.scrollbar)&&(d=g.max,h=g.min,c=g.tickmarkOffset,f=g.tickPositions[g.tickPositions.length-1],c<h-(u=g.tickPositions[0])?g.ticks[u].label.hide():g.ticks[u].label.show(),c<f-d?g.ticks[f].label.hide():g.ticks[f].label.show(),f-d<c&&0<f-d&&g.ticks[f].isLast?g.ticks[f].mark.hide():g.ticks[f-1].mark.show()))},v.onAfterSetAxisTranslation=function(){var t,i=this,e=i.tickPositions&&i.tickPositions.info,n=i.options,r=n.grid||{},o=i.userOptions.labels||{};i.horiz?(!0===r.enabled&&i.series.forEach(function(t){t.options.pointRange=0}),e&&n.dateTimeLabelFormats&&n.labels&&!s(o.align)&&(!1===n.dateTimeLabelFormats[e.unitName].range||1<e.count)&&(n.labels.align="left",s(o.x)||(n.labels.x=3))):"treegrid"!==this.options.type&&null!==(t=i.grid)&&void 0!==t&&t.columns&&(this.minPointOffset=this.tickInterval)},v.onAfterSetOptions=function(t){var d,i=this.options,e=t.userOptions,n=i&&a(i.grid)?i.grid:{};!0===n.enabled&&(d=m(!0,{className:"highcharts-grid-axis "+(e.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},e),"xAxis"===this.coll&&(s(e.linkedTo)&&!s(e.tickPixelInterval)&&(d.tickPixelInterval=350),s(e.tickPixelInterval)||!s(e.linkedTo)||s(e.tickPositioner)||s(e.tickInterval)||(d.tickPositioner=function(t,i){var e=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(e){for(var n,r,o,s,a=d.units,l=0;l<a.length;l++)if(a[l][0]===e.unitName){n=l;break}return a[n+1]?(o=a[n+1][0],r=(a[n+1][1]||[1])[0]):"year"===e.unitName&&(o="year",r=10*e.count),s=h[o],this.tickInterval=s*r,this.getTimeTicks({unitRange:s,count:r,unitName:o},t,i,this.options.startOfWeek)}})),m(!0,this.options,d),this.horiz&&(i.minPadding=b(e.minPadding,0),i.maxPadding=b(e.maxPadding,0)),A(i.grid.borderWidth)&&(i.tickWidth=i.lineWidth=n.borderWidth))},v.onAfterSetOptions2=function(t){var i=t.userOptions,e=i&&i.grid||{},n=e.columns;e.enabled&&n&&m(!0,this.options,n[n.length-1])},v.onAfterSetScale=function(){(this.grid.columns||[]).forEach(function(t){t.setScale()})},v.onAfterTickSize=function(t){var i,e,n=c.defaultLeftAxisOptions,r=this.horiz,o=this.maxLabelDimensions,s=this.options.grid,a=void 0===s?{}:s;a.enabled&&o&&(i=2*Math.abs(n.labels.x),e=r?a.cellHeight||i+o.height:i+o.width,l(t.tickSize)?t.tickSize[0]=e:t.tickSize=[e,0])},v.onDestroy=function(i){var t=this.grid;(t.columns||[]).forEach(function(t){t.destroy(i.keepEvents)}),t.columns=void 0},v.onInit=function(t){var i=t.userOptions||{},e=i.grid||{};e.enabled&&s(e.borderColor)&&(i.tickColor=i.lineColor=e.borderColor),this.grid||(this.grid=new o(this))},v.onTrimTicks=function(){var t=this,i=t.options,e=i.grid||{},n=t.categories,r=t.tickPositions,o=r[0],s=r[r.length-1],a=t.linkedParent&&t.linkedParent.min,l=t.linkedParent&&t.linkedParent.max,d=a||t.min,h=l||t.max,c=t.tickInterval,f=o<d&&d<o+c,u=h<s&&s-c<h;!0!==e.enabled||n||!t.horiz&&!t.isLinked||(f&&!i.startOnTick&&(r[0]=d),u&&!i.endOnTick&&(r[r.length-1]=h))},v.wrapUnsquish=function(t){var i,e=this.options.grid;return!0===(void 0===e?{}:e).enabled&&this.categories?this.tickInterval:t.apply(this,(i=arguments,Array.prototype.slice.call(i,1)))},v);function v(){}return x=O=O||{},(k=x.Side||(x.Side={}))[k.top=0]="top",k[k.right=1]="right",k[k.bottom=2]="bottom",k[k.left=3]="left",O.compose(c),O}),e(i,"masters/modules/grid-axis.src.js",[],function(){})});