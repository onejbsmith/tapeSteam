"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var t=e?e._modules:{};function n(e,t,n,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,n))}n(t,"Series/DependencyWheelSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Series.js"],t["Core/Globals.js"],t["Mixins/Nodes.js"]],function(e,t,n,i){var a=e.animObject,o=t.seriesTypes.sankey.prototype;t.seriesType("dependencywheel","sankey",{center:[null,null],curveFactor:.6,startAngle:0},{orderNodes:!1,getCenter:t.seriesTypes.pie.prototype.getCenter,createNodeColumns:function(){var t=[this.createNodeColumn()];return this.nodes.forEach(function(e){e.column=0,t[0].push(e)}),t},getNodePadding:function(){return this.options.nodePadding/Math.PI},createNode:function(e){var r=o.createNode.call(this,e);return r.index=this.nodes.length-1,r.getSum=function(){return r.linksFrom.concat(r.linksTo).reduce(function(e,t){return e+t.weight},0)},r.offset=function(e){var t,n,i=0,a=r.linksFrom.concat(r.linksTo);function s(e){return e.fromNode===r?e.toNode:e.fromNode}for(a.sort(function(e,t){return s(e).index-s(t).index}),t=0;t<a.length;t++)if(s(a[t]).index>r.index){a=a.slice(0,t).reverse().concat(a.slice(t).reverse()),n=!0;break}for(n||a.reverse(),t=0;t<a.length;t++){if(a[t]===e)return i;i+=a[t].weight}},r},translate:function(){var u=this.options,l=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),s=this.getCenter(),p=(u.startAngle-90)*n.deg2rad;o.translate.call(this),this.nodeColumns[0].forEach(function(e){var t,c,h,n,d,i,a;e.sum&&(t=e.shapeArgs,c=s[0],h=s[1],n=s[2]/2,d=n-u.nodeWidth,i=p+l*t.y,a=p+l*(t.y+t.height),e.angle=i+(a-i)/2,e.shapeType="arc",e.shapeArgs={x:c,y:h,r:n,innerR:d,start:i,end:a},e.dlBox={x:c+Math.cos((i+a)/2)*(n+d)/2,y:h+Math.sin((i+a)/2)*(n+d)/2,width:1,height:1},e.linksFrom.forEach(function(r){var o,e;r.linkBase&&(e=r.linkBase.map(function(e,t){var n=l*e,i=Math.cos(p+n)*(1+d),a=Math.sin(p+n)*(1+d),s=u.curveFactor;return(o=Math.abs(r.linkBase[3-t]*l-n))>Math.PI&&(o=2*Math.PI-o),(o*=d)<d&&(s*=o/d),{x:c+i,y:h+a,cpX:c+(1-s)*i,cpY:h+(1-s)*a}}),r.shapeArgs={d:[["M",e[0].x,e[0].y],["A",d,d,0,0,1,e[1].x,e[1].y],["C",e[1].cpX,e[1].cpY,e[2].cpX,e[2].cpY,e[2].x,e[2].y],["A",d,d,0,0,1,e[3].x,e[3].y],["C",e[3].cpX,e[3].cpY,e[0].cpX,e[0].cpY,e[0].x,e[0].y]]})}))})},animate:function(e){var i;e||(i=a(this.options.animation).duration/2/this.nodes.length,this.nodes.forEach(function(e,t){var n=e.graphic;n&&(n.attr({opacity:0}),setTimeout(function(){n.animate({opacity:1},{duration:i})},i*t))},this),this.points.forEach(function(e){var t=e.graphic;!e.isNode&&t&&t.attr({opacity:0}).animate({opacity:1},this.options.animation)},this))}},{setState:i.setNodeState,getDataLabelPath:function(e){var t=this.series.chart.renderer,n=this.shapeArgs,i=this.angle<0||this.angle>Math.PI,a=n.start,s=n.end;return this.dataLabelPath||(this.dataLabelPath=t.arc({open:!0}).add(e)),this.dataLabelPath.attr({x:n.x,y:n.y,r:n.r+(this.dataLabel.options.distance||0),start:i?a:s,end:i?s:a,clockwise:+i}),this.dataLabelPath},isValid:function(){return!0}})}),n(t,"masters/modules/dependency-wheel.src.js",[],function(){})});