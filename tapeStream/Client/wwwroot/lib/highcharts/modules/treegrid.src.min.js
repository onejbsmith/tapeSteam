"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var t=e?e._modules:{};function i(e,t,i,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,i))}i(t,"Gantt/Tree.js",[t["Core/Utilities.js"]],function(e){function r(e,o){var r=e.reduce(function(e,t){var i=m(t.parent,"");return void 0===e[i]&&(e[i]=[]),e[i].push(t),e},{});return Object.keys(r).forEach(function(e,t){var i=r[e];""!==e&&-1===o.indexOf(e)&&(i.forEach(function(e){t[""].push(e)}),delete t[e])}),r}var u=e.extend,g=e.isNumber,m=e.pick,x=function(r,e,n,t,s,a){var l,d,i,c=0,p=0,o=a&&a.after,h=a&&a.before,f={data:t,depth:n-1,id:r,level:n,parent:e};return"function"==typeof h&&h(f,a),i=(s[r]||[]).map(function(e){var t=x(e.id,r,n+1,e,s,a),i=e.start,o=!0===e.milestone?i:e.end;return l=!g(l)||i<l?i:l,d=!g(d)||d<o?o:d,c=c+1+t.descendants,p=Math.max(t.height+1,p),t}),t&&(t.start=m(t.start,l),t.end=m(t.end,d)),u(f,{children:i,descendants:c,height:p}),"function"==typeof o&&o(f,a),f};return{getListOfParents:r,getNode:x,getTree:function(e,t){var i=e.map(function(e){return e.id}),o=r(e,i);return x("",null,1,null,o,t)}}}),i(t,"Core/Axis/TreeGridTick.js",[t["Core/Utilities.js"]],function(e){var t,N=e.addEvent,w=e.defined,E=e.isObject,L=e.isNumber,M=e.pick,a=e.wrap;return function(e){var t=!1;function i(){this.treeGrid||(this.treeGrid=new n(this))}function o(e,t,i,o,r,n,s,a,l){var d,c,p,h,f,u=this,g=M(u.options&&u.options.labels,n),m=u.pos,x=u.axis,k="treegrid"===x.options.type,v=e.apply(u,[t,i,o,r,g,s,a,l]);return k&&(d=g&&E(g.symbol,!0)?g.symbol:{},c=g&&L(g.indentation)?g.indentation:0,f=(h=(p=x.treeGrid.mapOfPosToGridNode)&&p[m])&&h.depth||1,v.x+=d.width+2*d.padding+(f-1)*c),v}function r(e){var t,i,o,r,n,s,a,l,d,c,p,h,f,u,g,m,x=this,k=x.pos,v=x.axis,b=x.label,y=v.treeGrid.mapOfPosToGridNode,A=v.options,P=M(x.options&&x.options.labels,A&&A.labels),G=P&&E(P.symbol,!0)?P.symbol:{},O=y&&y[k],T=O&&O.depth,B="treegrid"===A.type,S=-1<v.tickPositions.indexOf(k),C="highcharts-treegrid-node-",I=v.chart.styledMode;B&&O&&b&&b.element&&b.addClass(C+"level-"+T),e.apply(x,Array.prototype.slice.call(arguments,1)),B&&b&&b.element&&O&&O.descendants&&0<O.descendants&&(t=v.treeGrid.isCollapsed(O),r=x,n={color:!I&&b.styles&&b.styles.color||"",collapsed:t,group:b.parentGroup,options:G,renderer:b.renderer,show:S,xy:b.xy},s=r.treeGrid,a=!s.labelIcon,l=n.renderer,d=n.xy,c=n.options,p=c.width,h=c.height,f={x:d.x-p/2-c.padding,y:d.y-h/2},u=n.collapsed?90:180,g=n.show&&L(f.y),(m=s.labelIcon)||(s.labelIcon=m=l.path(l.symbols[c.type](c.x,c.y,p,h)).addClass("highcharts-label-icon").add(n.group)),g||m.attr({y:-9999}),l.styledMode||m.attr({"stroke-width":1,fill:M(n.color,"#666666")}).css({cursor:"pointer",stroke:c.lineColor,strokeWidth:c.lineWidth}),m[a?"attr":"animate"]({translateX:f.x,translateY:f.y,rotation:u}),i=C+(t?"collapsed":"expanded"),o=C+(t?"expanded":"collapsed"),b.addClass(i).removeClass(o),I||b.css({cursor:"pointer"}),[b,x.treeGrid.labelIcon].forEach(function(e){e&&!e.attachedTreeGridEvents&&(N(e.element,"mouseover",function(){var e;(e=b).addClass("highcharts-treegrid-node-active"),e.renderer.styledMode||e.css({textDecoration:"underline"})}),N(e.element,"mouseout",function(){var e,t,i;e=b,i=w((t=P).style)?t.style:{},e.removeClass("highcharts-treegrid-node-active"),e.renderer.styledMode||e.css({textDecoration:i.textDecoration})}),N(e.element,"click",function(){x.treeGrid.toggleCollapse()}),e.attachedTreeGridEvents=!0)}))}e.compose=function(e){t||(N(e,"init",i),a(e.prototype,"getLabelPosition",o),a(e.prototype,"renderLabel",r),e.prototype.collapse=function(e){this.treeGrid.collapse(e)},e.prototype.expand=function(e){this.treeGrid.expand(e)},e.prototype.toggleCollapse=function(e){this.treeGrid.toggleCollapse(e)},t=!0)};var n=(s.prototype.collapse=function(e){var t,i,o,r=this.tick,n=r.axis,s=n.brokenAxis;s&&n.treeGrid.mapOfPosToGridNode&&(t=r.pos,i=n.treeGrid.mapOfPosToGridNode[t],o=n.treeGrid.collapse(i),s.setBreaks(o,M(e,!0)))},s.prototype.expand=function(e){var t,i,o,r=this.tick,n=r.axis,s=n.brokenAxis;s&&n.treeGrid.mapOfPosToGridNode&&(t=r.pos,i=n.treeGrid.mapOfPosToGridNode[t],o=n.treeGrid.expand(i),s.setBreaks(o,M(e,!0)))},s.prototype.toggleCollapse=function(e){var t,i,o,r=this.tick,n=r.axis,s=n.brokenAxis;s&&n.treeGrid.mapOfPosToGridNode&&(t=r.pos,i=n.treeGrid.mapOfPosToGridNode[t],o=n.treeGrid.toggleCollapse(i),s.setBreaks(o,M(e,!0)))},s);function s(e){this.tick=e}e.Additions=n}(t=t||{}),t}),i(t,"Mixins/TreeSeries.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(v,e){function h(e){return"boolean"==typeof e}var f=e.extend,l=e.isArray,d=e.isNumber,c=e.isObject,p=e.merge,b=e.pick;return{getColor:function(e,t){var i,o,r,n,s,a,l,d,c=t.index,p=t.mapOptionsToLevel,h=t.parentColor,f=t.parentColorIndex,u=t.series,g=t.colors,m=t.siblings,x=u.points,k=u.chart.options.chart;return e&&(i=x[e.i],o=p[e.level]||{},i&&o.colorByPoint&&(n=i.index%(g?g.length:k.colorCount),r=g&&g[n]),u.chart.styledMode||(s=b(i&&i.options.color,o&&o.color,r,h&&(l=h,(d=o&&o.colorVariation)&&"brightness"===d.key?v.parse(l).brighten(d.to*(c/m)).get():l),u.color)),a=b(i&&i.options.colorIndex,o&&o.colorIndex,n,f,t.colorIndex)),{color:s,colorIndex:a}},getLevelOptions:function(e){var n,t,i,s,o,r,a=null;if(c(e))for(a={},s=d(e.from)?e.from:1,r=e.levels,t={},n=c(e.defaults)?e.defaults:{},l(r)&&(t=r.reduce(function(e,t){var i,o,r;return c(t)&&d(t.level)&&(r=p({},t),o=h(r.levelIsConstant)?r.levelIsConstant:n.levelIsConstant,delete r.levelIsConstant,delete r.level,i=t.level+(o?0:s-1),c(e[i])?f(e[i],r):e[i]=r),e},{})),o=d(e.to)?e.to:1,i=0;i<=o;i++)a[i]=p({},n,c(t[i])?t[i]:{});return a},setTreeValues:function o(r,n){var e,t=n.before,i=n.idRoot,s=n.mapIdToNode[i],a=!h(n.levelIsConstant)||n.levelIsConstant,l=n.points[r.i],d=l&&l.options||{},c=0,p=[];return f(r,{levelDynamic:r.level-(a?0:s.level),name:b(l&&l.name,""),visible:i===r.id||!!h(n.visible)&&n.visible}),"function"==typeof t&&(r=t(r,n)),r.children.forEach(function(e,t){var i=f({},n);f(i,{index:t,siblings:r.children.length,visible:r.visible}),e=o(e,i),p.push(e),e.visible&&(c+=e.val)}),r.visible=0<c||r.visible,e=b(d.value,c),f(r,{children:p,childrenTotal:c,isLeaf:r.visible&&!c,val:e}),r},updateRootId:function(e){var t,i;return c(e)&&(i=c(e.options)?e.options:{},t=b(e.rootNode,i.rootId,""),c(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}),i(t,"Core/Axis/GridAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Options.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(p,h,e,t,i){e.dateFormat;function a(e){return i.isObject(e,!0)}var o=i.addEvent,s=i.defined,f=i.erase,u=i.find,l=i.isArray,P=i.isNumber,g=i.merge,v=i.pick,c=i.timeUnits,m=i.wrap,r=h.Chart;p.prototype.getMaxLabelDimensions=function(n,e){var s={width:0,height:0};return e.forEach(function(e){var t,i=n[e],o=0,r=0;a(i)&&(o=(t=a(i.label)?i.label:{}).getBBox?t.getBBox().height:0,t.textStr&&!P(t.textPxLength)&&(t.textPxLength=t.getBBox().width),r=P(t.textPxLength)?Math.round(t.textPxLength):0,t.textStr&&(r=Math.round(t.getBBox().width)),s.height=Math.max(o,s.height),s.width=Math.max(r,s.width))}),s},h.dateFormats.W=function(e){var t=new this.Date(e),i=(this.get("Day",t)+6)%7,o=new this.Date(t.valueOf());this.set("Date",o,this.get("Date",t)-i+3);var r=new this.Date(this.get("FullYear",o),0,1);return 4!==this.get("Day",r)&&(this.set("Month",t,0),this.set("Date",t,1+(11-this.get("Day",r))%7)),(1+Math.floor((o.valueOf()-r.valueOf())/6048e5)).toString()},h.dateFormats.E=function(e){return this.dateFormat("%a",e,!0).charAt(0)},o(r,"afterSetChartSize",function(){this.axes.forEach(function(e){(e.grid&&e.grid.columns||[]).forEach(function(e){e.setAxisSize(),e.setAxisTranslation()})})}),o(t,"afterGetLabelPosition",function(e){var t,i,o,r,n,s,a,l=this.label,d=this.axis,c=d.reversed,p=d.chart,h=d.options.grid||{},f=d.options.labels,u=f.align,g=G.Side[d.side],m=e.tickmarkOffset,x=d.tickPositions,k=this.pos-m,v=P(x[e.index+1])?x[e.index+1]-m:d.max+m,b=d.tickSize("tick"),y=b?b[0]:0,A=b?b[1]/2:0;!0===h.enabled&&("top"===g?n=(r=d.top+d.offset)-y:"bottom"===g?r=(n=p.chartHeight-d.bottom+d.offset)+y:(r=d.top+d.len-d.translate(c?v:k),n=d.top+d.len-d.translate(c?k:v)),"right"===g?a=(s=p.chartWidth-d.right+d.offset)+y:"left"===g?s=(a=d.left+d.offset)-y:(s=Math.round(d.left+d.translate(c?v:k))-A,a=Math.round(d.left+d.translate(c?k:v))-A),this.slotWidth=a-s,e.pos.x="left"===u?s:"right"===u?a:s+(a-s)/2,e.pos.y=n+(r-n)/2,i=p.renderer.fontMetrics(f.style.fontSize,l.element),t=l.getBBox().height,f.useHTML?e.pos.y+=i.b+-t/2:(o=Math.round(t/i.h),e.pos.y+=(i.b-(i.h-i.f))/2+-((o-1)*i.h)/2),e.pos.x+=d.horiz&&f.x||0)});var n=(d.prototype.isOuterAxis=function(){var i=this.axis,e=i.chart,t=i.grid.columnIndex,o=i.linkedParent&&i.linkedParent.grid.columns||i.grid.columns,r=t?i.linkedParent:i,n=-1,s=0;return e[i.coll].forEach(function(e,t){e.side!==i.side||e.options.isInternal||(s=t,e===r&&(n=t))}),s===n&&(!P(t)||o.length===t)},d.prototype.renderBorder=function(e){var t=this.axis,i=t.chart.renderer,o=t.options,r=i.path(e).addClass("highcharts-axis-line").add(t.axisBorder);return i.styledMode||r.attr({stroke:o.lineColor,"stroke-width":o.lineWidth,zIndex:7}),r},d);function d(e){this.axis=e}var x,k,G=(b.compose=function(e){p.keepProps.push("grid"),m(e.prototype,"unsquish",b.wrapUnsquish),o(e,"init",b.onInit),o(e,"afterGetOffset",b.onAfterGetOffset),o(e,"afterGetTitlePosition",b.onAfterGetTitlePosition),o(e,"afterInit",b.onAfterInit),o(e,"afterRender",b.onAfterRender),o(e,"afterSetAxisTranslation",b.onAfterSetAxisTranslation),o(e,"afterSetOptions",b.onAfterSetOptions),o(e,"afterSetOptions",b.onAfterSetOptions2),o(e,"afterSetScale",b.onAfterSetScale),o(e,"afterTickSize",b.onAfterTickSize),o(e,"trimTicks",b.onTrimTicks),o(e,"destroy",b.onDestroy)},b.onAfterGetOffset=function(){var e=this.grid;(e&&e.columns||[]).forEach(function(e){e.getOffset()})},b.onAfterGetTitlePosition=function(e){var t,i,o,r,n,s,a,l,d,c,p,h,f,u,g,m,x,k=this;!0===(k.options.grid||{}).enabled&&(t=k.axisTitle,i=k.height,o=k.horiz,r=k.left,n=k.offset,s=k.opposite,l=void 0===(a=k.options.title)?{}:a,d=k.top,c=k.width,p=k.tickSize(),h=t&&t.getBBox().width,f=l.x||0,u=l.y||0,g=v(l.margin,o?5:10),m=k.chart.renderer.fontMetrics(l.style&&l.style.fontSize,t).f,x=(o?d+i:r)+(o?1:-1)*(s?-1:1)*(p?p[0]/2:0)+(k.side===b.Side.bottom?m:0),e.titlePosition.x=o?r-h/2-g+f:x+(s?c:0)+n+f,e.titlePosition.y=o?x-(s?i:0)+(s?m:-m)/2+n+u:d-g+u)},b.onAfterInit=function(){var e,t,i=this,o=i.chart,r=i.options.grid,n=void 0===r?{}:r,s=i.userOptions;if(n.enabled&&((t=(e=i).options).labels||(t.labels={}),t.labels.align=v(t.labels.align,"center"),e.categories||(t.showLastLabel=!1),e.labelRotation=0,t.labels.rotation=0,m(i,"labelFormatter",function(e){var t,i=this.axis,o=this.value,r=i.tickPositions,n=(i.isLinked?i.linkedParent:i).series[0],s=o===r[0],a=o===r[r.length-1],l=n&&u(n.options.data,function(e){return e[i.isXAxis?"x":"y"]===o});return l&&n.is("gantt")&&(t=g(l),h.seriesTypes.gantt.prototype.setGanttPointAliases(t)),this.isFirst=s,this.isLast=a,this.point=t,e.call(this)})),n.columns)for(var a=i.grid.columns=[],l=i.grid.columnIndex=0;++l<n.columns.length;){var d=g(s,n.columns[n.columns.length-l-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete d.grid.columns;var c=new p(i.chart,d);c.grid.isColumn=!0,c.grid.columnIndex=l,f(o.axes,c),f(o[i.coll],c),a.push(c)}},b.onAfterRender=function(){var e,t,i,o,r,n,s,a,l,d,c,p,h,f,u=this,g=u.grid,m=u.options;!0===(m.grid||{}).enabled&&(u.maxLabelDimensions=u.getMaxLabelDimensions(u.ticks,u.tickPositions),u.rightWall&&u.rightWall.destroy(),u.grid&&u.grid.isOuterAxis()&&u.axisLine&&(t=m.lineWidth)&&(o=(i=u.getLinePath(t))[0],r=i[1],n=((u.tickSize("tick")||[1])[0]-1)*(u.side===b.Side.top||u.side===b.Side.left?-1:1),"M"===o[0]&&"L"===r[0]&&(u.horiz?(o[2]+=n,r[2]+=n):(o[1]+=n,r[1]+=n)),!u.horiz&&u.chart.marginRight&&(s=[o,["L",u.left,o[2]]],a=["L",u.chart.chartWidth-u.chart.marginRight,u.toPixels(u.max+u.tickmarkOffset)],l=[["M",r[1],u.toPixels(u.max+u.tickmarkOffset)],a],u.grid.upperBorder||u.min%1==0||(u.grid.upperBorder=u.grid.renderBorder(s)),u.grid.upperBorder&&u.grid.upperBorder.animate({d:s}),u.grid.lowerBorder||u.max%1==0||(u.grid.lowerBorder=u.grid.renderBorder(l)),u.grid.lowerBorder&&u.grid.lowerBorder.animate({d:l})),u.grid.axisLineExtra?u.grid.axisLineExtra.animate({d:i}):u.grid.axisLineExtra=u.grid.renderBorder(i),u.axisLine[u.showAxis?"show":"hide"](!0)),(g&&g.columns||[]).forEach(function(e){e.render()}),!u.horiz&&u.chart.hasRendered&&(u.scrollbar||null!==(e=u.linkedParent)&&void 0!==e&&e.scrollbar)&&(d=u.max,c=u.min,p=u.tickmarkOffset,h=u.tickPositions[u.tickPositions.length-1],p<c-(f=u.tickPositions[0])?u.ticks[f].label.hide():u.ticks[f].label.show(),p<h-d?u.ticks[h].label.hide():u.ticks[h].label.show(),h-d<p&&0<h-d&&u.ticks[h].isLast?u.ticks[h].mark.hide():u.ticks[h-1].mark.show()))},b.onAfterSetAxisTranslation=function(){var e,t=this,i=t.tickPositions&&t.tickPositions.info,o=t.options,r=o.grid||{},n=t.userOptions.labels||{};t.horiz?(!0===r.enabled&&t.series.forEach(function(e){e.options.pointRange=0}),i&&o.dateTimeLabelFormats&&o.labels&&!s(n.align)&&(!1===o.dateTimeLabelFormats[i.unitName].range||1<i.count)&&(o.labels.align="left",s(n.x)||(o.labels.x=3))):"treegrid"!==this.options.type&&null!==(e=t.grid)&&void 0!==e&&e.columns&&(this.minPointOffset=this.tickInterval)},b.onAfterSetOptions=function(e){var d,t=this.options,i=e.userOptions,o=t&&a(t.grid)?t.grid:{};!0===o.enabled&&(d=g(!0,{className:"highcharts-grid-axis "+(i.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},i),"xAxis"===this.coll&&(s(i.linkedTo)&&!s(i.tickPixelInterval)&&(d.tickPixelInterval=350),s(i.tickPixelInterval)||!s(i.linkedTo)||s(i.tickPositioner)||s(i.tickInterval)||(d.tickPositioner=function(e,t){var i=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(i){for(var o,r,n,s,a=d.units,l=0;l<a.length;l++)if(a[l][0]===i.unitName){o=l;break}return a[o+1]?(n=a[o+1][0],r=(a[o+1][1]||[1])[0]):"year"===i.unitName&&(n="year",r=10*i.count),s=c[n],this.tickInterval=s*r,this.getTimeTicks({unitRange:s,count:r,unitName:n},e,t,this.options.startOfWeek)}})),g(!0,this.options,d),this.horiz&&(t.minPadding=v(i.minPadding,0),t.maxPadding=v(i.maxPadding,0)),P(t.grid.borderWidth)&&(t.tickWidth=t.lineWidth=o.borderWidth))},b.onAfterSetOptions2=function(e){var t=e.userOptions,i=t&&t.grid||{},o=i.columns;i.enabled&&o&&g(!0,this.options,o[o.length-1])},b.onAfterSetScale=function(){(this.grid.columns||[]).forEach(function(e){e.setScale()})},b.onAfterTickSize=function(e){var t,i,o=p.defaultLeftAxisOptions,r=this.horiz,n=this.maxLabelDimensions,s=this.options.grid,a=void 0===s?{}:s;a.enabled&&n&&(t=2*Math.abs(o.labels.x),i=r?a.cellHeight||t+n.height:t+n.width,l(e.tickSize)?e.tickSize[0]=i:e.tickSize=[i,0])},b.onDestroy=function(t){var e=this.grid;(e.columns||[]).forEach(function(e){e.destroy(t.keepEvents)}),e.columns=void 0},b.onInit=function(e){var t=e.userOptions||{},i=t.grid||{};i.enabled&&s(i.borderColor)&&(t.tickColor=t.lineColor=i.borderColor),this.grid||(this.grid=new n(this))},b.onTrimTicks=function(){var e=this,t=e.options,i=t.grid||{},o=e.categories,r=e.tickPositions,n=r[0],s=r[r.length-1],a=e.linkedParent&&e.linkedParent.min,l=e.linkedParent&&e.linkedParent.max,d=a||e.min,c=l||e.max,p=e.tickInterval,h=n<d&&d<n+p,f=c<s&&s-p<c;!0!==i.enabled||o||!e.horiz&&!e.isLinked||(h&&!t.startOnTick&&(r[0]=d),f&&!t.endOnTick&&(r[r.length-1]=c))},b.wrapUnsquish=function(e){var t,i=this.options.grid;return!0===(void 0===i?{}:i).enabled&&this.categories?this.tickInterval:e.apply(this,(t=arguments,Array.prototype.slice.call(t,1)))},b);function b(){}return x=G=G||{},(k=x.Side||(x.Side={}))[k.top=0]="top",k[k.right=1]="right",k[k.bottom=2]="bottom",k[k.left=3]="left",G.compose(p),G}),i(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Axis.js"],t["Series/LineSeries.js"],t["Extensions/Stacking.js"],t["Core/Utilities.js"]],function(u,o,d,e){var r=e.addEvent,i=e.find,g=e.fireEvent,n=e.isArray,c=e.isNumber,m=e.pick,s=(x.isInBreak=function(e,t){var i=e.repeat||1/0,o=e.from,r=e.to-e.from,n=o<=t?(t-o)%i:i-(o-t)%i,s=e.inclusive?n<=r:n<r&&0!=n;return s},x.lin2Val=function(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i)return e;for(var o,r=e,n=0;n<i.length&&!((o=i[n]).from>=r);n++)(o.to<r||x.isInBreak(o,r))&&(r+=o.len);return r},x.val2Lin=function(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i)return e;for(var o,r=e,n=0;n<i.length;n++)if((o=i[n]).to<=e)r-=o.len;else{if(o.from>=e)break;if(x.isInBreak(o,e)){r-=e-o.from;break}}return r},x.prototype.findBreakAt=function(t,e){return i(e,function(e){return e.from<t&&t<e.to})},x.prototype.isInAnyBreak=function(e,t){var i,o,r,n=this.axis,s=n.options.breaks,a=s&&s.length;if(a){for(;a--;)x.isInBreak(s[a],e)&&(i=!0,o=o||m(s[a].showPoints,!n.isXAxis));r=i&&t?i&&!o:i}return r},x.prototype.setBreaks=function(e,t){var h=this,f=h.axis,i=n(e)&&!!e.length;f.isDirty=h.hasBreaks!==i,h.hasBreaks=i,f.options.breaks=f.userOptions.breaks=e,f.forceRedraw=!0,f.series.forEach(function(e){e.isDirty=!0}),i||f.val2lin!==x.val2Lin||(delete f.val2lin,delete f.lin2val),i&&(f.userOptions.ordinal=!1,f.lin2val=x.lin2Val,f.val2lin=x.val2Lin,f.setExtremes=function(e,t,i,o,r){if(h.hasBreaks){for(var n,s=this.options.breaks;n=h.findBreakAt(e,s);)e=n.to;for(;n=h.findBreakAt(t,s);)t=n.from;t<e&&(t=e)}u.prototype.setExtremes.call(this,e,t,i,o,r)},f.setAxisTranslation=function(e){var t,i,o,r,n,s,a,l,d,c,p;u.prototype.setAxisTranslation.call(this,e),h.unitLength=null,h.hasBreaks&&(t=f.options.breaks||[],i=[],o=[],r=0,a=f.userMin||f.min,l=f.userMax||f.max,d=m(f.pointRangePadding,0),t.forEach(function(e){s=e.repeat||1/0,x.isInBreak(e,a)&&(a+=e.to%s-a%s),x.isInBreak(e,l)&&(l-=l%s-e.from%s)}),t.forEach(function(e){for(c=e.from,s=e.repeat||1/0;a<c-s;)c-=s;for(;c<a;)c+=s;for(p=c;p<l;p+=s)i.push({value:p,move:"in"}),i.push({value:p+(e.to-e.from),move:"out",size:e.breakSize})}),i.sort(function(e,t){return e.value===t.value?("in"===e.move?0:1)-("in"===t.move?0:1):e.value-t.value}),n=0,c=a,i.forEach(function(e){1===(n+="in"===e.move?1:-1)&&"in"===e.move&&(c=e.value),0===n&&(o.push({from:c,to:e.value,len:e.value-c-(e.size||0)}),r+=e.value-c-(e.size||0))}),f.breakArray=h.breakArray=o,h.unitLength=l-a-r+d,g(f,"afterBreaks"),f.staticScale?f.transA=f.staticScale:h.unitLength&&(f.transA*=(l-f.min+d)/h.unitLength),d&&(f.minPixelPadding=f.transA*f.minPointOffset),f.min=a,f.max=l)}),m(t,!0)&&f.chart.redraw()},x);function x(e){this.hasBreaks=!1,this.axis=e}var t=(a.compose=function(e,t){e.keepProps.push("brokenAxis");var i=o.prototype;i.drawBreaks=function(i,e){var o,r,n,s,t,a=this,l=a.points;i&&i.brokenAxis&&i.brokenAxis.hasBreaks&&(t=i.brokenAxis,e.forEach(function(e){o=t&&t.breakArray||[],r=i.isXAxis?i.min:m(a.options.threshold,i.min),l.forEach(function(t){s=m(t["stack"+e.toUpperCase()],t[e]),o.forEach(function(e){c(r)&&c(s)&&(n=!1,r<e.from&&s>e.to||r>e.from&&s<e.from?n="pointBreak":(r<e.from&&s>e.from&&s<e.to||r>e.from&&s>e.to&&s<e.from)&&(n="pointInBreak"),n&&g(i,n,{point:t,brk:e}))})})}))},i.gappedPath=function(){var e=this.currentDataGrouping,t=e&&e.gapSize,i=this.options.gapSize,o=this.points.slice(),r=o.length-1,n=this.yAxis;if(i&&0<r){"value"!==this.options.gapUnit&&(i*=this.basePointRange),t&&i<t&&t>=this.basePointRange&&(i=t);for(var s,a=void 0,l=void 0;r--;)l&&!1!==l.visible||(l=o[r+1]),a=o[r],!1!==l.visible&&!1!==a.visible&&(l.x-a.x>i&&(s=(a.x+l.x)/2,o.splice(r+1,0,{isNull:!0,x:s}),n.stacking&&this.options.stacking&&((n.stacking.stacks[this.stackKey][s]=new d(n,n.options.stackLabels,!1,s,this.stack)).total=0)),l=a)}return this.getGraphPath(o)},r(e,"init",function(){this.brokenAxis||(this.brokenAxis=new s(this))}),r(e,"afterInit",function(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}),r(e,"afterSetTickPositions",function(){var e=this.brokenAxis;if(e&&e.hasBreaks){for(var t=this.tickPositions,i=this.tickPositions.info,o=[],r=0;r<t.length;r++)e.isInAnyBreak(t[r])||o.push(t[r]);this.tickPositions=o,this.tickPositions.info=i}}),r(e,"afterSetOptions",function(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}),r(t,"afterGeneratePoints",function(){var e=this,t=e.isDirty,i=e.options.connectNulls,o=e.points,r=e.xAxis,n=e.yAxis;if(t)for(var s=o.length;s--;){var a=o[s],l=!(null===a.y&&!1===i)&&(r&&r.brokenAxis&&r.brokenAxis.isInAnyBreak(a.x,!0)||n&&n.brokenAxis&&n.brokenAxis.isInAnyBreak(a.y,!0));a.visible=!l&&!1!==a.options.visible}}),r(t,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,m(this.pointArrayMap,["y"]))})},a);function a(){}return t.compose(u,o),t}),i(t,"Core/Axis/TreeGridAxis.js",[t["Core/Globals.js"],t["Core/Axis/Axis.js"],t["Core/Axis/Tick.js"],t["Gantt/Tree.js"],t["Core/Axis/TreeGridTick.js"],t["Mixins/TreeSeries.js"],t["Core/Utilities.js"]],function(p,e,h,u,f,t,i){var o,g=t.getLevelOptions,m=i.addEvent,x=i.find,k=i.fireEvent,v=i.isArray,b=i.isNumber,y=i.isObject,A=i.isString,P=i.merge,G=i.pick,O=i.wrap;return function(e){var t=!1;function r(e,t){var i=e.collapseStart||0,o=e.collapseEnd||0;return t<=o&&(i-=.5),{from:i,to:o,showPoints:!1}}function c(e,t,i){var a,l,d=[],r=[],c={},p={},h=-1,f="boolean"==typeof t&&t,o={after:function(e){var t=p[e.pos],i=0,o=0;t.children.forEach(function(e){o+=(e.descendants||0)+1,i=Math.max((e.height||0)+1,i)}),t.descendants=o,t.height=i,t.collapsed&&r.push(t)},before:function(e){var t,i,o=y(e.data,!0)?e.data:{},r=A(o.name)?o.name:"",n=c[e.parent],s=y(n,!0)?p[n.pos]:null;f&&y(s,!0)&&(t=x(s.children,function(e){return e.name===r}))?(i=t.pos,t.nodes.push(e)):i=h++,p[i]||(p[i]=t={depth:s?s.depth+1:0,name:r,id:o.id,nodes:[e],children:[],pos:i},-1!==i&&d.push(r),y(s,!0)&&s.children.push(t)),A(e.id)&&(c[e.id]=e),t&&!0===o.collapsed&&(t.collapsed=!0),e.pos=i}},n=u.getTree(e,o);return a=i,p=(l=function(e,i,t){var o=e.nodes,r=i+(-1===i?0:a-1),n=(r-i)/2,s=i+n;return o.forEach(function(e){var t=e.data;y(t,!0)&&(t.y=i+(t.seriesIndex||0),delete t.seriesIndex),e.pos=s}),(t[s]=e).pos=s,e.tickmarkOffset=.5+n,e.collapseStart=r+.5,e.children.forEach(function(e){l(e,r+1,t),r=(e.collapseEnd||0)-.5}),e.collapseEnd=r+.5,t})(p[-1],-1,{}),{categories:d,mapOfIdToNode:c,mapOfPosToGridNode:p,collapsedNodes:r,tree:n}}function n(d){d.target.axes.filter(function(e){return"treegrid"===e.options.type}).forEach(function(e){var i,t,o=e.options||{},r=o.labels,n=o.uniqueNames,s=0,a=o.max;if(!e.treeGrid.mapOfPosToGridNode||e.series.some(function(e){return!e.hasRendered||e.isDirtyData||e.isDirty})){if(i=e.series.reduce(function(t,i){return i.visible&&((i.options.data||[]).forEach(function(e){i.options.keys&&i.options.keys.length&&(e=i.pointClass.prototype.optionsToObject.call({series:i},e),p.seriesTypes.gantt.prototype.setGanttPointAliases(e)),y(e,!0)&&(e.seriesIndex=s,t.push(e))}),!0===n&&s++),t},[]),a&&i.length<a)for(var l=i.length;l<=a;l++)i.push({name:l+"​"});t=c(i,n||!1,!0===n?s:1),e.categories=t.categories,e.treeGrid.mapOfPosToGridNode=t.mapOfPosToGridNode,e.hasNames=!0,e.treeGrid.tree=t.tree,e.series.forEach(function(e){var t=(e.options.data||[]).map(function(t){return v(t)&&e.options.keys&&e.options.keys.length&&i.forEach(function(e){0<=t.indexOf(e.x)&&0<=t.indexOf(e.x2)&&(t=e)}),y(t,!0)?P(t):t});e.visible&&e.setData(t,!1)}),e.treeGrid.mapOptionsToLevel=g({defaults:r,from:1,levels:r&&r.levels,to:e.treeGrid.tree&&e.treeGrid.tree.height}),"beforeRender"===d.type&&(e.treeGrid.collapsedNodes=t.collapsedNodes)}})}function i(e,t){var i,o,r,n=this,s=n.treeGrid.mapOptionsToLevel||{},a="treegrid"===n.options.type,l=n.ticks,d=l[t];a&&n.treeGrid.mapOfPosToGridNode?((i=s[(r=n.treeGrid.mapOfPosToGridNode[t]).depth])&&(o={labels:i}),d?(d.parameters.category=r.name,d.options=o,d.addLabel()):l[t]=d=new h(n,t,void 0,void 0,{category:r.name,tickmarkOffset:r.tickmarkOffset,options:o})):e.apply(n,Array.prototype.slice.call(arguments,1))}function o(e){var t,i=this,o=i.options,r=o&&o.labels,n=r&&b(r.indentation)?r.indentation:0,s=e.apply(i,Array.prototype.slice.call(arguments,1));return"treegrid"===i.options.type&&i.treeGrid.mapOfPosToGridNode&&(t=i.treeGrid.mapOfPosToGridNode[-1].height||0,s.width+=n*(t-1)),s}function s(e,t,i){var o=this,r="treegrid"===i.type;o.treeGrid||(o.treeGrid=new l(o)),r&&(m(t,"beforeRender",n),m(t,"beforeRedraw",n),m(t,"addSeries",function(e){var t;e.options.data&&(t=c(e.options.data,i.uniqueNames||!1,1),o.treeGrid.collapsedNodes=(o.treeGrid.collapsedNodes||[]).concat(t.collapsedNodes))}),m(o,"foundExtremes",function(){o.treeGrid.collapsedNodes&&o.treeGrid.collapsedNodes.forEach(function(t){var e=o.treeGrid.collapse(t);o.brokenAxis&&(o.brokenAxis.setBreaks(e,!1),o.treeGrid.collapsedNodes&&(o.treeGrid.collapsedNodes=o.treeGrid.collapsedNodes.filter(function(e){return t.collapseStart!==e.collapseStart||t.collapseEnd!==e.collapseEnd})))})}),m(o,"afterBreaks",function(){var e;"yAxis"===o.coll&&!o.staticScale&&null!==(e=o.chart.options.chart)&&void 0!==e&&e.height&&(o.isDirty=!0)}),i=P({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},i,{reversed:!0,grid:{columns:void 0}})),e.apply(o,[t,i]),r&&(o.hasNames=!0,o.options.showLastLabel=!0)}function a(e){var t=this,i=t.options;"treegrid"===i.type?(t.min=G(t.userMin,i.min,t.dataMin),t.max=G(t.userMax,i.max,t.dataMax),k(t,"foundExtremes"),t.setAxisTranslation(!0),t.tickmarkOffset=.5,t.tickInterval=1,t.tickPositions=t.treeGrid.mapOfPosToGridNode?t.treeGrid.getTickPositions():[]):e.apply(t,Array.prototype.slice.call(arguments,1))}e.compose=function(e){t||(O(e.prototype,"generateTick",i),O(e.prototype,"getMaxLabelDimensions",o),O(e.prototype,"init",s),O(e.prototype,"setTickInterval",a),f.compose(h),t=!0)};var l=(d.prototype.setCollapsedStatus=function(r){var e=this.axis,n=e.chart;e.series.forEach(function(e){var t,i,o=e.options.data;r.id&&o&&(t=n.get(r.id),i=o[e.data.indexOf(t)],t&&i&&(t.collapsed=r.collapsed,i.collapsed=r.collapsed))})},d.prototype.collapse=function(e){var t=this.axis,i=t.options.breaks||[],o=r(e,t.max);return i.push(o),e.collapsed=!0,t.treeGrid.setCollapsedStatus(e),i},d.prototype.expand=function(e){var t=this.axis,i=t.options.breaks||[],o=r(e,t.max);return e.collapsed=!1,t.treeGrid.setCollapsedStatus(e),i.reduce(function(e,t){return t.to===o.to&&t.from===o.from||e.push(t),e},[])},d.prototype.getTickPositions=function(){var o=this.axis,r=Math.floor(o.min/o.tickInterval)*o.tickInterval,n=Math.ceil(o.max/o.tickInterval)*o.tickInterval;return Object.keys(o.treeGrid.mapOfPosToGridNode||{}).reduce(function(e,t){var i=+t;return!(r<=i&&i<=n)||o.brokenAxis&&o.brokenAxis.isInAnyBreak(i)||e.push(i),e},[])},d.prototype.isCollapsed=function(e){var t=this.axis,i=t.options.breaks||[],o=r(e,t.max);return i.some(function(e){return e.from===o.from&&e.to===o.to})},d.prototype.toggleCollapse=function(e){return this.isCollapsed(e)?this.expand(e):this.collapse(e)},d);function d(e){this.axis=e}e.Additions=l}(o=o||{}),e.prototype.utils={getNode:u.getNode},o.compose(e),o}),i(t,"masters/modules/treegrid.src.js",[],function(){})});