!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i))}e(t=t?t._modules:{},"Gantt/Tree.js",[t["Core/Utilities.js"]],function(t){function s(t,s){var o=t.reduce(function(t,e){var i=u(e.parent,"");return void 0===t[i]&&(t[i]=[]),t[i].push(e),t},{});return Object.keys(o).forEach(function(t,e){var i=o[t];""!==t&&-1===s.indexOf(t)&&(i.forEach(function(t){e[""].push(t)}),delete e[t])}),o}var p=t.extend,f=t.isNumber,u=t.pick,g=function(s,t,o,e,r,n){var a,l,d=0,h=0,i=n&&n.after,c=n&&n.before;return t={data:e,depth:o-1,id:s,level:o,parent:t},"function"==typeof c&&c(t,n),c=(r[s]||[]).map(function(t){var e=g(t.id,s,o+1,t,r,n),i=t.start;return t=!0===t.milestone?i:t.end,a=!f(a)||i<a?i:a,l=!f(l)||l<t?t:l,d=d+1+e.descendants,h=Math.max(e.height+1,h),e}),e&&(e.start=u(e.start,a),e.end=u(e.end,l)),p(t,{children:c,descendants:d,height:h}),"function"==typeof i&&i(t,n),t};return{getListOfParents:s,getNode:g,getTree:function(t,e){var i=t.map(function(t){return t.id});return t=s(t,i),g("",null,1,null,t,e)}}}),e(t,"Core/Axis/TreeGridTick.js",[t["Core/Utilities.js"]],function(t){var e,P=t.addEvent,G=t.defined,O=t.isObject,T=t.isNumber,B=t.pick,a=t.wrap;return function(t){function e(){this.treeGrid||(this.treeGrid=new r(this))}function i(t,e,i,s,o,r,n,a,l){var d=B(this.options&&this.options.labels,r);r=this.pos;var h=this.axis,c="treegrid"===h.options.type;return t=t.apply(this,[e,i,s,o,d,n,a,l]),c&&(e=d&&O(d.symbol,!0)?d.symbol:{},d=d&&T(d.indentation)?d.indentation:0,r=(r=(h=h.treeGrid.mapOfPosToGridNode)&&h[r])&&r.depth||1,t.x+=e.width+2*e.padding+(r-1)*d),t}function s(t){var e,i,s,o,r,n,a,l,d,h,c,p,f=this,u=f.pos,g=f.axis,m=f.label,k=g.treeGrid.mapOfPosToGridNode,x=g.options,v=B(f.options&&f.options.labels,x&&x.labels),b=v&&O(v.symbol,!0)?v.symbol:{},y=(k=k&&k[u])&&k.depth,x="treegrid"===x.type,A=-1<g.tickPositions.indexOf(u),u=g.chart.styledMode;x&&k&&m&&m.element&&m.addClass("highcharts-treegrid-node-level-"+y),t.apply(f,Array.prototype.slice.call(arguments,1)),x&&m&&m.element&&k&&k.descendants&&0<k.descendants&&(g=g.treeGrid.isCollapsed(k),e=f,i={color:!u&&m.styles&&m.styles.color||"",collapsed:g,group:m.parentGroup,options:b,renderer:m.renderer,show:A,xy:m.xy},s=!(e=e.treeGrid).labelIcon,o=i.renderer,r=i.xy,n=i.options,a=n.width,l=n.height,d=r.x-a/2-n.padding,r=r.y-l/2,h=i.collapsed?90:180,c=i.show&&T(r),(p=e.labelIcon)||(e.labelIcon=p=o.path(o.symbols[n.type](n.x,n.y,a,l)).addClass("highcharts-label-icon").add(i.group)),c||p.attr({y:-9999}),o.styledMode||p.attr({"stroke-width":1,fill:B(i.color,"#666666")}).css({cursor:"pointer",stroke:n.lineColor,strokeWidth:n.lineWidth}),p[s?"attr":"animate"]({translateX:d,translateY:r,rotation:h}),b="highcharts-treegrid-node-"+(g?"expanded":"collapsed"),m.addClass("highcharts-treegrid-node-"+(g?"collapsed":"expanded")).removeClass(b),u||m.css({cursor:"pointer"}),[m,f.treeGrid.labelIcon].forEach(function(t){t&&!t.attachedTreeGridEvents&&(P(t.element,"mouseover",function(){m.addClass("highcharts-treegrid-node-active"),m.renderer.styledMode||m.css({textDecoration:"underline"})}),P(t.element,"mouseout",function(){var t=G(v.style)?v.style:{};m.removeClass("highcharts-treegrid-node-active"),m.renderer.styledMode||m.css({textDecoration:t.textDecoration})}),P(t.element,"click",function(){f.treeGrid.toggleCollapse()}),t.attachedTreeGridEvents=!0)}))}var o=!1;t.compose=function(t){o||(P(t,"init",e),a(t.prototype,"getLabelPosition",i),a(t.prototype,"renderLabel",s),t.prototype.collapse=function(t){this.treeGrid.collapse(t)},t.prototype.expand=function(t){this.treeGrid.expand(t)},t.prototype.toggleCollapse=function(t){this.treeGrid.toggleCollapse(t)},o=!0)};var r=(n.prototype.collapse=function(t){var e=this.tick,i=e.axis,s=i.brokenAxis;s&&i.treeGrid.mapOfPosToGridNode&&(e=i.treeGrid.collapse(i.treeGrid.mapOfPosToGridNode[e.pos]),s.setBreaks(e,B(t,!0)))},n.prototype.expand=function(t){var e=this.tick,i=e.axis,s=i.brokenAxis;s&&i.treeGrid.mapOfPosToGridNode&&(e=i.treeGrid.expand(i.treeGrid.mapOfPosToGridNode[e.pos]),s.setBreaks(e,B(t,!0)))},n.prototype.toggleCollapse=function(t){var e=this.tick,i=e.axis,s=i.brokenAxis;s&&i.treeGrid.mapOfPosToGridNode&&(e=i.treeGrid.toggleCollapse(i.treeGrid.mapOfPosToGridNode[e.pos]),s.setBreaks(e,B(t,!0)))},n);function n(t){this.tick=t}t.Additions=r}(e=e||{}),e}),e(t,"Mixins/TreeSeries.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(g,t){var h=t.extend,n=t.isArray,a=t.isNumber,l=t.isObject,d=t.merge,m=t.pick;return{getColor:function(t,e){var i,s,o,r,n=e.index,a=e.mapOptionsToLevel,l=e.parentColor,d=e.parentColorIndex,h=e.series,c=e.colors,p=e.siblings,f=h.points,u=h.chart.options.chart;return t&&(f=f[t.i],t=a[t.level]||{},(a=f&&t.colorByPoint)&&(s=f.index%(c?c.length:u.colorCount),o=c&&c[s]),h.chart.styledMode||(c=f&&f.options.color,u=t&&t.color,(i=l)&&(i=(i=t&&t.colorVariation)&&"brightness"===i.key?g.parse(l).brighten(n/p*i.to).get():l),i=m(c,u,o,i,h.color)),r=m(f&&f.options.colorIndex,t&&t.colorIndex,s,d,e.colorIndex)),{color:i,colorIndex:r}},getLevelOptions:function(t){var e=null;if(l(t)){e={};var o=a(t.from)?t.from:1,i=t.levels,s={},r=l(t.defaults)?t.defaults:{};for(n(i)&&(s=i.reduce(function(t,e){var i,s;return l(e)&&a(e.level)&&(s="boolean"==typeof(i=d({},e)).levelIsConstant?i.levelIsConstant:r.levelIsConstant,delete i.levelIsConstant,delete i.level,e=e.level+(s?0:o-1),l(t[e])?h(t[e],i):t[e]=i),t},{})),i=a(t.to)?t.to:1,t=0;t<=i;t++)e[t]=d({},r,l(s[t])?s[t]:{})}return e},setTreeValues:function s(o,r){var t=r.before,e=r.idRoot,i=r.mapIdToNode[e],n=r.points[o.i],a=n&&n.options||{},l=0,d=[];return h(o,{levelDynamic:o.level-("boolean"!=typeof r.levelIsConstant||r.levelIsConstant?0:i.level),name:m(n&&n.name,""),visible:e===o.id||"boolean"==typeof r.visible&&r.visible}),"function"==typeof t&&(o=t(o,r)),o.children.forEach(function(t,e){var i=h({},r);h(i,{index:e,siblings:o.children.length,visible:o.visible}),t=s(t,i),d.push(t),t.visible&&(l+=t.val)}),o.visible=0<l||o.visible,t=m(a.value,l),h(o,{children:d,childrenTotal:l,isLeaf:o.visible&&!l,val:t}),o},updateRootId:function(t){var e;return l(t)&&(e=l(t.options)?t.options:{},e=m(t.rootNode,e.rootId,""),l(t.userOptions)&&(t.userOptions.rootId=e),t.rootNode=e),e}}}),e(t,"Core/Axis/GridAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Options.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(l,d,t,e,r){var i=r.addEvent,n=r.defined,h=r.erase,c=r.find,a=r.isArray,u=r.isNumber,p=r.merge,g=r.pick,f=r.timeUnits,m=r.wrap;t=d.Chart;l.prototype.getMaxLabelDimensions=function(s,t){var o={width:0,height:0};return t.forEach(function(t){var e,i;t=s[t],r.isObject(t,!0)&&(t=(e=r.isObject(t.label,!0)?t.label:{}).getBBox?e.getBBox().height:0,e.textStr&&!u(e.textPxLength)&&(e.textPxLength=e.getBBox().width),i=u(e.textPxLength)?Math.round(e.textPxLength):0,e.textStr&&(i=Math.round(e.getBBox().width)),o.height=Math.max(t,o.height),o.width=Math.max(i,o.width))}),o},d.dateFormats.W=function(t){t=new this.Date(t);var e=(this.get("Day",t)+6)%7,i=new this.Date(t.valueOf());return this.set("Date",i,this.get("Date",t)-e+3),e=new this.Date(this.get("FullYear",i),0,1),4!==this.get("Day",e)&&(this.set("Month",t,0),this.set("Date",t,1+(11-this.get("Day",e))%7)),(1+Math.floor((i.valueOf()-e.valueOf())/6048e5)).toString()},d.dateFormats.E=function(t){return this.dateFormat("%a",t,!0).charAt(0)},i(t,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.grid&&t.grid.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})}),i(e,"afterGetLabelPosition",function(t){var e,i=this.label,s=this.axis,o=s.reversed,r=s.chart,n=s.options.grid||{},a=s.options.labels,l=a.align,d=k.Side[s.side],h=t.tickmarkOffset,c=s.tickPositions,p=this.pos-h,c=u(c[t.index+1])?c[t.index+1]-h:s.max+h,h=(f=s.tickSize("tick"))?f[0]:0,f=f?f[1]/2:0;!0===n.enabled&&("top"===d?e=(n=s.top+s.offset)-h:"bottom"===d?n=(e=r.chartHeight-s.bottom+s.offset)+h:(n=s.top+s.len-s.translate(o?c:p),e=s.top+s.len-s.translate(o?p:c)),"right"===d?o=(d=r.chartWidth-s.right+s.offset)+h:"left"===d?d=(o=s.left+s.offset)-h:(d=Math.round(s.left+s.translate(o?c:p))-f,o=Math.round(s.left+s.translate(o?p:c))-f),this.slotWidth=o-d,t.pos.x="left"===l?d:"right"===l?o:d+(o-d)/2,t.pos.y=e+(n-e)/2,r=r.renderer.fontMetrics(a.style.fontSize,i.element),i=i.getBBox().height,a.useHTML?t.pos.y+=r.b+-i/2:(i=Math.round(i/r.h),t.pos.y+=(r.b-(r.h-r.f))/2+-((i-1)*r.h)/2),t.pos.x+=s.horiz&&a.x||0)});var s,o=(v.prototype.isOuterAxis=function(){var i=this.axis,t=i.grid.columnIndex,e=i.linkedParent&&i.linkedParent.grid.columns||i.grid.columns,s=t?i.linkedParent:i,o=-1,r=0;return i.chart[i.coll].forEach(function(t,e){t.side!==i.side||t.options.isInternal||(r=e,t===s&&(o=e))}),r===o&&(!u(t)||e.length===t)},v.prototype.renderBorder=function(t){var e=this.axis,i=e.chart.renderer,s=e.options;return t=i.path(t).addClass("highcharts-axis-line").add(e.axisBorder),i.styledMode||t.attr({stroke:s.lineColor,"stroke-width":s.lineWidth,zIndex:7}),t},v),k=(x.compose=function(t){l.keepProps.push("grid"),m(t.prototype,"unsquish",x.wrapUnsquish),i(t,"init",x.onInit),i(t,"afterGetOffset",x.onAfterGetOffset),i(t,"afterGetTitlePosition",x.onAfterGetTitlePosition),i(t,"afterInit",x.onAfterInit),i(t,"afterRender",x.onAfterRender),i(t,"afterSetAxisTranslation",x.onAfterSetAxisTranslation),i(t,"afterSetOptions",x.onAfterSetOptions),i(t,"afterSetOptions",x.onAfterSetOptions2),i(t,"afterSetScale",x.onAfterSetScale),i(t,"afterTickSize",x.onAfterTickSize),i(t,"trimTicks",x.onTrimTicks),i(t,"destroy",x.onDestroy)},x.onAfterGetOffset=function(){var t=this.grid;(t&&t.columns||[]).forEach(function(t){t.getOffset()})},x.onAfterGetTitlePosition=function(t){var e,i,s,o,r,n,a,l,d,h,c,p,f,u;!0===(this.options.grid||{}).enabled&&(f=this.axisTitle,e=this.height,i=this.horiz,s=this.left,o=this.offset,r=this.opposite,n=void 0===(a=this.options.title)?{}:a,a=this.top,l=this.width,u=this.tickSize(),d=f&&f.getBBox().width,h=n.x||0,c=n.y||0,p=g(n.margin,i?5:10),f=this.chart.renderer.fontMetrics(n.style&&n.style.fontSize,f).f,u=(i?a+e:s)+(i?1:-1)*(r?-1:1)*(u?u[0]/2:0)+(this.side===x.Side.bottom?f:0),t.titlePosition.x=i?s-d/2-p+h:u+(r?l:0)+o+h,t.titlePosition.y=i?u-(r?e:0)+(r?f:-f)/2+o+c:a-p+c)},x.onAfterInit=function(){var t,e,i=this.chart,s=void 0===(s=this.options.grid)?{}:s,o=this.userOptions;if(s.enabled&&((e=(t=this).options).labels||(e.labels={}),e.labels.align=g(e.labels.align,"center"),t.categories||(e.showLastLabel=!1),t.labelRotation=0,e.labels.rotation=0,m(this,"labelFormatter",function(t){var e,i=this.axis,s=this.value,o=i.tickPositions,r=(i.isLinked?i.linkedParent:i).series[0],n=s===o[0],o=s===o[o.length-1],a=r&&c(r.options.data,function(t){return t[i.isXAxis?"x":"y"]===s});return a&&r.is("gantt")&&(e=p(a),d.seriesTypes.gantt.prototype.setGanttPointAliases(e)),this.isFirst=n,this.isLast=o,this.point=e,t.call(this)})),s.columns)for(var r=this.grid.columns=[],n=this.grid.columnIndex=0;++n<s.columns.length;){var a=p(o,s.columns[s.columns.length-n-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete a.grid.columns,(a=new l(this.chart,a)).grid.isColumn=!0,a.grid.columnIndex=n,h(i.axes,a),h(i[this.coll],a),r.push(a)}},x.onAfterRender=function(){var t,e,i,s,o=this.grid,r=this.options;!0===(r.grid||{}).enabled&&(this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions),this.rightWall&&this.rightWall.destroy(),this.grid&&this.grid.isOuterAxis()&&this.axisLine&&(r=r.lineWidth)&&(e=(r=this.getLinePath(r))[0],i=r[1],s=((this.tickSize("tick")||[1])[0]-1)*(this.side===x.Side.top||this.side===x.Side.left?-1:1),"M"===e[0]&&"L"===i[0]&&(this.horiz?(e[2]+=s,i[2]+=s):(e[1]+=s,i[1]+=s)),!this.horiz&&this.chart.marginRight&&(e=[e,["L",this.left,e[2]]],s=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(this.max+this.tickmarkOffset)],i=[["M",i[1],this.toPixels(this.max+this.tickmarkOffset)],s],this.grid.upperBorder||0==this.min%1||(this.grid.upperBorder=this.grid.renderBorder(e)),this.grid.upperBorder&&this.grid.upperBorder.animate({d:e}),this.grid.lowerBorder||0==this.max%1||(this.grid.lowerBorder=this.grid.renderBorder(i)),this.grid.lowerBorder&&this.grid.lowerBorder.animate({d:i})),this.grid.axisLineExtra?this.grid.axisLineExtra.animate({d:r}):this.grid.axisLineExtra=this.grid.renderBorder(r),this.axisLine[this.showAxis?"show":"hide"](!0)),(o&&o.columns||[]).forEach(function(t){t.render()}),!this.horiz&&this.chart.hasRendered&&(this.scrollbar||null!==(t=this.linkedParent)&&void 0!==t&&t.scrollbar)&&(t=this.max,o=this.tickmarkOffset,r=this.tickPositions[this.tickPositions.length-1],i=this.tickPositions[0],this.min-i>o?this.ticks[i].label.hide():this.ticks[i].label.show(),o<r-t?this.ticks[r].label.hide():this.ticks[r].label.show(),r-t<o&&0<r-t&&this.ticks[r].isLast?this.ticks[r].mark.hide():this.ticks[r-1].mark.show()))},x.onAfterSetAxisTranslation=function(){var t,e=this.tickPositions&&this.tickPositions.info,i=this.options,s=i.grid||{},o=this.userOptions.labels||{};this.horiz?(!0===s.enabled&&this.series.forEach(function(t){t.options.pointRange=0}),e&&i.dateTimeLabelFormats&&i.labels&&!n(o.align)&&(!1===i.dateTimeLabelFormats[e.unitName].range||1<e.count)&&(i.labels.align="left",n(o.x)||(i.labels.x=3))):"treegrid"!==this.options.type&&null!==(t=this.grid)&&void 0!==t&&t.columns&&(this.minPointOffset=this.tickInterval)},x.onAfterSetOptions=function(t){var e=this.options;t=t.userOptions;var l,i=e&&r.isObject(e.grid,!0)?e.grid:{};!0===i.enabled&&(l=p(!0,{className:"highcharts-grid-axis "+(t.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,110]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},t),"xAxis"===this.coll&&(n(t.linkedTo)&&!n(t.tickPixelInterval)&&(l.tickPixelInterval=350),n(t.tickPixelInterval)||!n(t.linkedTo)||n(t.tickPositioner)||n(t.tickInterval)||(l.tickPositioner=function(t,e){var i=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(i){for(var s,o,r=l.units,n=0;n<r.length;n++)if(r[n][0]===i.unitName){var a=n;break}return r[a+1]?(s=r[a+1][0],o=(r[a+1][1]||[1])[0]):"year"===i.unitName&&(s="year",o=10*i.count),i=f[s],this.tickInterval=i*o,this.getTimeTicks({unitRange:i,count:o,unitName:s},t,e,this.options.startOfWeek)}})),p(!0,this.options,l),this.horiz&&(e.minPadding=g(t.minPadding,0),e.maxPadding=g(t.maxPadding,0)),u(e.grid.borderWidth)&&(e.tickWidth=e.lineWidth=i.borderWidth))},x.onAfterSetOptions2=function(t){var e=(t=(t=t.userOptions)&&t.grid||{}).columns;t.enabled&&e&&p(!0,this.options,e[e.length-1])},x.onAfterSetScale=function(){(this.grid.columns||[]).forEach(function(t){t.setScale()})},x.onAfterTickSize=function(t){var e=l.defaultLeftAxisOptions,i=this.horiz,s=this.maxLabelDimensions,o=this.options.grid;(o=void 0===o?{}:o).enabled&&s&&(e=2*Math.abs(e.labels.x),i=i?o.cellHeight||e+s.height:e+s.width,a(t.tickSize)?t.tickSize[0]=i:t.tickSize=[i,0])},x.onDestroy=function(e){var t=this.grid;(t.columns||[]).forEach(function(t){t.destroy(e.keepEvents)}),t.columns=void 0},x.onInit=function(t){var e=(t=t.userOptions||{}).grid||{};e.enabled&&n(e.borderColor)&&(t.tickColor=t.lineColor=e.borderColor),this.grid||(this.grid=new o(this))},x.onTrimTicks=function(){var t=this.options,e=this.categories,i=this.tickPositions,s=i[0],o=i[i.length-1],r=this.linkedParent&&this.linkedParent.min||this.min,n=this.linkedParent&&this.linkedParent.max||this.max,a=this.tickInterval;!0!==(t.grid||{}).enabled||e||!this.horiz&&!this.isLinked||(s<r&&r<s+a&&!t.startOnTick&&(i[0]=r),n<o&&o-a<n&&!t.endOnTick&&(i[i.length-1]=n))},x.wrapUnsquish=function(t){var e=this.options.grid;return!0===(void 0===e?{}:e).enabled&&this.categories?this.tickInterval:t.apply(this,Array.prototype.slice.call(arguments,1))},x);function x(){}function v(t){this.axis=t}return(s=(s=k=k||{}).Side||(s.Side={}))[s.top=0]="top",s[s.right=1]="right",s[s.bottom=2]="bottom",s[s.left=3]="left",k.compose(l),k}),e(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Axis.js"],t["Series/LineSeries.js"],t["Extensions/Stacking.js"],t["Core/Utilities.js"]],function(f,s,n,t){var o=t.addEvent,i=t.find,u=t.fireEvent,r=t.isArray,d=t.isNumber,g=t.pick,a=(m.isInBreak=function(t,e){var i=t.repeat||1/0,s=t.from,o=t.to-t.from;return e=s<=e?(e-s)%i:i-(s-e)%i,t.inclusive?e<=o:e<o&&0!==e},m.lin2Val=function(t){var e,i=this.brokenAxis;if(!(i=i&&i.breakArray))return t;for(e=0;e<i.length;e++){var s=i[e];if(s.from>=t)break;(s.to<t||m.isInBreak(s,t))&&(t+=s.len)}return t},m.val2Lin=function(t){var e=this.brokenAxis;if(!(e=e&&e.breakArray))return t;for(var i=t,s=0;s<e.length;s++){var o=e[s];if(o.to<=t)i-=o.len;else{if(o.from>=t)break;if(m.isInBreak(o,t)){i-=t-o.from;break}}}return i},m.prototype.findBreakAt=function(e,t){return i(t,function(t){return t.from<e&&e<t.to})},m.prototype.isInAnyBreak=function(t,e){var i,s,o=this.axis,r=o.options.breaks,n=r&&r.length;if(n){for(;n--;)m.isInBreak(r[n],t)&&(i=!0,s=s||g(r[n].showPoints,!o.isXAxis));var a=i&&e?i&&!s:i}return a},m.prototype.setBreaks=function(t,e){var c=this,p=c.axis,i=r(t)&&!!t.length;p.isDirty=c.hasBreaks!==i,c.hasBreaks=i,p.options.breaks=p.userOptions.breaks=t,p.forceRedraw=!0,p.series.forEach(function(t){t.isDirty=!0}),i||p.val2lin!==m.val2Lin||(delete p.val2lin,delete p.lin2val),i&&(p.userOptions.ordinal=!1,p.lin2val=m.lin2Val,p.val2lin=m.val2Lin,p.setExtremes=function(t,e,i,s,o){if(c.hasBreaks){for(var r,n=this.options.breaks;r=c.findBreakAt(t,n);)t=r.to;for(;r=c.findBreakAt(e,n);)e=r.from;e<t&&(e=t)}f.prototype.setExtremes.call(this,t,e,i,s,o)},p.setAxisTranslation=function(t){var e,i,s,o,r,n,a,l,d,h;f.prototype.setAxisTranslation.call(this,t),c.unitLength=null,c.hasBreaks&&(t=p.options.breaks||[],e=[],i=[],s=0,r=p.userMin||p.min,n=p.userMax||p.max,a=g(p.pointRangePadding,0),t.forEach(function(t){o=t.repeat||1/0,m.isInBreak(t,r)&&(r+=t.to%o-r%o),m.isInBreak(t,n)&&(n-=n%o-t.from%o)}),t.forEach(function(t){for(h=t.from,o=t.repeat||1/0;r<h-o;)h-=o;for(;h<r;)h+=o;for(l=h;l<n;l+=o)e.push({value:l,move:"in"}),e.push({value:l+(t.to-t.from),move:"out",size:t.breakSize})}),e.sort(function(t,e){return t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value}),d=0,h=r,e.forEach(function(t){1===(d+="in"===t.move?1:-1)&&"in"===t.move&&(h=t.value),0===d&&(i.push({from:h,to:t.value,len:t.value-h-(t.size||0)}),s+=t.value-h-(t.size||0))}),p.breakArray=c.breakArray=i,c.unitLength=n-r-s+a,u(p,"afterBreaks"),p.staticScale?p.transA=p.staticScale:c.unitLength&&(p.transA*=(n-p.min+a)/c.unitLength),a&&(p.minPixelPadding=p.transA*p.minPointOffset),p.min=r,p.max=n)}),g(e,!0)&&p.chart.redraw()},m);function m(t){this.hasBreaks=!1,this.axis=t}function e(){}return e.compose=function(t,e){t.keepProps.push("brokenAxis");var i=s.prototype;i.drawBreaks=function(i,t){var s,o,r,n,e,a=this,l=a.points;i&&i.brokenAxis&&i.brokenAxis.hasBreaks&&(e=i.brokenAxis,t.forEach(function(t){s=e&&e.breakArray||[],o=i.isXAxis?i.min:g(a.options.threshold,i.min),l.forEach(function(e){n=g(e["stack"+t.toUpperCase()],e[t]),s.forEach(function(t){d(o)&&d(n)&&(r=!1,o<t.from&&n>t.to||o>t.from&&n<t.from?r="pointBreak":(o<t.from&&n>t.from&&n<t.to||o>t.from&&n>t.to&&n<t.from)&&(r="pointInBreak"),r&&u(i,r,{point:e,brk:t}))})})}))},i.gappedPath=function(){var t,e=(i=this.currentDataGrouping)&&i.gapSize,i=this.options.gapSize,s=this.points.slice(),o=s.length-1,r=this.yAxis;if(i&&0<o)for("value"!==this.options.gapUnit&&(i*=this.basePointRange),e&&i<e&&e>=this.basePointRange&&(i=e),t=void 0;o--;)t&&!1!==t.visible||(t=s[o+1]),e=s[o],!1!==t.visible&&!1!==e.visible&&(t.x-e.x>i&&(t=(e.x+t.x)/2,s.splice(o+1,0,{isNull:!0,x:t}),r.stacking&&this.options.stacking&&((t=r.stacking.stacks[this.stackKey][t]=new n(r,r.options.stackLabels,!1,t,this.stack)).total=0)),t=e);return this.getGraphPath(s)},o(t,"init",function(){this.brokenAxis||(this.brokenAxis=new a(this))}),o(t,"afterInit",function(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}),o(t,"afterSetTickPositions",function(){var t=this.brokenAxis;if(t&&t.hasBreaks){for(var e=this.tickPositions,i=this.tickPositions.info,s=[],o=0;o<e.length;o++)t.isInAnyBreak(e[o])||s.push(e[o]);this.tickPositions=s,this.tickPositions.info=i}}),o(t,"afterSetOptions",function(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}),o(e,"afterGeneratePoints",function(){var t=this.options.connectNulls,e=this.points,i=this.xAxis,s=this.yAxis;if(this.isDirty)for(var o=e.length;o--;){var r=e[o],n=!(null===r.y&&!1===t)&&(i&&i.brokenAxis&&i.brokenAxis.isInAnyBreak(r.x,!0)||s&&s.brokenAxis&&s.brokenAxis.isInAnyBreak(r.y,!0));r.visible=!n&&!1!==r.options.visible}}),o(e,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,g(this.pointArrayMap,["y"]))})},(t=e).compose(f,s),t}),e(t,"Core/Axis/TreeGridAxis.js",[t["Core/Globals.js"],t["Core/Axis/Axis.js"],t["Core/Axis/Tick.js"],t["Gantt/Tree.js"],t["Core/Axis/TreeGridTick.js"],t["Mixins/TreeSeries.js"],t["Core/Utilities.js"]],function(c,t,p,f,u,e,i){var s,g=e.getLevelOptions,m=i.addEvent,k=i.find,x=i.fireEvent,v=i.isArray,b=i.isNumber,y=i.isObject,A=i.isString,P=i.merge,G=i.pick,O=i.wrap;return function(t){function o(t,e){var i=t.collapseStart||0;return e<=(t=t.collapseEnd||0)&&(i-=.5),{from:i,to:t,showPoints:!1}}function l(t,e,i){var n,a,l=[],s=[],d={},h={},c=-1,p="boolean"==typeof e&&e;return t=f.getTree(t,{after:function(t){t=h[t.pos];var e=0,i=0;t.children.forEach(function(t){i+=(t.descendants||0)+1,e=Math.max((t.height||0)+1,e)}),t.descendants=i,t.height=e,t.collapsed&&s.push(t)},before:function(t){var e,i=y(t.data,!0)?t.data:{},s=A(i.name)?i.name:"",o=d[t.parent],o=y(o,!0)?h[o.pos]:null,r=function(t){return t.name===s};p&&y(o,!0)&&(e=k(o.children,r))?(r=e.pos,e.nodes.push(t)):r=c++,h[r]||(h[r]=e={depth:o?o.depth+1:0,name:s,id:i.id,nodes:[t],children:[],pos:r},-1!==r&&l.push(s),y(o,!0)&&o.children.push(e)),A(t.id)&&(d[t.id]=t),e&&!0===i.collapsed&&(e.collapsed=!0),t.pos=r}}),n=i,h=(a=function(t,i,e){var s=i+(-1===i?0:n-1),o=(s-i)/2,r=i+o;return t.nodes.forEach(function(t){var e=t.data;y(e,!0)&&(e.y=i+(e.seriesIndex||0),delete e.seriesIndex),t.pos=r}),(e[r]=t).pos=r,t.tickmarkOffset=.5+o,t.collapseStart=s+.5,t.children.forEach(function(t){a(t,s+1,e),s=(t.collapseEnd||0)-.5}),t.collapseEnd=s+.5,e})(h[-1],-1,{}),{categories:l,mapOfIdToNode:d,mapOfPosToGridNode:h,collapsedNodes:s,tree:t}}function r(a){a.target.axes.filter(function(t){return"treegrid"===t.options.type}).forEach(function(t){var e=(i=t.options||{}).labels,s=i.uniqueNames,o=0,i=i.max;if(!t.treeGrid.mapOfPosToGridNode||t.series.some(function(t){return!t.hasRendered||t.isDirtyData||t.isDirty})){var r=t.series.reduce(function(e,i){return i.visible&&((i.options.data||[]).forEach(function(t){i.options.keys&&i.options.keys.length&&(t=i.pointClass.prototype.optionsToObject.call({series:i},t),c.seriesTypes.gantt.prototype.setGanttPointAliases(t)),y(t,!0)&&(t.seriesIndex=o,e.push(t))}),!0===s&&o++),e},[]);if(i&&r.length<i)for(var n=r.length;n<=i;n++)r.push({name:n+"â€‹"});i=l(r,s||!1,!0===s?o:1),t.categories=i.categories,t.treeGrid.mapOfPosToGridNode=i.mapOfPosToGridNode,t.hasNames=!0,t.treeGrid.tree=i.tree,t.series.forEach(function(t){var e=(t.options.data||[]).map(function(e){return v(e)&&t.options.keys&&t.options.keys.length&&r.forEach(function(t){0<=e.indexOf(t.x)&&0<=e.indexOf(t.x2)&&(e=t)}),y(e,!0)?P(e):e});t.visible&&t.setData(e,!1)}),t.treeGrid.mapOptionsToLevel=g({defaults:e,from:1,levels:e&&e.levels,to:t.treeGrid.tree&&t.treeGrid.tree.height}),"beforeRender"===a.type&&(t.treeGrid.collapsedNodes=i.collapsedNodes)}})}function e(t,e){var i,s,o=this.treeGrid.mapOptionsToLevel||{},r=this.ticks,n=r[e];"treegrid"===this.options.type&&this.treeGrid.mapOfPosToGridNode?((o=o[(s=this.treeGrid.mapOfPosToGridNode[e]).depth])&&(i={labels:o}),n?(n.parameters.category=s.name,n.options=i,n.addLabel()):r[e]=new p(this,e,void 0,void 0,{category:s.name,tickmarkOffset:s.tickmarkOffset,options:i})):t.apply(this,Array.prototype.slice.call(arguments,1))}function i(t){var e,i=(i=(i=this.options)&&i.labels)&&b(i.indentation)?i.indentation:0,s=t.apply(this,Array.prototype.slice.call(arguments,1));return"treegrid"===this.options.type&&this.treeGrid.mapOfPosToGridNode&&(e=this.treeGrid.mapOfPosToGridNode[-1].height||0,s.width+=i*(e-1)),s}function s(t,e,i){var s=this,o="treegrid"===i.type;s.treeGrid||(s.treeGrid=new d(s)),o&&(m(e,"beforeRender",r),m(e,"beforeRedraw",r),m(e,"addSeries",function(t){t.options.data&&(t=l(t.options.data,i.uniqueNames||!1,1),s.treeGrid.collapsedNodes=(s.treeGrid.collapsedNodes||[]).concat(t.collapsedNodes))}),m(s,"foundExtremes",function(){s.treeGrid.collapsedNodes&&s.treeGrid.collapsedNodes.forEach(function(e){var t=s.treeGrid.collapse(e);s.brokenAxis&&(s.brokenAxis.setBreaks(t,!1),s.treeGrid.collapsedNodes&&(s.treeGrid.collapsedNodes=s.treeGrid.collapsedNodes.filter(function(t){return e.collapseStart!==t.collapseStart||e.collapseEnd!==t.collapseEnd})))})}),m(s,"afterBreaks",function(){var t;"yAxis"===s.coll&&!s.staticScale&&null!==(t=s.chart.options.chart)&&void 0!==t&&t.height&&(s.isDirty=!0)}),i=P({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},i,{reversed:!0,grid:{columns:void 0}})),t.apply(s,[e,i]),o&&(s.hasNames=!0,s.options.showLastLabel=!0)}function n(t){var e=this.options;"treegrid"===e.type?(this.min=G(this.userMin,e.min,this.dataMin),this.max=G(this.userMax,e.max,this.dataMax),x(this,"foundExtremes"),this.setAxisTranslation(!0),this.tickmarkOffset=.5,this.tickInterval=1,this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[]):t.apply(this,Array.prototype.slice.call(arguments,1))}var a=!1;t.compose=function(t){a||(O(t.prototype,"generateTick",e),O(t.prototype,"getMaxLabelDimensions",i),O(t.prototype,"init",s),O(t.prototype,"setTickInterval",n),u.compose(p),a=!0)};var d=(h.prototype.setCollapsedStatus=function(s){var t=this.axis,o=t.chart;t.series.forEach(function(t){var e,i=t.options.data;s.id&&i&&(e=o.get(s.id),t=i[t.data.indexOf(e)],e&&t&&(e.collapsed=s.collapsed,t.collapsed=s.collapsed))})},h.prototype.collapse=function(t){var e=this.axis,i=e.options.breaks||[],s=o(t,e.max);return i.push(s),t.collapsed=!0,e.treeGrid.setCollapsedStatus(t),i},h.prototype.expand=function(t){var e=this.axis,i=e.options.breaks||[],s=o(t,e.max);return t.collapsed=!1,e.treeGrid.setCollapsedStatus(t),i.reduce(function(t,e){return e.to===s.to&&e.from===s.from||t.push(e),t},[])},h.prototype.getTickPositions=function(){var i=this.axis,s=Math.floor(i.min/i.tickInterval)*i.tickInterval,o=Math.ceil(i.max/i.tickInterval)*i.tickInterval;return Object.keys(i.treeGrid.mapOfPosToGridNode||{}).reduce(function(t,e){return!(s<=(e=+e)&&e<=o)||i.brokenAxis&&i.brokenAxis.isInAnyBreak(e)||t.push(e),t},[])},h.prototype.isCollapsed=function(t){var e=this.axis,i=e.options.breaks||[],s=o(t,e.max);return i.some(function(t){return t.from===s.from&&t.to===s.to})},h.prototype.toggleCollapse=function(t){return this.isCollapsed(t)?this.expand(t):this.collapse(t)},h);function h(t){this.axis=t}t.Additions=d}(s=s||{}),t.prototype.utils={getNode:f.getNode},s.compose(t),s}),e(t,"masters/modules/treegrid.src.js",[],function(){})});
