!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(p){function t(t,e,i,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,i))}var e=p?p._modules:{};t(e,"Series/FunnelSeries.js",[e["Core/Series/Series.js"],e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(t,e,i,a){var r=t.seriesTypes,j=i.noop;i=a.addEvent;var w=a.fireEvent,n=a.isArray,Y=a.pick;t.seriesType("funnel","pie",{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}},{animate:j,translate:function(){function t(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}var e,i,a,n,o,s,l,r,h,d,c=0,p=this,g=p.chart,u=p.options,f=u.reversed,b=u.ignoreHiddenPoint,m=g.plotWidth,g=g.plotHeight,v=0,y=u.center,L=t(y[0],m),W=t(y[1],g),A=t(u.width,m),x=t(u.height,g),D=t(u.neckWidth,m),C=t(u.neckHeight,g),H=W-x/2+x-C,m=p.data,k="left"===u.dataLabels.position?1:0;p.getWidthAt=function(t){return H<t||x===C?D:D+(A-D)*(1-(t-(W-x/2))/(x-C))},p.getX=function(t,e,i){return L+(e?-1:1)*(p.getWidthAt(f?2*W-t:t)/2+i.labelDistance)},p.center=[L,W,x],p.centerX=L,m.forEach(function(t){b&&!1===t.visible||(c+=t.y)}),m.forEach(function(t){d=null,a=c?t.y/c:0,r=(o=W-x/2+v*x)+a*x,e=p.getWidthAt(o),s=(n=L-e/2)+e,e=p.getWidthAt(r),h=(l=L-e/2)+e,H<o?(n=l=L-D/2,s=h=L+D/2):H<r&&(d=r,e=p.getWidthAt(H),h=(l=L-e/2)+e,r=H),f&&(o=2*W-o,r=2*W-r,null!==d&&(d=2*W-d)),i=[["M",n,o],["L",s,o],["L",h,r]],null!==d&&i.push(["L",h,d],["L",l,d]),i.push(["L",l,r],["Z"]),t.shapeType="path",t.shapeArgs={d:i},t.percentage=100*a,t.plotX=L,t.plotY=(o+(d||r))/2,t.tooltipPos=[L,t.plotY],t.dlBox={x:l,y:o,topWidth:s-n,bottomWidth:h-l,height:Math.abs(Y(d,r)-o),width:NaN},t.slice=j,t.half=k,b&&!1===t.visible||(v+=a)}),w(p,"afterTranslate")},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e=this.data,i=this.options.dataLabels.distance,a=e.length;for(this.center[2]-=2*i;a--;){var n=e[a],o=(t=n.half)?1:-1,s=n.plotY;n.labelDistance=Y(n.options.dataLabels&&n.options.dataLabels.distance,i),this.maxLabelDistance=Math.max(n.labelDistance,this.maxLabelDistance||0);var l=this.getX(s,t,n);n.labelPosition={natural:{x:0,y:s},final:{},alignment:t?"right":"left",connectorPosition:{breakAt:{x:l+(n.labelDistance-5)*o,y:s},touchingSliceAt:{x:l+n.labelDistance*o,y:s}}}}r[this.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)},alignDataLabel:function(t,e,i,a,n){a=(d=t.series).options.reversed;var o=t.dlBox||t.shapeArgs,s=i.align,l=i.verticalAlign,r=((d.options||{}).dataLabels||{}).inside,h=d.center[1],d=d.getWidthAt((a?2*h-t.plotY:t.plotY)-o.height/2+e.height);d="middle"===l?(o.topWidth-o.bottomWidth)/4:(d-o.bottomWidth)/2,h=o.y;var c=o.x;"middle"===l?h=o.y-o.height/2+e.height/2:"top"===l&&(h=o.y-o.height+e.height+i.padding),("top"===l&&!a||"bottom"===l&&a||"middle"===l)&&("right"===s?c=o.x-i.padding+d:"left"===s&&(c=o.x+i.padding-d)),a={x:c,y:a?h-o.height:h,width:o.bottomWidth,height:o.height},i.verticalAlign="bottom",r&&!t.visible||p.Series.prototype.alignDataLabel.call(this,t,e,i,a,n),r&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}}),i(e,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){var e=t.options&&t.options.dataLabels;n(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),t.seriesType("pyramid","funnel",{neckWidth:"0%",neckHeight:"0%",reversed:!0})}),t(e,"masters/modules/funnel.src.js",[],function(){})});