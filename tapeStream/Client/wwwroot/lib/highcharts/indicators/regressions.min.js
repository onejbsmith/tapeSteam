!function(n){"object"==typeof module&&module.exports?module.exports=n.default=n:"function"==typeof define&&define.amd?define("highcharts/indicators/regressions",["highcharts","highcharts/modules/stock"],function(e){return n(e),n.Highcharts=e,n}):n("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function n(e,n,t,r){e.hasOwnProperty(n)||(e[n]=r.apply(null,t))}n(e=e?e._modules:{},"Stock/Indicators/RegressionIndicators.js",[e["Core/Series/Series.js"],e["Core/Utilities.js"]],function(e,n){var l=n.isArray;e.seriesType("linearRegression","sma",{params:{xAxisUnit:void 0},tooltip:{valueDecimals:4}},{nameBase:"Linear Regression Indicator",getRegressionLineParameters:function(e,n){function t(e,n){return l(e)?e[n]:e}var r=this.options.params.index,s=e.reduce(function(e,n){return n+e},0),i=n.reduce(function(e,n){return t(n,r)+e},0);s/=e.length,i/=n.length;for(var o=0,a=0,c=0;c<e.length;c++){var u=e[c]-s;o+=u*(t(n[c],r)-i),a+=Math.pow(u,2)}return{slope:e=a?o/a:0,intercept:i-e*s}},getEndPointY:function(e,n){return e.slope*n+e.intercept},transformXData:function(e,n){var t=e[0];return e.map(function(e){return(e-t)/n})},findClosestDistance:function(e){for(var n,t=1;t<e.length-1;t++){var r=e[t]-e[t-1];0<r&&(void 0===n||r<n)&&(n=r)}return n},getValues:function(e,n){var t=e.xData;e=e.yData,n=n.period;for(var r={xData:[],yData:[],values:[]},s=this.options.params.xAxisUnit||this.findClosestDistance(t),i=n-1;i<=t.length-1;i++){var o=i-n+1,a=i+1,c=t[i],u=t.slice(o,a),o=e.slice(o,a),a=this.transformXData(u,s),u=this.getRegressionLineParameters(a,o);o=this.getEndPointY(u,a[a.length-1]),r.values.push({regressionLineParameters:u,x:c,y:o}),r.xData.push(c),r.yData.push(o)}return r}}),e.seriesType("linearRegressionSlope","linearRegression",{},{nameBase:"Linear Regression Slope Indicator",getEndPointY:function(e){return e.slope}}),e.seriesType("linearRegressionIntercept","linearRegression",{},{nameBase:"Linear Regression Intercept Indicator",getEndPointY:function(e){return e.intercept}}),e.seriesType("linearRegressionAngle","linearRegression",{tooltip:{pointFormat:'<span style="color:{point.color}">●</span>{series.name}: <b>{point.y}°</b><br/>'}},{nameBase:"Linear Regression Angle Indicator",slopeToAngle:function(e){return 180/Math.PI*Math.atan(e)},getEndPointY:function(e){return this.slopeToAngle(e.slope)}})}),n(e,"masters/indicators/regressions.src.js",[],function(){})});