"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/indicators/macd",["highcharts","highcharts/modules/stock"],function(o){return t(o),t.Highcharts=o,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){var t=o?o._modules:{};function e(o,t,e,s){o.hasOwnProperty(t)||(o[t]=s.apply(null,e))}e(t,"Stock/Indicators/MACDIndicator.js",[t["Core/Series/Series.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(o,t,e){var s=t.noop,h=e.correctFloat,c=e.defined,l=e.merge,p=t.seriesTypes.sma,d=t.seriesTypes.ema;o.seriesType("macd","sma",{params:{shortPeriod:12,longPeriod:26,signalPeriod:9,period:26},signalLine:{zones:[],styles:{lineWidth:1,lineColor:void 0}},macdLine:{zones:[],styles:{lineWidth:1,lineColor:void 0}},threshold:0,groupPadding:.1,pointPadding:.1,crisp:!1,states:{hover:{halo:{size:0}}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> <b> {series.name}</b><br/>Value: {point.MACD}<br/>Signal: {point.signal}<br/>Histogram: {point.y}<br/>'},dataGrouping:{approximation:"averages"},minPointLength:0},{nameComponents:["longPeriod","shortPeriod","signalPeriod"],requiredIndicators:["ema"],pointArrayMap:["y","signal","MACD"],parallelArrays:["x","y","signal","MACD"],pointValKey:"y",markerAttribs:s,getColumnMetrics:t.seriesTypes.column.prototype.getColumnMetrics,crispCol:t.seriesTypes.column.prototype.crispCol,init:function(){p.prototype.init.apply(this,arguments),this.options&&(this.options=l({signalLine:{styles:{lineColor:this.color}},macdLine:{styles:{color:this.color}}},this.options),this.macdZones={zones:this.options.macdLine.zones,startIndex:0},this.signalZones={zones:this.macdZones.zones.concat(this.options.signalLine.zones),startIndex:this.macdZones.zones.length},this.resetZones=!0)},toYData:function(o){return[o.y,o.signal,o.MACD]},translate:function(){var s=this,i=["plotSignal","plotMACD"];t.seriesTypes.column.prototype.translate.apply(s),s.points.forEach(function(e){[e.signal,e.MACD].forEach(function(o,t){null!==o&&(e[i[t]]=s.yAxis.toPixels(o,!0))})})},destroy:function(){this.graph=null,this.graphmacd=this.graphmacd&&this.graphmacd.destroy(),this.graphsignal=this.graphsignal&&this.graphsignal.destroy(),p.prototype.destroy.apply(this,arguments)},drawPoints:t.seriesTypes.column.prototype.drawPoints,drawGraph:function(){for(var o,e=this,t=e.points,s=t.length,i=e.options,n=e.zones,r={options:{gapSize:i.gapSize}},a=[[],[]];s--;)o=t[s],c(o.plotMACD)&&a[0].push({plotX:o.plotX,plotY:o.plotMACD,isNull:!c(o.plotMACD)}),c(o.plotSignal)&&a[1].push({plotX:o.plotX,plotY:o.plotSignal,isNull:!c(o.plotMACD)});["macd","signal"].forEach(function(o,t){e.points=a[t],e.options=l(i[o+"Line"].styles,r),e.graph=e["graph"+o],e.currentLineZone=o+"Zones",e.zones=e[e.currentLineZone].zones,p.prototype.drawGraph.call(e),e["graph"+o]=e.graph}),e.points=t,e.options=i,e.zones=n,e.currentLineZone=null},getZonesGraphs:function(o){var t=p.prototype.getZonesGraphs.call(this,o),e=t;return this.currentLineZone&&((e=t.splice(this[this.currentLineZone].startIndex+1)).length?e.splice(0,0,o[0]):e=[o[0]]),e},applyZones:function(){var o=this.zones;this.zones=this.signalZones.zones,p.prototype.applyZones.call(this),this.graphmacd&&this.options.macdLine.zones.length&&this.graphmacd.hide(),this.zones=o},getValues:function(o,t){var e,s,i,n=0,r=[],a=[],l=[],p=[];if(!(o.xData.length<t.longPeriod+t.signalPeriod)){for(e=d.prototype.getValues(o,{period:t.shortPeriod}),s=d.prototype.getValues(o,{period:t.longPeriod}),e=e.values,s=s.values,i=1;i<=e.length;i++)c(s[i-1])&&c(s[i-1][1])&&c(e[i+t.shortPeriod+1])&&c(e[i+t.shortPeriod+1][0])&&r.push([e[i+t.shortPeriod+1][0],0,null,e[i+t.shortPeriod+1][1]-s[i-1][1]]);for(i=0;i<r.length;i++)a.push(r[i][0]),l.push([0,null,r[i][3]]);for(p=(p=d.prototype.getValues({xData:a,yData:l},{period:t.signalPeriod,index:2})).values,i=0;i<r.length;i++)r[i][0]>=p[0][0]&&(r[i][2]=p[n][1],l[i]=[0,p[n][1],r[i][3]],null===r[i][3]?(r[i][1]=0,l[i][0]=0):(r[i][1]=h(r[i][3]-p[n][1]),l[i][0]=h(r[i][3]-p[n][1])),n++);return{values:r,xData:a,yData:l}}}})}),e(t,"masters/indicators/macd.src.js",[],function(){})});